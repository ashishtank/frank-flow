{"ast":null,"code":"import { faCloudDownloadAlt } from '@fortawesome/free-solid-svg-icons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-smart-modal\";\nimport * as i2 from \"src/app/shared/services/flow-structure.service\";\nimport * as i3 from \"@fortawesome/angular-fontawesome\";\nexport let NodeComponent = /*#__PURE__*/(() => {\n  class NodeComponent {\n    constructor(ngxSmartModalService, flowStructureService) {\n      this.ngxSmartModalService = ngxSmartModalService;\n      this.flowStructureService = flowStructureService;\n      this.cloud = faCloudDownloadAlt;\n      this.dropOptions = {\n        tolerance: 'touch',\n        hoverClass: 'dropHover',\n        activeClass: 'dragActive'\n      };\n      this.dragOptions = {\n        containment: 'canvas',\n        stop: e => {\n          if (e.el.classList[0] === 'color--info') {\n            this.flowStructureService.editListenerPositions(e.el.id, e.pos[0], e.pos[1]);\n          } else if (e.el.classList[0] === 'color--danger') {\n            this.flowStructureService.editExitPositions(e.el.id, e.pos[0], e.pos[1]);\n          } else {\n            this.flowStructureService.editPipePositions(e.el.id, e.pos[0], e.pos[1]);\n          }\n        }\n      };\n      this.bottomEndpointOptions = {\n        endpoint: ['Dot', {\n          radius: 7\n        }],\n        paintStyle: {\n          fill: '#99cb3a'\n        },\n        isSource: true,\n        scope: 'jsPlumb_DefaultScope',\n        connectorStyle: {\n          stroke: '#99cb3a',\n          strokeWidth: 3\n        },\n        connector: ['Bezier', {\n          alwaysRespectStubs: true,\n          cornerRadius: 10,\n          stub: [10, 50],\n          midpoint: 0.0001\n        }],\n        maxConnections: 30,\n        isTarget: false,\n        connectorOverlays: [['Arrow', {\n          location: 1\n        }]],\n        dropOptions: this.dropOptions\n      };\n      this.topEndpointOptions = {\n        endpoint: ['Dot', {\n          radius: 4\n        }],\n        paintStyle: {\n          fill: '#ffcb3a'\n        },\n        isSource: false,\n        scope: 'jsPlumb_DefaultScope',\n        maxConnections: 1,\n        isTarget: true,\n        dropOptions: this.dropOptions\n      };\n    }\n\n    onDoubleClick() {\n      this.openOptions();\n    }\n\n    ngAfterViewInit() {\n      const id = this.node.getId();\n\n      if (this.cssClass === 'shape--oval color--info') {\n        this.bottomEndpointOptions.isSource = false;\n        this.bottomEndpointOptions.connectionsDetachable = false;\n      } else {\n        this.jsPlumbInstance.addEndpoint(id, {\n          anchor: 'Top',\n          uuid: id + '_top',\n          maxConnections: -1\n        }, this.topEndpointOptions);\n      }\n\n      if (this.cssClass !== 'shape--round color--danger') {\n        this.jsPlumbInstance.addEndpoint(id, {\n          anchor: 'Bottom',\n          uuid: id + '_bottom',\n          maxConnections: -1\n        }, this.bottomEndpointOptions);\n      }\n\n      this.jsPlumbInstance.draggable(id, this.dragOptions);\n    }\n\n    openOptions() {\n      this.ngxSmartModalService.getModal('optionsModal').setData(this.node, true).open();\n    }\n\n  }\n\n  NodeComponent.ɵfac = function NodeComponent_Factory(t) {\n    return new (t || NodeComponent)(i0.ɵɵdirectiveInject(i1.NgxSmartModalService), i0.ɵɵdirectiveInject(i2.FlowStructureService));\n  };\n\n  NodeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NodeComponent,\n    selectors: [[\"app-node\"]],\n    hostVars: 4,\n    hostBindings: function NodeComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"dblclick\", function NodeComponent_dblclick_HostBindingHandler() {\n          return ctx.onDoubleClick();\n        });\n      }\n\n      if (rf & 2) {\n        i0.ɵɵstyleMap(ctx.style);\n        i0.ɵɵclassMap(ctx.cssClass);\n      }\n    },\n    inputs: {\n      node: \"node\",\n      jsPlumbInstance: \"jsPlumbInstance\",\n      generating: \"generating\"\n    },\n    decls: 8,\n    vars: 5,\n    consts: [[1, \"node\"], [1, \"node__icon\"], [3, \"icon\"], [1, \"node__type\", 3, \"title\"], [1, \"node__name\", 3, \"title\"], [1, \"node__badges\"]],\n    template: function NodeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelement(2, \"fa-icon\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"div\", 5);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"icon\", ctx.cloud);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"title\", ctx.node.getType());\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.node.getType(), \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"title\", ctx.node.getName());\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.node.getName(), \" \");\n      }\n    },\n    directives: [i3.FaIconComponent],\n    styles: [\"[_nghost-%COMP%]{position:absolute;width:200px;height:100px;padding:.5em;border-radius:10px;color:var(--accent);background:var(--accent-whiten);border:2px solid var(--accent-dark);font-size:14px}[_nghost-%COMP%]:hover{cursor:grab}.jtk-drag[_nghost-%COMP%]{box-shadow:5px 5px 0 0 var(--accent-shadow);cursor:grabbing}.shape--oval[_nghost-%COMP%]{border-radius:100%}.shape--oval[_nghost-%COMP%]   .node[_ngcontent-%COMP%]{grid-template-columns:auto;text-align:center}.shape--oval[_nghost-%COMP%]   .node__type[_ngcontent-%COMP%]{grid-row-start:2;grid-column-start:1}.shape--oval[_nghost-%COMP%]   .node__name[_ngcontent-%COMP%]{grid-row-start:3;grid-column-start:1}.shape--round[_nghost-%COMP%], .shape--square[_nghost-%COMP%]{width:100px;height:100px}.shape--round[_nghost-%COMP%]   .node[_ngcontent-%COMP%], .shape--square[_nghost-%COMP%]   .node[_ngcontent-%COMP%]{grid-template-columns:auto;text-align:center}.shape--round[_nghost-%COMP%]   .node__type[_ngcontent-%COMP%], .shape--square[_nghost-%COMP%]   .node__type[_ngcontent-%COMP%]{grid-row-start:2;grid-column-start:1}.shape--round[_nghost-%COMP%]   .node__name[_ngcontent-%COMP%], .shape--square[_nghost-%COMP%]   .node__name[_ngcontent-%COMP%]{grid-row-start:3;grid-column-start:1}.shape--round[_nghost-%COMP%]{border-radius:100%}.color--primary[_nghost-%COMP%]{color:var(--primary);background:var(--primary-whiten);border:2px solid var(--primary-dark)}.color--primary.jtk-drag[_nghost-%COMP%]{box-shadow:5px 5px 0 0 var(--primary-shadow)}.color--info[_nghost-%COMP%]{color:var(--info);background:var(--info-lighter-45);border:2px solid var(--info-dark)}.color--info.jtk-drag[_nghost-%COMP%]{box-shadow:5px 5px 0 0 var(--info-shadow)}.color--success[_nghost-%COMP%]{color:var(--success);background:var(--success-whiten);border:2px solid var(--success-dark)}.color--success.jtk-drag[_nghost-%COMP%]{box-shadow:5px 5px 0 0 var(--success-shadow)}.color--warning[_nghost-%COMP%]{color:var(--warning);background:var(--warning-whiten);border:2px solid var(--warning-dark)}.color--warning.jtk-drag[_nghost-%COMP%]{box-shadow:5px 5px 0 0 var(--warning-shadow)}.color--danger[_nghost-%COMP%]{color:var(--danger);background:var(--danger-lighter-35);border:2px solid var(--danger-dark)}.color--danger.jtk-drag[_nghost-%COMP%]{box-shadow:5px 5px 0 0 var(--danger-shadow)}[_nghost-%COMP%]   .node[_ngcontent-%COMP%]{display:grid;grid-template-columns:-webkit-min-content auto;grid-template-columns:min-content auto;grid-column-gap:.5em}[_nghost-%COMP%]   .node__icon[_ngcontent-%COMP%]{grid-column-start:1}[_nghost-%COMP%]   .node__type[_ngcontent-%COMP%]{grid-column-start:2;white-space:nowrap;overflow:hidden;font-weight:700;text-overflow:ellipsis}[_nghost-%COMP%]   .node__name[_ngcontent-%COMP%]{grid-column-start:2;grid-row-start:2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\"]\n  });\n  return NodeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}