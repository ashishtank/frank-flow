<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">app/Controller/PipeInfoController.js | Frank!Flow</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="dev tool to work with the Frank framework"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Frank!Flow"><meta property="twitter:description" content="dev tool to work with the Frank framework"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#controller">Controller</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Controller/CodeController.js~CodeController.html">CodeController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Controller/FlowController.js~FlowController.html">FlowController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Controller/PipeInfoController.js~PipeInfoController.html">PipeInfoController</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#converter">Converter</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Converter/ConfigurationConverter.js~ConfigurationConverter.html">ConfigurationConverter</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#facade">Facade</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Facade/CodeFacade.js~CodeFacade.html">CodeFacade</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#model">Model</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Model/FileModel.js~FileModel.html">FileModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Model/FlowModel.js~FlowModel.html">FlowModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Model/IbisdocModel.js~IbisdocModel.html">IbisdocModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Model/PipeModel.js~PipeModel.html">PipeModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Model/XsdModel.js~XsdModel.html">XsdModel</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-codeview">View/codeView</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/CodeView.js~CodeView.html">CodeView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/FileTreeView.js~FileTreeView.html">FileTreeView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/ToBeautifulSyntax.js~ToBeautifulSyntax.html">ToBeautifulSyntax</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/ValidateConfigurationView.js~ValidateConfigurationView.html">ValidateConfigurationView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-logColor">logColor</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-codeview-codecompletion">View/codeView/codeCompletion</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/codeCompletion/XSDCodeCompletionView.js~XSDCodeCompletionView.html">XSDCodeCompletionView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-codeview-codeeditviews">View/codeView/codeEditViews</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/codeEditViews/CodeAttributesView.js~CodeAttributesView.html">CodeAttributesView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/codeEditViews/CodeEditView.js~CodeEditView.html">CodeEditView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/codeEditViews/CodeParametersView.js~CodeParametersView.html">CodeParametersView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/codeEditViews/CodePipeView.js~CodePipeView.html">CodePipeView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/codeEditViews/CodeTypesView.js~CodeTypesView.html">CodeTypesView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/codeEditViews/ExitPipeView.js~ExitPipeView.html">ExitPipeView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/codeView/codeEditViews/OptionView.js~OptionView.html">OptionView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-flowview">View/flowView</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/DescriptionView.js~DescriptionView.html">DescriptionView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/FlowView.js~FlowView.html">FlowView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/TypeImageView.js~TypeImageView.html">TypeImageView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-flowview-flowgeneration">View/flowView/flowGeneration</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/flowGeneration/CustomElementGenerator.js~CustomElementGenerator.html">CustomElementGenerator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/flowGeneration/FlowGenerator.js~FlowGenerator.html">FlowGenerator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/flowGeneration/ForwardGenerator.js~ForwardGenerator.html">ForwardGenerator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/flowGeneration/PipeGenerator.js~PipeGenerator.html">PipeGenerator</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-flowview-pipe">View/flowView/pipe</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/pipe/ActivityPipeView.js~ActivityPipeView.html">ActivityPipeView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/pipe/PipeBuilder.js~PipeBuilder.html">PipeBuilder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/flowView/pipe/PipeView.js~PipeView.html">PipeView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-paletteview">View/paletteView</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/paletteView/PaletteView.js~PaletteView.html">PaletteView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-pipeinfoview">View/pipeInfoView</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/pipeInfoView/PipeInfoView.js~PipeInfoView.html">PipeInfoView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-pipeinfoview-specialpipes">View/pipeInfoView/SpecialPipes</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/pipeInfoView/SpecialPipes/XsltInfoView.js~XsltInfoView.html">XsltInfoView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-pipeinfoview-attributes">View/pipeInfoView/attributes</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/pipeInfoView/attributes/GenerateInfoAttributesView.js~GenerateInfoAttributesView.html">GenerateInfoAttributesView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view-pipeinfoview-parameters">View/pipeInfoView/parameters</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/View/pipeInfoView/parameters/GenerateInfoParametersView.js~GenerateInfoParametersView.html">GenerateInfoParametersView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#services">services</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/FileService.js~FileService.html">FileService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/IbisdocService.js~IbisdocService.html">IbisdocService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/PipeService.js~PipeService.html">PipeService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/XsdService.js~XsdService.html">XsdService</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">app/Controller/PipeInfoController.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import PipeInfoView from &apos;../View/pipeInfoView/PipeInfoView.js&apos;;

export default class PipeInfoController {

  constructor(mainController, ibisdocModel, flowModel) {
    this.ibisdocModel = ibisdocModel;
    this.mainController = mainController;
    this.pipeInfoView = new PipeInfoView(flowModel);
    this.ibisdocModel.addListener(this);
    this.setEventListeners();
  }

  notify(data) {
    this.pipeInfoView.generateTypes(data);
  }

  selectPipe(pipe) {
    console.log(pipe);
    console.log(this.oldName, this.oldType);
    console.trace()
    this.oldName = pipe.name;
    this.oldType = pipe.type;
    this.pipeInfoView.setPipeName(pipe.name);
    this.pipeInfoView.setPipeType(pipe.type);
    let attributes = this.mainController.modifyCode(&quot;getAttributes&quot;, {
        name: pipe.name
      }),
      parameters = this.mainController.modifyCode(&quot;getParameters&quot;, {
        name: pipe.name
      });
    this.pipeInfoView.generatePipeAttributes(attributes);
    this.pipeInfoView.generatePipeParameters(parameters);
    this.setEventListeners();
  }

  //_______________CRUD methods_______________

  changeName(oldName, newName) {
    this.mainController.modifyCode(&quot;changeName&quot;, {
      oldName: oldName,
      newName: newName
    })
    this.oldName = newName;
  }

  changeType(type) {
    let cur = this;
    this.mainController.modifyCode(&quot;changePipeType&quot;, {
      name: cur.oldName,
      type: type,
      oldType: cur.oldType
    })
    this.oldType = type;
  }

  addAttribute(attribute) {
    let cur = this
    this.mainController.modifyCode(&quot;addAttribute&quot;, {
      pipeName: cur.oldName,
      attribute: attribute
    });
    this.mainController.modifyCode(&quot;selectPipe&quot;, {name: cur.oldName});
  }

  changeAttribute(attribute, attributeValue) {
    let cur = this;
    this.mainController.modifyCode(&apos;changeAttribute&apos;, {
      pipeName: cur.oldName,
      attribute: attribute,
      attributeValue: attributeValue
    })
  }

  deleteAttribute(attribute) {
    let cur = this;
    this.mainController.modifyCode(&apos;deleteAttribute&apos;, {
      pipeName: cur.oldName,
      attribute: attribute
    });
    this.mainController.modifyCode(&quot;selectPipe&quot;, {name: cur.oldName});
  }

  addParameter(parameter) {
    let cur = this;
    this.mainController.modifyCode(&apos;addParameter&apos;, {
      pipeName: cur.oldName,
      paramName: parameter
    })
    this.mainController.modifyCode(&quot;selectPipe&quot;, {name: cur.oldName});
  }

  deleteParameter(parameter) {
    let cur = this;
    this.mainController.modifyCode(&apos;deleteParameter&apos;, {
      pipeName: cur.oldName,
      paramName: parameter
    })
    this.mainController.modifyCode(&quot;selectPipe&quot;, {name: cur.oldName});
  }

  addParameterAttribute(parameter, attribute) {
    let cur = this;
    this.mainController.modifyCode(&apos;addParameterAttribute&apos;,
      {
        pipeName: cur.oldName,
        paramName: parameter,
        attributeName: attribute
      }
    )
    this.mainController.modifyCode(&quot;selectPipe&quot;, {name: cur.oldName});
  }


  changeParameterAttribute(parameter, attribute, value) {
    let cur = this;
    this.mainController.modifyCode(&apos;changeParameterAttribute&apos;, {
      pipeName: cur.oldName,
      paramName: parameter,
      attributeName: attribute,
      value: value
    })
  }

  //_______________event listeners_______________

  setEventListeners() {
    let cur = this;

    $(&apos;#pipeInfoName&apos;).on(&apos;change&apos;, function() {
      let newName = $(this).val();
      cur.pipeInfoView.setPipeName(newName);
      cur.changeName(cur.oldName, newName);
    });

    $(&apos;#typeSelect&apos;).on(&apos;change&apos;, function() {
      let type = $(this).val()
      cur.pipeInfoView.setPipeType(type);
      cur.changeType(type);
    });

    //_______________Attributes_______________

    $(&apos;#attributesInfo input&apos;).on(&apos;change&apos;, function(e) {
      let attributeValue = $(e.currentTarget).val(),
      attribute = $(e.currentTarget).attr(&apos;name&apos;);

      cur.changeAttribute(attribute, attributeValue);
    })
    $(&apos;#addAttribute&apos;).off(&apos;click&apos;).on(&apos;click&apos;, function(e) {
      let attributeName = prompt(&quot;new Attribute for &quot; + cur.oldName + &apos;:&apos;, &apos;attribute name&apos;);
      if(attributeName != null) {
      cur.addAttribute(attributeName);
      }
    })

    $(&apos;#attributesInfo .attributeWrapper button&apos;).on(&apos;click&apos;, function(e) {
      let attribute = $(e.currentTarget).attr(&apos;name&apos;);
      cur.deleteAttribute(attribute);
    });

    //_______________Parameters_______________

    $(&apos;.parameterContent&apos;).on(&apos;click&apos;, function(e) {
      let toolbox = e.currentTarget.nextElementSibling;
      if ($(toolbox).css(&apos;display&apos;) == &apos;none&apos;) {
        $(toolbox).css(&apos;display&apos;, &apos;block&apos;)
      } else {
        $(toolbox).css(&apos;display&apos;, &apos;none&apos;)
      }
    });

    $(&apos;#addParameter&apos;).off(&apos;click&apos;).on(&apos;click&apos;, function(e) {
      let parameterName = prompt(&quot;new parameter for &quot; + cur.oldName + &apos;:&apos;, &apos;parameter name&apos;);
      if(parameterName != null) {
        cur.addParameter(parameterName);
      }
    })
    $(&apos;#parametersInfo #parameterDelete&apos;).on(&apos;click&apos;, function(e) {
      let parameterName = $(this).attr(&apos;name&apos;);
      cur.deleteParameter(parameterName);
    })

    $(&apos;#parametersInfo .parameterToolbox i&apos;).on(&apos;click&apos;, function() {
      let parameterName = $(this).attr(&apos;name&apos;),
      attributeName = prompt(&quot;name new attribute&quot;);
      attributeName = attributeName.replace(/\s/g, &apos;&apos;);
      cur.addParameterAttribute(parameterName, attributeName);
    })

    $(&apos;#parametersInfo .paramAttributeWrapper input&apos;).on(&apos;change&apos;, function(e) {
      let parameterName = $(this.parentElement).attr(&apos;name&apos;),
      attributeName = $(this).attr(&apos;id&apos;),
      value = $(this).val();
      cur.changeParameterAttribute(parameterName, attributeName, value);
    })
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
