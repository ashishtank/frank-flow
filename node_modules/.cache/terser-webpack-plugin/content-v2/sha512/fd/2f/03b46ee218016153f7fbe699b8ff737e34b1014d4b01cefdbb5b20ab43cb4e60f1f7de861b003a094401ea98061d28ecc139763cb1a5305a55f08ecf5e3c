{"map":"{\"version\":3,\"sources\":[\"main.js\"],\"names\":[\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"Error\",\"__webpack_exports__\",\"ConfigurationConverter\",\"[object Object]\",\"editor\",\"getValue\",\"replace\",\"xml\",\"DOMParser\",\"parseFromString\",\"transformedXml\",\"JSON\",\"parse\",\"this\",\"xml2json\",\"Configuration\",\"Module\",\"Adapter\",\"forEach\",\"item\",\"index\",\"Array\",\"isArray\",\"localStorage\",\"getItem\",\"tab\",\"X\",\"toObj\",\"nodeType\",\"attributes\",\"length\",\"nodeName\",\"nodeValue\",\"toString\",\"firstChild\",\"textChild\",\"cdataChild\",\"hasElementChild\",\"nextSibling\",\"match\",\"removeWhite\",\"escape\",\"innerXml\",\"documentElement\",\"toJson\",\"ind\",\"json\",\"join\",\"arr\",\"node\",\"innerHTML\",\"asXml\",\"txt\",\"e\",\"normalize\",\"nxt\",\"removeChild\",\"CodeModel\",\"initAdapter\",\"adapter\",\"ValidateConfigurationView\",\"xmllint\",\"validateXML\",\"schema\",\"TOTAL_MEMORY\",\"lineNumber\",\"decorations\",\"deltaDecorations\",\"range\",\"monaco\",\"Range\",\"options\",\"glyphMarginClassName\",\"getModel\",\"getAllDecorations\",\"setValue\",\"CodeCompletionView\",\"CodeCompletionView_default\",\"CodeView_CodeView\",\"listeners\",\"ibisdocJson\",\"validateConfigurationView\",\"a\",\"listener\",\"push\",\"data\",\"notify\",\"document\",\"getElementById\",\"language\",\"theme\",\"glyphMargin\",\"automaticLayout\",\"selectPipe\",\"executeEdits\",\"text\",\"adapters\",\"option\",\"select\",\"$\",\"attr\",\"append\",\"cur\",\"findMatches\",\"getValueInRange\",\"inlineClassName\",\"oldWord\",\"newWord\",\"changeNameCode\",\"newX\",\"newY\",\"pipe\",\"split\",\"find\",\"word\",\"RegExp\",\"str\",\"indexOf\",\"slice\",\"edit\",\"exit\",\"reg\",\"changed\",\"attributeObjectRegex\",\"newPipe\",\"path\",\"search\",\"newLineRange\",\"endColumn\",\"endLineNumber\",\"startColumn\",\"startLineNumber\",\"toLowerCase\",\"possitions\",\"className\",\"adapterName\",\"console\",\"log\",\"matchString\",\"matches\",\"some\",\"x\",\"y\",\"types\",\"occurences\",\"type\",\"receiver\",\"charAt\",\"tag\",\"ToBeautifulSyntax\",\"exits\",\"doc\",\"oldPipe\",\"toUpperCase\",\"CodeController_CodeController\",\"mainController\",\"codeModel\",\"codeView\",\"addListener\",\"toBeautiful\",\"initListeners\",\"getXsd\",\"getCode\",\"getConfigurations\",\"makeEditor\",\"on\",\"val\",\"setItem\",\"click\",\"prettyXML\",\"beautify\",\"onMouseDown\",\"target\",\"generateFlow\",\"onDidChangeContent\",\"flowController\",\"flowView\",\"moving\",\"adding\",\"css\",\"remove\",\"error\",\"modifyFlow\",\"validate\",\"validateConfiguration\",\"undoDecorations\",\"errors\",\"decorateLine\",\"getTypes\",\"changeName\",\"changePossition\",\"changeExitPossition\",\"changeAddForward\",\"deleteForward\",\"changeAddPipe\",\"fetch\",\"method\",\"then\",\"response\",\"setPipes\",\"catch\",\"err\",\"configurations\",\"toBeautifulSyntax\",\"addOptions\",\"DescriptionView\",\"id\",\"canvas\",\"el\",\"addClass\",\"descriptionText\",\"parseInt\",\"PipeView_PipeView\",\"descriptionView\",\"extra\",\"isExit\",\"descText\",\"windows\",\"typeText\",\"typeWindow\",\"getTypeImage\",\"bottomContainer\",\"nameText\",\"hr\",\"extraText\",\"addDescription\",\"instance\",\"makeSource\",\"filter\",\"filterExclude\",\"maxConnections\",\"endpoint\",\"radius\",\"cssClass\",\"anchor\",\"sourceAnchors\",\"connector\",\"connectorType\",\"stub\",\"gap\",\"cornerRadius\",\"alwaysRespectStubs\",\"midpoint\",\"makeTarget\",\"dropOptions\",\"hoverClass\",\"connect\",\"source\",\"paletteImg\",\"img\",\"url\",\"testImage\",\"Image\",\"src\",\"alt\",\"title\",\"onerror\",\"FlowGenerator_FlowGenerator\",\"pipeView\",\"addPipe\",\"resetWindows\",\"Pipeline\",\"reset\",\"empty\",\"forwards\",\"xpos\",\"ypos\",\"checkPossitions\",\"FixedQuerySender\",\"description\",\"Forward\",\"forwardData\",\"sourcePipe\",\"targetPipe\",\"nextPipe\",\"addExits\",\"Exit\",\"setOffsets\",\"Receiver\",\"addReceiver\",\"generateForwards\",\"displayError\",\"generated\",\"counter\",\"getAllConnections\",\"conn\",\"sourceId\",\"connection\",\"targetId\",\"sourceEndpoint\",\"element\",\"lastChild\",\"firstElementChild\",\"textContent\",\"targetEndpoint\",\"deleteConnection\",\"each\",\"f\",\"$element\",\"refactoredText\",\"paintStyle\",\"stroke\",\"strokeWidth\",\"dashstyle\",\"overlays\",\"label\",\"location\",\"padding\",\"FlowView_FlowView\",\"horizontalBuild\",\"flowGenerator\",\"getInstance\",\"domtoimage\",\"toSvg\",\"dataUrl\",\"link\",\"createElement\",\"download\",\"href\",\"window\",\"jsPlumb\",\"DragOptions\",\"cursor\",\"zIndex\",\"PaintStyle\",\"ConnectionOverlays\",\"visible\",\"Container\",\"registerConnectionType\",\"change\",\"obj\",\"notifyListeners\",\"addCustomPipe\",\"editTitle\",\"cleanPossitions\",\"oldTitle\",\"newTitle\",\"prompt\",\"boxOffset\",\"box\",\"totalLength\",\"windowLength\",\"PaletteView_PaletteView\",\"pipes\",\"palette\",\"button\",\"collapsBox\",\"buttonText\",\"setHandlers\",\"coll\",\"getElementsByClassName\",\"addEventListener\",\"classList\",\"toggle\",\"content\",\"nextElementSibling\",\"style\",\"display\",\"ev\",\"preventDefault\",\"stopPropagation\",\"FlowController_FlowController\",\"paletteView\",\"hoverSourceWindow\",\"initHandlers\",\"convertConfiguration\",\"modifyCode\",\"getImage\",\"toggleConnectorType\",\"removeClass\",\"$panzoom\",\"panzoom\",\"lastElementChild\",\"sourceDiv\",\"parentElement\",\"dragData\",\"disabled\",\"containment\",\"drag\",\"dragObj\",\"hasClass\",\"stop\",\"event\",\"ui\",\"draggable\",\"isSourceEnabled\",\"toggleSourceEnabled\",\"innerWidth\",\"innerHeight\",\"minScale\",\"increment\",\"current_pullY\",\"current_pullX\",\"Math\",\"abs\",\"parent\",\"shiftKey\",\"delta\",\"originalEvent\",\"wheelDelta\",\"zoomOut\",\"deltaY\",\"focal\",\"configurationConverter\",\"codeController\",\"generatePalettePipes\",\"classes\",\"line\"],\"mappings\":\"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\"}","code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t){throw new Error(\"Module parse failed: Unexpected token (408:0)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     }\\n|   }\\n> \")},function(e,t,n){\"use strict\";n.r(t);class i{convertConfiguration(e){let t=e.getValue();t=t.replace(/<[^\\/][\\S]*?[^\"\\/]Pipe/g,\"<pipe\"),t=t.replace(/<[\\/][\\S]*?[^\"\\/]Pipe/g,\"</pipe\").replace(/&/g,\"\"),t=t.replace(/<!--[^]*?-->/g,\"\");let n=(new DOMParser).parseFromString(t,\"text/xml\"),i=JSON.parse(this.xml2json(n).replace(\"undefined\",\"\"));return null==i.Configuration.Module&&null!=i.Configuration.Adapter?i.Adapter=i.Configuration.Adapter:i.Configuration.Module.forEach((function(e,t){Array.isArray(e.Adapter)?e.Adapter.forEach((function(e,t){null!=e[\"@name\"]&&e[\"@name\"]==localStorage.getItem(\"currentAdapter\")&&(i.Adapter=e)})):null!=e.Adapter&&null!=e.Adapter[\"@name\"]&&e.Adapter[\"@name\"]==localStorage.getItem(\"currentAdapter\")&&(i=e)})),i}domParse(e){return(new DOMParser).parseFromString(e,\"text/xml\")}xml2json(e,t){var n={toObj:function(e){var t={};if(1==e.nodeType){if(e.attributes.length)for(var i=0;i<e.attributes.length;i++)t[\"@\"+e.attributes[i].nodeName]=(e.attributes[i].nodeValue||\"\").toString();if(e.firstChild){for(var o=0,a=0,r=!1,s=e.firstChild;s;s=s.nextSibling)1==s.nodeType?r=!0:3==s.nodeType&&s.nodeValue.match(/[^ \\f\\n\\r\\t\\v]/)?o++:4==s.nodeType&&a++;if(r)if(o<2&&a<2){n.removeWhite(e);for(s=e.firstChild;s;s=s.nextSibling)3==s.nodeType?t[\"#text\"]=n.escape(s.nodeValue):4==s.nodeType?t[\"#cdata\"]=n.escape(s.nodeValue):t[s.nodeName]?t[s.nodeName]instanceof Array?t[s.nodeName][t[s.nodeName].length]=n.toObj(s):t[s.nodeName]=[t[s.nodeName],n.toObj(s)]:t[s.nodeName]=n.toObj(s)}else e.attributes.length?t[\"#text\"]=n.escape(n.innerXml(e)):t=n.escape(n.innerXml(e));else if(o)e.attributes.length?t[\"#text\"]=n.escape(n.innerXml(e)):t=n.escape(n.innerXml(e));else if(a)if(a>1)t=n.escape(n.innerXml(e));else for(s=e.firstChild;s;s=s.nextSibling)t[\"#cdata\"]=n.escape(s.nodeValue)}e.attributes.length||e.firstChild||(t=null)}else 9==e.nodeType&&(t=n.toObj(e.documentElement));return t},toJson:function(e,t,i){var o=t?'\"'+t+'\"':\"\";if(e instanceof Array){for(var a=0,r=e.length;a<r;a++)e[a]=n.toJson(e[a],\"\",i+\"\\t\");o+=(t?\":[\":\"[\")+(e.length>1?\"\\n\"+i+\"\\t\"+e.join(\",\\n\"+i+\"\\t\")+\"\\n\"+i:e.join(\"\"))+\"]\"}else if(null==e)o+=(t&&\":\")+\"null\";else if(\"object\"==typeof e){var s=[];for(var l in e)s[s.length]=n.toJson(e[l],l,i+\"\\t\");o+=(t?\":{\":\"{\")+(s.length>1?\"\\n\"+i+\"\\t\"+s.join(\",\\n\"+i+\"\\t\")+\"\\n\"+i:s.join(\"\"))+\"}\"}else o+=\"string\"==typeof e?(t&&\":\")+'\"'+e.toString()+'\"':(t&&\":\")+e.toString();return o},innerXml:function(e){var t=\"\";if(\"innerHTML\"in e)t=e.innerHTML;else for(var n=function(e){var t=\"\";if(1==e.nodeType){t+=\"<\"+e.nodeName;for(var i=0;i<e.attributes.length;i++)t+=\" \"+e.attributes[i].nodeName+'=\"'+(e.attributes[i].nodeValue||\"\").toString()+'\"';if(e.firstChild){t+=\">\";for(var o=e.firstChild;o;o=o.nextSibling)t+=n(o);t+=\"</\"+e.nodeName+\">\"}else t+=\"/>\"}else 3==e.nodeType?t+=e.nodeValue:4==e.nodeType&&(t+=\"<![CDATA[\"+e.nodeValue+\"]]>\");return t},i=e.firstChild;i;i=i.nextSibling)t+=n(i);return t},escape:function(e){return e.replace(/[\\\\]/g,\"\\\\\\\\\").replace(/[\\\"]/g,'\\\\\"').replace(/[\\n]/g,\"\\\\n\").replace(/[\\r]/g,\"\\\\r\")},removeWhite:function(e){e.normalize();for(var t=e.firstChild;t;)if(3==t.nodeType)if(t.nodeValue.match(/[^ \\f\\n\\r\\t\\v]/))t=t.nextSibling;else{var i=t.nextSibling;e.removeChild(t),t=i}else 1==t.nodeType?(n.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return e}};9==e.nodeType&&(e=e.documentElement);var i=n.toJson(n.toObj(n.removeWhite(e)),e.nodeName,\"\\t\");return\"{\\n\"+t+(t?i.replace(/\\t/g,t):i.replace(/\\t|\\n/g,\"\"))+\"\\n}\"}}class o{constructor(){this.initAdapter()}initAdapter(){this.adapter=[\"<Adapter\",'\\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"','\\txsi:noNamespaceSchemaLocation=\"https://ibis4example.ibissource.org/rest/ibisdoc/ibisdoc.xsd\"','\\tname=\"HelloWorld\" ','\\tdescription=\"Voorbeeld adapter\">','\\t<Receiver name=\"HelloWorld\">','\\t\\t<ApiListener name=\"HelloWorld\"','\\t\\t\\turiPattern=\"helloworld/{inputString}\"','\\t\\t\\tmethod = \"get\"',\"\\t\\t/>\",\"\\t</Receiver>\",'\\t<Pipeline firstPipe=\"SwitchInput\">','\\t\\t<XmlSwitchPipe name=\"SwitchInput\"','\\t\\t\\tgetInputFromFixedValue=\"&lt;dummy/&gt;\"','\\t\\t\\txpathExpression=\"$input\" x=\"436\" y=\"131\">','\\t\\t\\t<Param name=\"input\" sessionKey=\"inputString\"></Param>',\"\\t\\t</XmlSwitchPipe>\\n\\n\",\"\\t\\t<FixedResultPipe\",'\\t\\t\\tname=\"NFHelloWorld\"','\\t\\t\\treturnString=\"Hallo Ricardo !\"','\\t\\t \\tx=\"863\" y=\"228\">','\\t\\t\\t<Forward name=\"success\" path=\"Exit\"/>',\"\\t\\t</FixedResultPipe>\\n\",'\\t\\t<Exit path=\"ServerError\" state=\"error\" code=\"500\"/>','\\t\\t<Exit path=\"Exit\" state=\"success\" code=\"201\"/>',\"\\t</Pipeline>\",\"</Adapter>\"]}}class a{constructor(e){this.editor=e}validateConfiguration(){return xmllint.validateXML({xml:this.editor.getValue().replace(/\\sx=\".*?\"/g,\"\").replace(/\\sy=\".*?\"/g,\"\"),schema:localStorage.getItem(\"ibisdocXsd\"),TOTAL_MEMORY:16777217})}decorateLine(e){this.decorations=this.editor.deltaDecorations([],[{range:new monaco.Range(e,1,e,1),options:{glyphMarginClassName:\"myGlyphMarginClass\"}}])}undoDecorations(){this.decorations=this.editor.deltaDecorations(this.editor.getModel().getAllDecorations(),[{range:new monaco.Range(1,1,1,1),options:{}}]),this.editor.getModel().setValue(this.editor.getModel().getValue())}}var r=n(0),s=n.n(r);class l{constructor(){this.listeners=[],this.ibisdocJson=null,this.decorations=null,this.decorations=null,this.validateConfigurationView,this.CodeCompletionView=new s.a(this)}addListener(e){this.listeners.push(e)}notifyListeners(e){this.listeners.forEach(t=>t.notify(e))}makeEditor(e){this.editor=monaco.editor.create(document.getElementById(\"monacoContainer\"),{value:e,language:\"xml\",theme:\"vs-dark\",glyphMargin:!0,automaticLayout:!0}),this.selectPipe(\"SwitchInput\"),this.validateConfigurationView=new a(this.editor)}edit(e,t){this.editor.executeEdits(\"monacoContainer\",[{range:e,text:t}])}addOptions(e){let t,n,i=$(\"#adapterSelect\");e.forEach((function(e,o){n=e.match(/<Configuration[^]*?name=\".*?\"/g),null!=n&&(n=n[0].match(/\".*?\"/g)[0].replace(/\"/g,\"\"),t=$(\"<option></option>\").attr(\"value\",o).text(n),$(i).append(t))})),this.editor.setValue(localStorage.getItem(\"0\"))}selectPipe(e){let t=this,n=null;if(this.editor.getModel().findMatches('<[\\\\S]*?[^\"/][pP]ipe[\\\\s\\\\t\\\\n][^]*?>[^]*?<[/][\\\\S]*?[^\"/]Pipe>',!1,!0,!1,!1).forEach((function(i,o){null!==t.editor.getModel().getValueInRange(i.range).match('name=\"'+e+'\"',\"g\")&&(n=i.range)})),null==n)return n;this.decorations=this.editor.deltaDecorations([],[{range:n,options:{inlineClassName:\"myContentClass\"}}])}changeName(e,t){this.changeNameCode('<[\\\\S]*?[^\"/][pP]ipe(\\\\n\\\\t*)?\\\\s?name=\"\\\\w*\"',e,t)&&this.changeNameCode('<forward(\\\\n\\\\t*)?(\\\\s\\\\w*=\"(\\\\s?\\\\S)*\"(\\\\n\\\\t*)?)*\\\\/>',e,t)}changePossition(e,t,n){let i=this;this.editor.getModel().findMatches('<[\\\\S]*?[^\"/][pP]ipe[\\\\s\\\\t\\\\n][^]*?>',!1,!0,!1,!1).forEach((function(o,a){let r=i.editor.getModel().getValueInRange(o.range);if(r.split('\"').find(t=>t===e)){if(r.split(/[\\s=]/).find(e=>\"x\"==e))r=r.replace(new RegExp('x=\"[0-9]*\"',\"g\"),'x=\"'+t+'\"'),r=r.replace(new RegExp('y=\"[0-9]*\"',\"g\"),'y=\"'+n+'\"');else{let e=' x=\"'+t+'\" y=\"'+n+'\"';r=-1!=r.indexOf(\"/>\")?r.slice(0,r.indexOf(\"/\"))+e+r.slice(r.indexOf(\"/\")):r.slice(0,r.indexOf(\">\"))+e+r.slice(r.indexOf(\">\"))}i.edit(o.range,r)}}))}changeExitPossition(e,t,n){let i=this;this.editor.getModel().findMatches(\"<Exit [^]*?\\\\/>\",!1,!0,!1,!1).forEach((function(o,a){let r=i.editor.getModel().getValueInRange(o.range);if(-1!=r.indexOf('path=\"'+e+'\"')){if(-1!=r.indexOf('x=\"'))r=r.replace(/x=\"[0-9]*?\"/g,'x=\"'+t+'\"').replace(/y=\"[0-9]*?\"/g,'y=\"'+n+'\"');else{let e=' x=\"'+t+'\" y=\"'+n+'\"';r=r.slice(0,r.indexOf(\"/\"))+e+r.slice(r.indexOf(\"/\"))}i.edit(o.range,r)}}))}changeNameCode(e,t,n){let i=this,o=this.editor,a=!1,r=e;return o.getModel().findMatches(r,!1,!0,!1,!1).forEach((function(e,r){let s=o.getModel().getValueInRange(e.range);if(s.split('\"').find(e=>e===t)){let o=s.replace(new RegExp(t,\"g\"),n);a=!0,i.edit(e.range,o)}})),a}changeAddForward(e,t){let n=this;this.editor.getModel().findMatches('<[\\\\S]*?[^\"/][pP]ipe[\\\\s\\\\t\\\\n][^]*?>[^]*?<[/][\\\\S]*?[^\"/]Pipe>',!1,!0,!1,!1).forEach((function(i,o){let a=n.editor.getModel().getValueInRange(i.range);if(a.split(/[\\s>]/).find(t=>t==='name=\"'+e+'\"')){a=a.slice(0,a.search(/<[/][\\S]*?[^\"/]Pipe/))+'\\t<Forward name=\"success\" path=\"'+t+'\"/>';let e={endColumn:1,endLineNumber:i.range.endLineNumber,startColumn:1,startLineNumber:i.range.endLineNumber};n.edit(e,\"\\n\"),n.edit(i.range,a)}}))}deleteForward(e,t){let n=this;this.editor.getModel().findMatches('<[\\\\S]*?[^\"/][pP]ipe[\\\\s\\\\t\\\\n][^]*?>[^]*?<[/][\\\\S]*?[^\"/]Pipe>',!1,!0,!1,!1).forEach((function(i,o){let a=n.editor.getModel().getValueInRange(i.range);if(a.split(/[\\s>]/).find(t=>t==='name=\"'+e+'\"')){t=\"exit\"==t.toLowerCase()?\"Exit\":t;let e=a.replace(new RegExp('<Forward[^/]*?path=\"'+t+'\"[^]*?/>',\"gi\"),\"\");n.edit(i.range,e)}}))}changeAddPipe(e,t,n=\"customPipe\"){let i=this,o=$(\"#canvas\").text().match(/Adapter:\\s.*?\\s/g)[0].replace(/Adapter:\\s/g,\"\").replace(\" \",\"\");console.log(o.length);let a='<Adapter name=\"'+localStorage.getItem(\"currentAdapter\")+'\"[\\\\s\\\\S\\\\n]*?<Exit';console.log(a);let r=this.editor.getModel().getValue().match(a);console.log(r);let s=this.editor.getModel().findMatches(a,!1,!0,!1,!1);console.log(s),s.some((function(o,a){console.log(o.range);let r=o.range;r.startColumn=1,r.endColumn=1,r.startLineNumber=r.endLineNumber,i.edit(r,\"\\n\");let s=\"\\t\\t\\t<\"+n+' name=\"'+e+'\" x=\"'+t.x+'\" y=\"'+t.y+'\">\\n\\n\\t\\t\\t</'+n+\">\\n\";return i.edit(r,s),!0}))}getTypes(){let e,t={},n=this.editor.getValue(),i=n.split(/[<>]/),o=null,a=n.match(/<Receiver[^]*?name=\".*?\"[^]*?>/g);return a=null!=a?a[0].match(/\".*?\"/g)[0].replace(/\"/g,\"\"):\"NO_RECEIVER_FOUND\",t['\"receiver\" '+a]=\"Receiver\",i.forEach((function(n,i){if(n.search(/[^/][\\S]*?[^\"/]Pipe[^]*?name=\".*?\"/)>-1&&\"/\"!=n.charAt(0)){let i=n.slice(n.search(/[^/][\\S]*?[^\"/]Pipe[^]*?name=\".*?\"/));null!=i.match(/name=\".*?\"/)&&(e=i.match(/name=\".*?\"/)[0].match(/\".*?\"/)[0].replace(/\"/g,\"\")),null!=i.match(/[^]*?Pipe/)&&(o=i.match(/[^]*?Pipe/)[0]),null!==o&&null!==e&&(t[e]=o)}})),t}}class c{constructor(){}toBeautifulSyntax(e){let t,n=e.match(/<pipe(\\n\\t*)?(\\s\\w*=\"(\\s?\\S)*\"(\\n\\t*)?)*>[^]*?<\\/pipe>/g),i=e;if(null!=n)return n.forEach((function(e,t){let n=e,o=\"\",a=n.match(/className=\".*?\"/)[0].match(/\\.[^.]*?\"/)[0].replace(/[\".]/g,\"\");null==a.match(/.*?Pipe/)&&(a+=\"Pipe\"),o=n.replace(/className=\".*?\"/g,\"\"),o=o.replace(/<pipe/g,\"<\"+a).replace(/<\\/pipe>/,\"</\"+a+\">\"),i=i.replace(n,o)})),i=i.replace(/<listener[^]*?className=\".*?\"[^]*?\\/>/g,(function(e){let t=e.match(/className=\".*?\"/)[0].match(/\\.[^.]*?\"/)[0].replace(/[\".]/g,\"\");return e=\"<\"+(e=e.replace(/className=\".*?\"/g,\"\")).replace(/<.*? /g,t+\" \")})).replace(/<[\\/]?[a-zA-Z]/g,(function(e){return e.toUpperCase()})),t=i.match(/<Exits>[^]*?<\\/Exits>/)[0].replace(/<\\/?Exits>/g,\"\").replace(/\\t/,\"\"),i=i.replace(/<Exits>[^]*?<\\/Exits>/g,\"\").replace(/<\\/Pipeline>/g,t+\"\\n \\t\\t</Pipeline>\").replace(/className=\".*?\"/g,\"\"),i}}class d{constructor(e){this.mainController=e,this.codeModel=new o,this.codeView=new l,this.codeView.addListener(this),this.toBeautiful=new c,this.notify({type:\"getData\"}),this.notify({type:\"setEditor\"}),this.editor=this.codeView.editor,this.initListeners()}notify(e){switch(e.type){case\"getData\":this.getXsd(),this.getCode(),this.getConfigurations();break;case\"setEditor\":this.codeView.makeEditor()}}initListeners(){let e=this;$(\"#adapterSelect\").on(\"change\",(function(t){let n=$(\"#adapterSelect\").val();e.editor.getModel().setValue(localStorage.getItem(n))})),$(\"#adapterSelect\").on(\"click\",(function(t){let n=$(\"#adapterSelect\").val();localStorage.setItem(n,e.editor.getModel().getValue())})),$(\"#beautify\").click((function(){let t=beautify.xml(e.editor.getValue(),4);e.editor.getModel().setValue(t)})),e.editor.onMouseDown((function(t){t.target.range.startLineNumber=1,t.target.range.startColumn=1;let n=e.editor.getModel().getValueInRange(t.target.range).match(/<Adapter[^]*?name=\".*?\">/g);if(null!=n){let t=n[n.length-1].match(/name=\"[^]*?\"/g)[0].match(/\"[^]*?\"/g)[0].replace(/\"/g,\"\");localStorage.setItem(\"currentAdapter\",t),e.mainController.generateFlow()}})),this.editor.getModel().onDidChangeContent((function(t){if(!e.mainController.flowController.flowView.moving&&!e.mainController.flowController.flowView.adding)try{$(\"#canvas\").css(\"display\",\"block\"),$(\".customErrorMessage\").remove(),e.mainController.generateFlow()}catch(t){console.log(\"error\",t),e.mainController.flowController.flowView.modifyFlow(\"error\",t)}})),$(\"#runXsd\").click((function(){let t=e.validateConfiguration(),n=0;e.undoDecorations(),null!==t.errors&&(console.log(t.errors),t.errors.forEach((function(t,i){n=t.match(/:.*?:/)[0].replace(/:/g,\"\"),e.decorateLine(n)})))}))}selectPipe(e){this.codeView.selectPipe(e)}getTypes(){return this.codeView.getTypes()}validateConfiguration(){return this.codeView.validateConfigurationView.validateConfiguration()}decorateLine(e){this.codeView.validateConfigurationView.decorateLine(e)}undoDecorations(){this.codeView.validateConfigurationView.undoDecorations()}changeName(e,t){this.codeView.changeName(e,t)}changePossition(e,t,n){this.codeView.changePossition(e,t,n)}changeExitPossition(e,t,n){this.codeView.changeExitPossition(e,t,n)}changeAddForward(e,t){this.codeView.changeAddForward(e,t)}deleteForward(e,t){this.codeView.deleteForward(e,t)}changeAddPipe(e,t,n){this.codeView.changeAddPipe(e,t,n)}getPipes(){return this.codeView.ibisdocJson}getCode(){let e=this;fetch(\"../rest/ibisdoc/ibisdoc.json\",{method:\"GET\"}).then(e=>e.json()).then(t=>{e.codeView.ibisdocJson=t,e.mainController.setPipes(t)}).catch(e=>{console.log(e)})}getXsd(){fetch(\"../rest/ibisdoc/ibisdoc.xsd\",{method:\"GET\"}).then(e=>e.text()).then(e=>{localStorage.setItem(\"ibisdocXsd\",e),console.log(\"xsd is loaded!, here\")}).catch(e=>{console.log(\"not loaded xsd\",e)})}getConfigurations(){let e=this;fetch(\"../iaf/api/configurations\",{method:\"GET\"}).then(e=>e.text()).then(e=>{let t=[];return e.match(/<[cC]onfiguration[^]*?>[^]*?<\\/[cC]onfiguration>/g).forEach((function(e,n){t.push(e)})),t}).then(t=>(t.forEach((function(n,i){null==n.match(/<Configuration/g)?(t[i]=e.toBeautiful.toBeautifulSyntax(n),localStorage.setItem(i,e.toBeautiful.toBeautifulSyntax(n))):localStorage.setItem(i,n)})),t)).then(t=>{e.codeView.addOptions(t)}).catch(e=>{console.log(\"couldnt load configurations\",e)})}}class p{constructor(){}addDescription(e,t,n){let i=$(\"#canvas\"),o=$(\"<div></div>\").addClass(\"description\").attr(\"id\",\"description\"+n),a=$(\"<p></p>\").text(e);o.append(a),console.log(\"desc Text:\"+e,t),t.x=parseInt(t.x)+300,$(o).css(\"left\",t.x+\"px\"),$(o).css(\"top\",t.y+\"px\"),i.append(o)}}class h{constructor(e){this.flowView=e,this.descriptionView=new p}addPipe(e,t,n,i,o){let a=this.flowView,r=a.windows+=1,s=$(\"#canvas\"),l=$(\"<div></div>\").addClass(\"window sourceWindow\").attr(\"id\",\"sourceWindow\"+r),c=$(\"<strong></strong>\").attr(\"id\",\"strong\").text(a.getTypes()[e]),d=$(\"<div></div>\").addClass(\"typeWindow\").append(this.getTypeImage(e),c),p=$(\"<div></div>\").addClass(\"bottomContainer\"),h=$(\"<strong></strong>\").attr(\"id\",\"strong\").text(e),u=$(\"<hr>\"),g=$(\"<strong></strong>\").attr(\"id\",\"strong\").text(n);return i?p.append(h,g):p.append(h,u,g),l.append(d,p),null!=t&&($(l).css(\"left\",t.x+\"px\"),$(l).css(\"top\",t.y+\"px\"),o&&this.descriptionView.addDescription(o,t,r)),i&&$(l).addClass(\"exit\"),instance.makeSource(l,{filter:\".enableDisableSource\",filterExclude:!0,maxConnections:-1,endpoint:[\"Dot\",{radius:7,cssClass:\"small-blue\"}],anchor:a.sourceAnchors,connector:[a.connectorType,{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0,midpoint:1e-4}]}),instance.makeTarget(l,{dropOptions:{hoverClass:\"hover\"},anchor:[\"Left\",\"Top\",\"Right\"],endpoint:[\"Dot\",{radius:11,cssClass:\"large-green\"}]}),s.append(l),o&&instance.connect({source:\"sourceWindow\"+r,target:\"description\"+r}),e}getTypeImage(e,t){let n,i,o=this.flowView.getTypes(),a=new Image;if(i=t?\"media/\"+e+\".png\":\"media/\"+o[e]+\".png\",null!=i)return n=$(\"<img></img>\").attr({src:i,alt:o[e],title:o[e]}).addClass(\"typeImg\"),a.src=i,a.onerror=function(){n.attr(\"src\",\"media/basicPipe.png\")},n}}class u{constructor(e){this.flowView=e,this.pipeView=new h(e)}addPipe(e=\"pipe\"+this.flowView.windows,t,n=\"\",i,o){return this.pipeView.addPipe(e,t,n,i,o)}generateFlow(e,t){this.flowView.resetWindows();let n=null,i=e;if(null!=i&&null!=i.Adapter&&null!=i.Adapter.Pipeline){if(instance.reset(),$(\"#canvas\").empty(),null!=i.Adapter.Pipeline.pipe){$(\"#canvas\").text(\"Adapter: \"+i.Adapter[\"@name\"]+\" \");let e=i.Adapter.Pipeline.pipe,t=[];if(Array.isArray(e))for(let i in e){let o=e[i][\"@name\"],a=e[i][\"@x\"],r=e[i][\"@y\"],s=\"\",l=null;if(n=this.checkPossitions(a,r),null!=e[i][\"@xpathExpression\"]?s=e[i][\"@xpathExpression\"].slice(0,15)+\"...\":null!=e[i].FixedQuerySender&&null!=e[i].FixedQuerySender[\"@query\"]&&(s=e[i].FixedQuerySender[\"@query\"].slice(0,15)+\"...\"),null!=e[i].description&&(console.log(e[i].description),l=e[i].description),this.addPipe(o,n,s,null,l),null!=e[i].Forward){let n=null;Array.isArray(e[i].Forward)?e[i].Forward.forEach((function(e,i){n={sourcePipe:o,targetPipe:e[\"@path\"],name:e[\"@name\"]},t.push(n)})):(n={sourcePipe:o,targetPipe:e[i].Forward[\"@path\"],name:e[i].Forward[\"@name\"]},t.push(n))}else{let n=parseInt(i)+1;if(null!=e[n]){let i={sourcePipe:o,targetPipe:e[n][\"@name\"],name:\"success\"};t.push(i)}}}else{let n=e[\"@name\"];if(this.addPipe(n),null!=e.Forward){let i=null;Array.isArray(e.Forward)?e.Forward.forEach((function(e,o){i={sourcePipe:n,targetPipe:e[\"@path\"],name:e[\"@name\"]},t.push(i)})):(i={sourcePipe:n,targetPipe:e.Forward[\"@path\"],name:e.Forward[\"@name\"]},t.push(i))}}if(this.addExits(i.Adapter.Pipeline.Exit),null===n?this.flowView.setOffsets(!1):this.flowView.setOffsets(!0),null!=i.Adapter.Receiver){let e=this.addReceiver(i,t[0].sourcePipe);t.push(e)}this.generateForwards(t)}}else this.flowView.displayError(i)}checkPossitions(e,t){return null==e&&null!=t?e=t:null==t&&null!=e&&(t=e),null!=e&&null!=t?{x:e,y:t}:null}addReceiver(e,t){return this.addPipe(\"(receiver): \"+e.Adapter.Receiver[\"@name\"],{x:\"600\",y:\"400\"}),{sourcePipe:\"(receiver): \"+e.Adapter.Receiver[\"@name\"],targetPipe:t,name:\"request\"}}addExits(e){let t,n,i,o,a=e;if(null!=a)if(Array.isArray(a)){let e=this;a.forEach((function(r,s){n=a[s][\"@path\"],o=a[s][\"@x\"],i=a[s][\"@y\"],null!=o&&null!=i&&(t={x:o,y:i}),e.addPipe(n,t,\"\",!0)}))}else n=a[\"@path\"],o=a[\"@x\"],i=a[\"@y\"],null!=o&&null!=i&&(t={x:o,y:i}),this.addPipe(n,t,\"\",!0)}generateForwards(e){let t=!0,n=this;instance.bind(\"connection\",(function(e,i){let o=0;instance.getAllConnections().forEach((function(t){t.sourceId==e.connection.sourceId&&t.targetId==e.connection.targetId&&o<2&&o++}));let a=e.sourceEndpoint.element.lastChild.firstElementChild.textContent,r=e.targetEndpoint.element.lastChild.firstElementChild.textContent;e.connection.bind(\"dblclick\",(function(e){instance.deleteConnection(e),n.flowView.modifyFlow(\"delete\",{name:a,target:r})})),o>1?instance.getAllConnections().some((function(t){if(t.sourceId==e.connection.sourceId&&t.targetId==e.connection.targetId)return instance.deleteConnection(t),!0})):t||n.flowView.modifyFlow(\"connection\",{source:a,target:r})}));let i=\"\",o=\"\";t=!0,$(e).each((function(e,t){i=\"\",o=\"\",null==t.targetPipe&&(t.targetPipe=t.name),$(\".sourceWindow\").each((function(e,n){var a=$(n)[0];let r=a.lastChild.firstChild.innerHTML;r==t.sourcePipe?i=$(a).attr(\"id\"):r==t.targetPipe&&(o=$(a).attr(\"id\"))}));let n={stroke:\"#000000\",strokeWidth:3};\"failure\"==t.name||\"exception\"==t.name?n.stroke=\"#FF0000\":\"success\"==t.name?n.stroke=\"#22bb33\":\"request\"!=t.name&&\"response\"!=t.name||(n.dashstyle=\"2 4\"),\"\"!=i&&\"\"!=o&&instance.connect({source:i,target:o,paintStyle:n,overlays:[[\"Label\",{label:t.name,id:\"label\",location:.1,padding:100}]],connector:[this.connectorType,{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0,midpoint:1e-4}]})})),t=!1}}class g{constructor(){this.transformedXml=null,this.types=[],this.listeners=[],this.windows=0,this.moving=!1,this.adding=!1,this.connectorType=\"Flowchart\",this.horizontalBuild=!1,this.flowGenerator=new u(this),this.getInstance()}addListener(e){this.listeners.push(e)}notifyListeners(e){this.listeners.forEach(t=>t.notify(e))}getImage(){var e=document.getElementById(\"canvas\");domtoimage.toSvg(e).then((function(e){var t=document.createElement(\"a\");t.download=\"lol.svg\",t.href=e,t.click()})).catch((function(e){console.error(\"oops, something went wrong!\",e)}))}resetWindows(){this.windows=0}getInstance(){this.sourceAnchors=[\"Top\",\"Right\",\"Left\",[.25,1,0,1],[.5,1,0,1],[.75,1,0,1],[1,1,0,1]],this.instance=window.instance=jsPlumb.getInstance({DragOptions:{cursor:\"pointer\",zIndex:2e3},PaintStyle:{stroke:\"#000000\",strokeWidth:3},ConnectionOverlays:[[\"Arrow\",{location:1,visible:!0,id:\"ARROW\",zIndex:1e3}]],Container:\"canvas\"});this.instance.registerConnectionType(\"basic\",{connector:[\"StateMachine\",{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0}]})}modifyFlow(e,t){switch(e){case\"generate\":this.generateFlow();break;case\"add\":this.notifyListeners(this.addCustomPipe(t.name,t.className));break;case\"edit\":this.notifyListeners(this.editTitle(t));break;case\"connection\":this.adding=!0,t.type=\"changeAddForward\",this.notifyListeners(t),this.adding=!1;break;case\"drag\":(t=this.cleanPossitions(t)).type=\"drag\",this.notifyListeners(t);break;case\"dragExit\":(t=this.cleanPossitions(t)).type=\"dragExit\",this.notifyListeners(t);break;case\"delete\":t.type=\"delete\",this.notifyListeners(t);break;case\"error\":this.displayError(t)}}cleanPossitions(e){return e.x=e.x.replace(/px/,\"\"),e.y=e.y.replace(/px/,\"\"),e}editTitle(e){let t=e.innerHTML,n=prompt(\"What is the new Title?\",t);return null!=n?(e.innerHTML=n,{oldTitle:t,newTitle:n}):null}addCustomPipe(e,t){return{type:\"changeAddPipe\",name:this.addPipe(e,{x:100,y:100}),possitions:{x:100,y:100},className:t}}toggleConnectorType(e){\"Flowchart\"===e.connectorType?e.connectorType=\"StateMachine\":e.connectorType=\"Flowchart\",e.generateFlow()}addPipe(e,t,n,i){return this.flowGenerator.addPipe(e,t,n,i)}getTypes(){return this.notifyListeners({type:\"getTypes\"}),this.types}setOffsets(e){let t=0;this.moving=!0;for(let n=1;n<=this.windows;n++){if(t+=250,!e){let e=$(\"#sourceWindow\"+n);this.horizontalBuild?(e.css(\"top\",\"100px\"),e.css(\"left\",t+\"px\")):e.css(\"top\",t+\"px\"),this.modifyFlow(\"drag\",{name:e[0].lastChild.firstElementChild.textContent,x:e.css(\"left\"),y:e.css(\"top\")})}let i,o;this.horizontalBuild?(i=t+(64*n-1e3),o=parseInt($(\"#canvas\").css(\"width\").replace(\"px\",\"\")),i>o&&$(\"#canvas\").css(\"width\",i)):(i=t+(64*n-1450),o=parseInt($(\"#canvas\").css(\"height\").replace(\"px\",\"\")),i>o&&$(\"#canvas\").css(\"height\",i))}this.moving=!1}generateFlow(){this.notifyListeners({type:\"convertConfiguration\"}),this.flowGenerator.generateFlow(this.transformedXml,this.windows)}displayError(e){instance.reset(),$(\"#canvas\").empty(),$(\"#canvas\").css(\"display\",\"none\"),$(\".customErrorMessage\").remove(),$(\"#flowContainer\").append($(\"<h1></h1>\").text(\"Error\"+e).addClass(\"customErrorMessage\"))}}class f{constructor(e){this.listeners=[],this.pipes=null,this.flowView=e.flowView}addListener(e){this.listeners.push(e)}notifyListeners(e){this.listeners.forEach(t=>t.notify(e))}generatePalettePipes(e){let t=new h(this.flowView),n=$(\"#palette\");e.forEach((function(e,i){$(\"<strong></strong>\").text(e.name);let o,a=$(\"<button></button>\").attr(\"type\",\"button\").addClass(\"collapsible listItem\"),r=$(\"<div></div>\").addClass(\"content\"),s=$(\"<span></span>\").addClass(\"buttonText\").text(e.name);o=t.getTypeImage(e.name,!0).attr(\"id\",e.name),a.append(s),r.append(o),n.append(a,r)})),this.setHandlers()}setHandlers(){let e=this;var t,n=document.getElementsByClassName(\"collapsible\");for(t=0;t<n.length;t++)n[t].addEventListener(\"click\",(function(){this.classList.toggle(\"active\");var e=this.nextElementSibling;\"block\"===e.style.display?e.style.display=\"none\":e.style.display=\"block\"}));$(\"#canvas\").on(\"dragover\",(function(e){e.preventDefault(),e.stopPropagation()})),$(\"#canvas\").on(\"drop\",(function(t){t.preventDefault(),t.stopPropagation();let n=localStorage.getItem(\"dropPipe\");e.flowView.modifyFlow(\"add\",{name:\"new\"+n,className:n})})),$(\".typeImg\").on(\"dragstart\",(function(e){console.log(\"drag\"),localStorage.setItem(\"dropPipe\",e.target.id)}))}}class m{constructor(e){this.mainController=e,this.flowView=new g,this.flowView.addListener(this),this.paletteView=new f(this),this.paletteView.addListener(this),this.notify({type:\"getPipes\"}),this.hoverSourceWindow=!1,this.initHandlers()}notify(e){if(null!=e)switch(e.type){case\"convertConfiguration\":this.flowView.transformedXml=this.mainController.convertConfiguration();break;case\"getTypes\":this.flowView.types=this.mainController.modifyCode(\"getTypes\");break;case\"changeName\":this.mainController.modifyCode(\"changeName\",e);break;case\"changeAddPipe\":this.mainController.modifyCode(\"changeAddPipe\",e);break;case\"changeAddForward\":this.mainController.modifyCode(\"changeAddForward\",e);break;case\"drag\":this.mainController.modifyCode(\"changePossition\",e);break;case\"dragExit\":this.mainController.modifyCode(\"changeExitPossition\",e);break;case\"delete\":this.mainController.modifyCode(\"deleteForward\",e)}}initHandlers(){let e=this;$(\"#addPipe\").click((function(){e.flowView.modifyFlow(\"add\",{name:\"newPipe\",className:\"customPipe\"})})),$(\"#downloadLink\").click((function(){e.flowView.getImage()})),$(\"#setData\").click((function(){e.flowView.generateFlow(e.flowView)})),$(\"#lineChanges\").click((function(){e.flowView.toggleConnectorType(e.flowView)})),$(\"#toggleH\").click((function(){e.flowView.horizontalBuild?(e.flowView.horizontalBuild=!1,$(\"#toggleH\").removeClass(\"selectedItem\")):(e.flowView.horizontalBuild=!0,$(\"#toggleH\").addClass(\"selectedItem\")),e.flowView.generateFlow(e.flowView)})),$(\"#canvas\").on(\"dblclick\",\"#strong\",(function(t){t.stopPropagation(),console.log(\"dblclick!\"),\"EXIT\"!==this.innerHTML&&e.flowView.modifyFlow(\"edit\",this)})),jsPlumb.on($(\"#canvas\"),\"mouseover\",\".sourceWindow\",(function(){t.panzoom(\"disable\")})),jsPlumb.on($(\"#canvas\"),\"mouseout\",\".sourceWindow\",(function(){t.panzoom(\"enable\"),$(\"#flowContainer\").attr(\"style\",\"\")})),$(\"#canvas\").on(\"click\",\".sourceWindow\",(function(t){t.preventDefault(),e.mainController.modifyCode(\"undoDecorations\"),e.mainController.modifyCode(\"selectPipe\",{name:this.lastElementChild.firstElementChild.innerHTML})})),jsPlumb.on($(\"#canvas\"),\"mouseover\",\".bottomContainer\",(function(){let t=this.parentElement,n={disabled:!1,containment:\"#canvas\",drag:function(){e.flowView.moving=!0;let n={x:$(t).css(\"left\"),y:$(t).css(\"top\"),name:t.lastElementChild.firstElementChild.innerHTML};$(t).hasClass(\"exit\")?e.flowView.modifyFlow(\"dragExit\",n):e.flowView.modifyFlow(\"drag\",n)},stop:function(t,n){e.flowView.moving=!1}};instance.draggable(t,n),instance.isSourceEnabled(t)&&instance.toggleSourceEnabled(t),$(this).addClass(\"element-disabled\")})),jsPlumb.on($(\"#canvas\"),\"mouseout\",\".bottomContainer\",(function(){let e=this.parentElement;instance.draggable(e,{disabled:!0}),instance.isSourceEnabled(e)||instance.toggleSourceEnabled(e),$(this).removeClass(\"element-disabled\")}));$(\"#flowContainer\").innerWidth(),$(\"#flowContainer\").innerHeight();let t=$(\"#canvas\").panzoom({minScale:.5,increment:.2});t.on(\"panzoomend\",(function(e){var n=parseInt($(\"#canvas\").css(\"transform\").split(\",\")[5]),i=parseInt($(\"#canvas\").css(\"transform\").split(\",\")[4]);i>=0&&t.panzoom(\"pan\",0,n),n<=1e3-Math.abs($(\"#canvas\").css(\"height\").replace(\"px\",\"\"))&&t.panzoom(\"pan\",i,1e3-Math.abs($(\"#canvas\").css(\"height\").replace(\"px\",\"\"))),i<=-1540&&t.panzoom(\"pan\",-1540,n),n>=0&&t.panzoom(\"pan\",i,0),$(\"#flowContainer\").attr(\"style\",\"\")})),t.parent().on(\"mousewheel.focal\",(function(e){if(e.shiftKey){e.preventDefault();var n=e.delta||e.originalEvent.wheelDelta,i=n?n<0:e.originalEvent.deltaY>0;t.panzoom(\"zoom\",i,{increment:.1,focal:e})}}))}}new class{constructor(){this.configurationConverter=new i,this.codeController=new d(this),this.flowController=new m(this)}convertConfiguration(){return this.configurationConverter.convertConfiguration(this.codeController.codeView.editor)}generateFlow(){this.flowController.flowView.modifyFlow(\"generate\")}setPipes(e){this.flowController.paletteView.generatePalettePipes(e[2].classes)}modifyCode(e,t){let n=this.codeController;switch(e){case\"getTypes\":return n.getTypes();case\"validateConfiguration\":return n.validateConfiguration();case\"decorateLine\":n.decorateLine(t.line);break;case\"undoDecorations\":n.undoDecorations();break;case\"changeName\":n.changeName(t.oldTitle,t.newTitle);break;case\"changePossition\":n.changePossition(t.name,t.x,t.y);break;case\"changeExitPossition\":n.changeExitPossition(t.name,t.x,t.y);break;case\"changeAddForward\":n.changeAddForward(t.source,t.target);break;case\"deleteForward\":n.deleteForward(t.name,t.target);break;case\"changeAddPipe\":n.changeAddPipe(t.name,t.possitions,t.className);break;case\"selectPipe\":n.selectPipe(t.name)}}}}]);","extractedComments":[]}