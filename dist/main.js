!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class i{convertConfiguration(e){let t=e.getValue();t=t.replace(/<[^\/][\S]*?[^"\/]Pipe/g,"<pipe"),t=t.replace(/<[\/][\S]*?[^"\/]Pipe/g,"</pipe").replace(/&/g,""),t=t.replace(/<!--[^]*?-->/g,"");let n=(new DOMParser).parseFromString(t,"text/xml"),i=JSON.parse(this.xml2json(n).replace("undefined",""));return null==i.Configuration.Module&&null!=i.Configuration.Adapter?i.Adapter=i.Configuration.Adapter:i.Configuration.Module.forEach((function(e,t){Array.isArray(e.Adapter)?e.Adapter.forEach((function(e,t){null!=e["@name"]&&e["@name"]==localStorage.getItem("currentAdapter")&&(i.Adapter=e)})):null!=e.Adapter&&null!=e.Adapter["@name"]&&e.Adapter["@name"]==localStorage.getItem("currentAdapter")&&(i=e)})),i}domParse(e){return(new DOMParser).parseFromString(e,"text/xml")}xml2json(e,t){var n={toObj:function(e){var t={};if(1==e.nodeType){if(e.attributes.length)for(var i=0;i<e.attributes.length;i++)t["@"+e.attributes[i].nodeName]=(e.attributes[i].nodeValue||"").toString();if(e.firstChild){for(var a=0,o=0,r=!1,s=e.firstChild;s;s=s.nextSibling)1==s.nodeType?r=!0:3==s.nodeType&&s.nodeValue.match(/[^ \f\n\r\t\v]/)?a++:4==s.nodeType&&o++;if(r)if(a<2&&o<2){n.removeWhite(e);for(s=e.firstChild;s;s=s.nextSibling)3==s.nodeType?t["#text"]=n.escape(s.nodeValue):4==s.nodeType?t["#cdata"]=n.escape(s.nodeValue):t[s.nodeName]?t[s.nodeName]instanceof Array?t[s.nodeName][t[s.nodeName].length]=n.toObj(s):t[s.nodeName]=[t[s.nodeName],n.toObj(s)]:t[s.nodeName]=n.toObj(s)}else e.attributes.length?t["#text"]=n.escape(n.innerXml(e)):t=n.escape(n.innerXml(e));else if(a)e.attributes.length?t["#text"]=n.escape(n.innerXml(e)):t=n.escape(n.innerXml(e));else if(o)if(o>1)t=n.escape(n.innerXml(e));else for(s=e.firstChild;s;s=s.nextSibling)t["#cdata"]=n.escape(s.nodeValue)}e.attributes.length||e.firstChild||(t=null)}else 9==e.nodeType&&(t=n.toObj(e.documentElement));return t},toJson:function(e,t,i){var a=t?'"'+t+'"':"";if(e instanceof Array){for(var o=0,r=e.length;o<r;o++)e[o]=n.toJson(e[o],"",i+"\t");a+=(t?":[":"[")+(e.length>1?"\n"+i+"\t"+e.join(",\n"+i+"\t")+"\n"+i:e.join(""))+"]"}else if(null==e)a+=(t&&":")+"null";else if("object"==typeof e){var s=[];for(var l in e)s[s.length]=n.toJson(e[l],l,i+"\t");a+=(t?":{":"{")+(s.length>1?"\n"+i+"\t"+s.join(",\n"+i+"\t")+"\n"+i:s.join(""))+"}"}else a+="string"==typeof e?(t&&":")+'"'+e.toString()+'"':(t&&":")+e.toString();return a},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else for(var n=function(e){var t="";if(1==e.nodeType){t+="<"+e.nodeName;for(var i=0;i<e.attributes.length;i++)t+=" "+e.attributes[i].nodeName+'="'+(e.attributes[i].nodeValue||"").toString()+'"';if(e.firstChild){t+=">";for(var a=e.firstChild;a;a=a.nextSibling)t+=n(a);t+="</"+e.nodeName+">"}else t+="/>"}else 3==e.nodeType?t+=e.nodeValue:4==e.nodeType&&(t+="<![CDATA["+e.nodeValue+"]]>");return t},i=e.firstChild;i;i=i.nextSibling)t+=n(i);return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t=e.firstChild;t;)if(3==t.nodeType)if(t.nodeValue.match(/[^ \f\n\r\t\v]/))t=t.nextSibling;else{var i=t.nextSibling;e.removeChild(t),t=i}else 1==t.nodeType?(n.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return e}};9==e.nodeType&&(e=e.documentElement);var i=n.toJson(n.toObj(n.removeWhite(e)),e.nodeName,"\t");return"{\n"+t+(t?i.replace(/\t/g,t):i.replace(/\t|\n/g,""))+"\n}"}}class a{constructor(){this.initAdapter()}initAdapter(){this.adapter=["<Adapter",'\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','\txsi:noNamespaceSchemaLocation="https://ibis4example.ibissource.org/rest/ibisdoc/ibisdoc.xsd"','\tname="HelloWorld" ','\tdescription="Voorbeeld adapter">','\t<Receiver name="HelloWorld">','\t\t<ApiListener name="HelloWorld"','\t\t\turiPattern="helloworld/{inputString}"','\t\t\tmethod = "get"',"\t\t/>","\t</Receiver>",'\t<Pipeline firstPipe="SwitchInput">','\t\t<XmlSwitchPipe name="SwitchInput"','\t\t\tgetInputFromFixedValue="&lt;dummy/&gt;"','\t\t\txpathExpression="$input" x="436" y="131">','\t\t\t<Param name="input" sessionKey="inputString"></Param>',"\t\t</XmlSwitchPipe>\n\n","\t\t<FixedResultPipe",'\t\t\tname="NFHelloWorld"','\t\t\treturnString="Hallo Ricardo !"','\t\t \tx="863" y="228">','\t\t\t<Forward name="success" path="Exit"/>',"\t\t</FixedResultPipe>\n",'\t\t<Exit path="ServerError" state="error" code="500"/>','\t\t<Exit path="Exit" state="success" code="201"/>',"\t</Pipeline>","</Adapter>"]}}class o{constructor(e){this.editor=e}validateConfiguration(){return xmllint.validateXML({xml:this.editor.getValue().replace(/\sx=".*?"/g,"").replace(/\sy=".*?"/g,""),schema:localStorage.getItem("ibisdocXsd"),TOTAL_MEMORY:16777217})}decorateLine(e){this.decorations=this.editor.deltaDecorations([],[{range:new monaco.Range(e,1,e,1),options:{glyphMarginClassName:"myGlyphMarginClass"}}])}undoDecorations(){this.decorations=this.editor.deltaDecorations(this.editor.getModel().getAllDecorations(),[{range:new monaco.Range(1,1,1,1),options:{}}]),this.editor.getModel().setValue(this.editor.getModel().getValue())}}class r{constructor(e){this.codeView=e}initProvider(){this.schemaNode=this.stringToXml(localStorage.getItem("ibisdocXsd").replace(/xs\:/g,"")).childNodes[0],console.log(this.schemaNode,"hoi"),monaco.languages.registerCompletionItemProvider("xml",this.getXmlCompletionProvider(monaco))}stringToXml(e){var t;window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e));return t}getLastOpenedTag(e){var t=e.match(/<\/*(?=\S*)([a-zA-Z-]+)/g);if(t)for(var n=[],i=t.length-1;i>=0;i--)if(0===t[i].indexOf("</"))n.push(t[i].substring("</".length));else{var a=e.lastIndexOf(t[i]),o=t[i].substring("<".length);if(-1===e.indexOf("/>",a)){if(!n.length||n[n.length-1]!==o)return{tagName:o,isAttributeSearch:(e=e.substring(a)).indexOf("<")>e.indexOf(">")};n.splice(n.length-1,1)}e=e.substring(0,a)}}getAreaInfo(e){var t=['"',"'","\x3c!--","<![CDATA["],n=!0;e=e.replace(/"([^"\\]*(\\.[^"\\]*)*)"|\'([^\'\\]*(\\.[^\'\\]*)*)\'|<!--([\s\S])*?-->|<!\[CDATA\[(.*?)\]\]>/g,"");for(var i=0;i<t.length;i++){var a=e.indexOf(t[i]);a>-1&&(e=e.substring(0,a),n=!1)}return console.log("completion available: ",n,e),{isCompletionAvailable:n,clearedText:e}}shouldSkipLevel(e){return"complexType"===e||"all"===e||"sequence"===e}findElements(e,t){for(var n=0;n<e.length;n++)if("annotation"!==e[n].tagName&&"attribute"!==e[n].tagName)if(this.shouldSkipLevel(e[n].tagName)){var i=this.findElements(e[n].children,t);if(i)return i}else{if(!t)return e;if(this.getElementAttributes(e[n]).name===t)return e[n]}}findAttributes(e){for(var t=[],n=0;n<e.length;n++)if("complexType"===e[n].tagName){var i=this.findAttributes(e[n].children);if(i)return i}else"attribute"===e[n].tagName&&t.push(e[n]);return t}getElementAttributes(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;return t}getItemDocumentation(e){for(var t=0;t<e.children.length;t++){if("annotation"===e.children[t].tagName)return this.getItemDocumentation(e.children[0]);if("documentation"===e.children[t].tagName)return e.children[t].textContent}}isItemAvailable(e,t,n){if((t=t||"1")&&"unbounded"===t)return!0;for(var i=0,a=0;a<n.length;a++)n[a]===e&&i++;return 0===i||parseInt(t)>i}getAvailableElements(e,t,n){for(var i,a=[],o=0;o<t.length;o++)"annotation"!==t[o].tagName&&(i=this.findElements([t[o]]));if(!i)return[];for(o=0;o<i.length;o++){let t=this.getElementAttributes(i[o]);this.isItemAvailable(t.name,t.maxOccurs,n)&&a.push({label:t.name,kind:e.languages.CompletionItemKind.Field,detail:t.type,documentation:this.getItemDocumentation(i[o])})}return a}getAvailableAttribute(e,t,n){for(var i,a=[],o=0;o<t.length;o++)"annotation"!==t[o].tagName&&(i=this.findAttributes([t[o]]));if(!i)return[];for(o=0;o<i.length;o++){var r=this.getElementAttributes(i[o]);this.isItemAvailable(r.name,r.maxOccurs,n)&&a.push({label:r.name,kind:e.languages.CompletionItemKind.Property,detail:r.type,documentation:this.getItemDocumentation(i[o])})}return a}getXmlCompletionProvider(e){let t=this;return{triggerCharacters:["<"],provideCompletionItems:function(n,i){var a=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:i.lineNumber,endColumn:i.column}),o=t.getAreaInfo(a);if(console.log("position: ",o),!o.isCompletionAvailable)return[];var r=t.getLastOpenedTag(o.clearedText);console.log("last opened tag: ",r);var s=[],l=[],c=r&&r.isAttributeSearch;if(r){var d=t.stringToXml(n.getValue()),g=d.lastElementChild;for(console.log(d);g;){if(s.push(g.tagName),g.tagName===r.tagName){if(r.isAttributeSearch)for(var p=g.attributes,u=0;u<p.length;u++)l.push(p[u].nodeName);else{var h=g.children;for(u=0;u<h.length;u++)l.push(h[u].tagName)}break}g=g.lastElementChild}}var m=this.schemaNode;for(u=0;u<s.length;u++)m&&(m=t.findElements(m.children,s[u]));return c?m?t.getAvailableAttribute(e,m.children,l):[]:m?t.getAvailableElements(e,m.children,l):[]}}}}class s{constructor(){this.listeners=[],this.ibisdocJson=null,this.decorations=null,this.decorations=null,this.validateConfigurationView,this.CodeCompletionView=new r(this)}addListener(e){this.listeners.push(e)}notifyListeners(e){this.listeners.forEach(t=>t.notify(e))}makeEditor(e){this.editor=monaco.editor.create(document.getElementById("monacoContainer"),{value:e,language:"xml",theme:"vs-dark",glyphMargin:!0,automaticLayout:!0}),this.selectPipe("SwitchInput"),this.validateConfigurationView=new o(this.editor)}edit(e,t){this.editor.executeEdits("monacoContainer",[{range:e,text:t}])}addOptions(e){let t,n,i=$("#adapterSelect");e.forEach((function(e,a){n=e.match(/<Configuration[^]*?name=".*?"/g),null!=n&&(n=n[0].match(/".*?"/g)[0].replace(/"/g,""),t=$("<option></option>").attr("value",a).text(n),$(i).append(t))})),this.editor.setValue(localStorage.getItem("0"))}selectPipe(e){let t=this,n=null;if(this.editor.getModel().findMatches('<[\\S]*?[^"/][pP]ipe[\\s\\t\\n][^]*?>[^]*?<[/][\\S]*?[^"/]Pipe>',!1,!0,!1,!1).forEach((function(i,a){null!==t.editor.getModel().getValueInRange(i.range).match('name="'+e+'"',"g")&&(n=i.range)})),null==n)return n;this.decorations=this.editor.deltaDecorations([],[{range:n,options:{inlineClassName:"myContentClass"}}])}changeName(e,t){this.changeNameCode('<[\\S]*?[^"/][pP]ipe(\\n\\t*)?\\s?name="\\w*"',e,t)&&this.changeNameCode('<forward(\\n\\t*)?(\\s\\w*="(\\s?\\S)*"(\\n\\t*)?)*\\/>',e,t)}changePossition(e,t,n){let i=this;this.editor.getModel().findMatches('<[\\S]*?[^"/][pP]ipe[\\s\\t\\n][^]*?>',!1,!0,!1,!1).forEach((function(a,o){let r=i.editor.getModel().getValueInRange(a.range);if(r.split('"').find(t=>t===e)){if(r.split(/[\s=]/).find(e=>"x"==e))r=r.replace(new RegExp('x="[0-9]*"',"g"),'x="'+t+'"'),r=r.replace(new RegExp('y="[0-9]*"',"g"),'y="'+n+'"');else{let e=' x="'+t+'" y="'+n+'"';r=-1!=r.indexOf("/>")?r.slice(0,r.indexOf("/"))+e+r.slice(r.indexOf("/")):r.slice(0,r.indexOf(">"))+e+r.slice(r.indexOf(">"))}i.edit(a.range,r)}}))}changeExitPossition(e,t,n){let i=this,a=($("#canvas").text().match(/Adapter:\s.*?\s/g)[0].replace(/Adapter:\s/g,"").replace(" ",""),'<Adapter name="'+localStorage.getItem("currentAdapter")+'"[\\s\\S\\n]*?<Exit [^]*?\\/>');this.editor.getModel().findMatches(a,!1,!0,!1,!1).forEach((function(a,o){let r=i.editor.getModel().getValueInRange(a.range);if(r=r.match("<Exit [^]*?\\/>")[0],-1!=r.indexOf('path="'+e+'"')){if(-1!=r.indexOf('x="'))r="\t\t"+r.replace(/x="[0-9]*?"/g,'x="'+t+'"').replace(/y="[0-9]*?"/g,'y="'+n+'"');else{let e=' x="'+t+'" y="'+n+'"';r="\t\t"+r.slice(0,r.indexOf("/"))+e+r.slice(r.indexOf("/"))}a.range.startLineNumber=a.range.endLineNumber,i.edit(a.range,r)}}))}changeNameCode(e,t,n){let i=this,a=this.editor,o=!1,r=e;return a.getModel().findMatches(r,!1,!0,!1,!1).forEach((function(e,r){let s=a.getModel().getValueInRange(e.range);if(s.split('"').find(e=>e===t)){let a=s.replace(new RegExp(t,"g"),n);o=!0,i.edit(e.range,a)}})),o}changeAddForward(e,t){let n=this;this.editor.getModel().findMatches('<[\\S]*?[^"/][pP]ipe[\\s\\t\\n][^]*?>[^]*?<[/][\\S]*?[^"/]Pipe>',!1,!0,!1,!1).forEach((function(i,a){let o=n.editor.getModel().getValueInRange(i.range);if(o.split(/[\s>]/).find(t=>t==='name="'+e+'"')){o=o.slice(0,o.search(/<[/][\S]*?[^"/]Pipe/))+'\t<Forward name="success" path="'+t+'"/>';let e={endColumn:1,endLineNumber:i.range.endLineNumber,startColumn:1,startLineNumber:i.range.endLineNumber};n.edit(e,"\n"),n.edit(i.range,o)}}))}deleteForward(e,t){let n=this;this.editor.getModel().findMatches('<[\\S]*?[^"/][pP]ipe[\\s\\t\\n][^]*?>[^]*?<[/][\\S]*?[^"/]Pipe>',!1,!0,!1,!1).forEach((function(i,a){let o=n.editor.getModel().getValueInRange(i.range);if(o.split(/[\s>]/).find(t=>t==='name="'+e+'"')){t="exit"==t.toLowerCase()?"Exit":t;let e=o.replace(new RegExp('<Forward[^/]*?path="'+t+'"[^]*?/>',"gi"),"");n.edit(i.range,e)}}))}changeAddPipe(e,t,n="customPipe"){let i=this,a=($("#canvas").text().match(/Adapter:\s.*?\s/g)[0].replace(/Adapter:\s/g,"").replace(" ",""),'<Adapter name="'+localStorage.getItem("currentAdapter")+'"[\\s\\S\\n]*?<Exit');this.editor.getModel().getValue().match(a);this.editor.getModel().findMatches(a,!1,!0,!1,!1).some((function(a,o){let r=a.range;r.startColumn=1,r.endColumn=1,r.startLineNumber=r.endLineNumber,i.edit(r,"\n");let s="\t\t\t<"+n+' name="'+e+'" x="'+t.x+'" y="'+t.y+'">\n\n\t\t\t</'+n+">\n";return i.edit(r,s),!0}))}getTypes(){let e,t={},n=this.editor.getValue(),i=n.split(/[<>]/),a=null,o=n.match(/<Receiver[^]*?name=".*?"[^]*?>/g);return o=null!=o?o[0].match(/".*?"/g)[0].replace(/"/g,""):"NO_RECEIVER_FOUND",t['"receiver" '+o]="Receiver",i.forEach((function(n,i){if(n.search(/[^/][\S]*?[^"/]Pipe[^]*?name=".*?"/)>-1&&"/"!=n.charAt(0)){let i=n.slice(n.search(/[^/][\S]*?[^"/]Pipe[^]*?name=".*?"/));null!=i.match(/name=".*?"/)&&(e=i.match(/name=".*?"/)[0].match(/".*?"/)[0].replace(/"/g,"")),null!=i.match(/[^]*?Pipe/)&&(a=i.match(/[^]*?Pipe/)[0]),null!==a&&null!==e&&(t[e]=a)}})),t}}class l{constructor(){}toBeautifulSyntax(e){let t,n=e.match(/<pipe(\n\t*)?(\s\w*="(\s?\S)*"(\n\t*)?)*>[^]*?<\/pipe>/g),i=e;if(null!=n)return n.forEach((function(e,t){let n=e,a="",o=n.match(/className=".*?"/)[0].match(/\.[^.]*?"/)[0].replace(/[".]/g,"");null==o.match(/.*?Pipe/)&&(o+="Pipe"),a=n.replace(/className=".*?"/g,""),a=a.replace(/<pipe/g,"<"+o).replace(/<\/pipe>/,"</"+o+">"),i=i.replace(n,a)})),i=i.replace(/<listener[^]*?className=".*?"[^]*?\/>/g,(function(e){let t=e.match(/className=".*?"/)[0].match(/\.[^.]*?"/)[0].replace(/[".]/g,"");return e="<"+(e=e.replace(/className=".*?"/g,"")).replace(/<.*? /g,t+" ")})).replace(/<[\/]?[a-zA-Z]/g,(function(e){return e.toUpperCase()})),t=i.match(/<Exits>[^]*?<\/Exits>/)[0].replace(/<\/?Exits>/g,"").replace(/\t/,""),i=i.replace(/<Exits>[^]*?<\/Exits>/g,"").replace(/<\/Pipeline>/g,t+"\n \t\t</Pipeline>").replace(/className=".*?"/g,""),i}}class c{constructor(e){this.mainController=e,this.codeModel=new a,this.codeView=new s,this.codeView.addListener(this),this.toBeautiful=new l,this.notify({type:"getData"}),this.notify({type:"setEditor"}),this.editor=this.codeView.editor,this.initListeners()}notify(e){switch(e.type){case"getData":this.getXsd(),this.getCode(),this.getConfigurations();break;case"setEditor":this.codeView.makeEditor()}}initListeners(){let e=this;$("#adapterSelect").on("change",(function(t){let n=$("#adapterSelect").val();e.editor.getModel().setValue(localStorage.getItem(n))})),$("#adapterSelect").on("click",(function(t){let n=$("#adapterSelect").val();localStorage.setItem(n,e.editor.getModel().getValue())})),$("#beautify").click((function(){let t=beautify.xml(e.editor.getValue(),4);e.editor.getModel().setValue(t)})),e.editor.onMouseDown((function(t){t.target.range.startLineNumber=1,t.target.range.startColumn=1;let n=e.editor.getModel().getValueInRange(t.target.range).match(/<Adapter[^]*?name=".*?">/g);if(null!=n){let t=n[n.length-1].match(/name="[^]*?"/g)[0].match(/"[^]*?"/g)[0].replace(/"/g,"");localStorage.setItem("currentAdapter",t),e.mainController.generateFlow()}})),this.editor.getModel().onDidChangeContent((function(t){if(!e.mainController.flowController.flowView.moving&&!e.mainController.flowController.flowView.adding)try{$("#canvas").css("display","block"),$(".customErrorMessage").remove(),e.mainController.generateFlow()}catch(t){console.log("error",t),e.mainController.flowController.flowView.modifyFlow("error",t)}})),$("#runXsd").click((function(){let t=e.validateConfiguration(),n=0;e.undoDecorations(),null!==t.errors&&(console.log(t.errors),t.errors.forEach((function(t,i){n=t.match(/:.*?:/)[0].replace(/:/g,""),e.decorateLine(n)})))}))}selectPipe(e){this.codeView.selectPipe(e)}getTypes(){return this.codeView.getTypes()}validateConfiguration(){return this.codeView.validateConfigurationView.validateConfiguration()}decorateLine(e){this.codeView.validateConfigurationView.decorateLine(e)}undoDecorations(){this.codeView.validateConfigurationView.undoDecorations()}changeName(e,t){this.codeView.changeName(e,t)}changePossition(e,t,n){this.codeView.changePossition(e,t,n)}changeExitPossition(e,t,n){this.codeView.changeExitPossition(e,t,n)}changeAddForward(e,t){this.codeView.changeAddForward(e,t)}deleteForward(e,t){this.codeView.deleteForward(e,t)}changeAddPipe(e,t,n){this.codeView.changeAddPipe(e,t,n)}getPipes(){return this.codeView.ibisdocJson}getCode(){let e=this;fetch("../rest/ibisdoc/ibisdoc.json",{method:"GET"}).then(e=>e.json()).then(t=>{e.codeView.ibisdocJson=t,e.mainController.setPipes(t)}).catch(e=>{console.log(e)})}getXsd(){fetch("../rest/ibisdoc/ibisdoc.xsd",{method:"GET"}).then(e=>e.text()).then(e=>{localStorage.setItem("ibisdocXsd",e),console.log("xsd is loaded!, here")}).catch(e=>{console.log("not loaded xsd",e)})}getConfigurations(){let e=this;fetch("../iaf/api/configurations",{method:"GET"}).then(e=>e.text()).then(e=>{let t=[];return e.match(/<[cC]onfiguration[^]*?>[^]*?<\/[cC]onfiguration>/g).forEach((function(e,n){t.push(e)})),t}).then(t=>(t.forEach((function(n,i){null==n.match(/<Configuration/g)?(t[i]=e.toBeautiful.toBeautifulSyntax(n),localStorage.setItem(i,e.toBeautiful.toBeautifulSyntax(n))):localStorage.setItem(i,n)})),t)).then(t=>{e.codeView.addOptions(t)}).catch(e=>{console.log("couldnt load configurations",e)})}}class d{constructor(){}addDescription(e,t,n){let i=$("#canvas"),a=$("<div></div>").addClass("description").attr("id","description"+n),o=$("<p></p>").text(e);a.append(o),console.log("desc Text:"+e,t),t.x=parseInt(t.x)+300,$(a).css("left",t.x+"px"),$(a).css("top",t.y+"px"),i.append(a)}}class g{constructor(e){this.flowView=e,this.descriptionView=new d}addPipe(e,t,n,i,a){let o=this.flowView,r=o.windows+=1,s=$("#canvas"),l=$("<div></div>").addClass("window sourceWindow").attr("id","sourceWindow"+r),c=$("<strong></strong>").attr("id","strong").text(o.getTypes()[e]),d=$("<div></div>").addClass("typeWindow").append(this.getTypeImage(e),c),g=$("<div></div>").addClass("bottomContainer"),p=$("<strong></strong>").attr("id","strong").text(e),u=$("<hr>"),h=$("<strong></strong>").attr("id","strong").text(n);return i?g.append(p,h):g.append(p,u,h),l.append(d,g),null!=t&&($(l).css("left",t.x+"px"),$(l).css("top",t.y+"px"),a&&this.descriptionView.addDescription(a,t,r)),i&&$(l).addClass("exit"),instance.makeSource(l,{filter:".enableDisableSource",filterExclude:!0,maxConnections:-1,endpoint:["Dot",{radius:7,cssClass:"small-blue"}],anchor:o.sourceAnchors,connector:[o.connectorType,{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0,midpoint:1e-4}]}),instance.makeTarget(l,{dropOptions:{hoverClass:"hover"},anchor:["Left","Top","Right"],endpoint:["Dot",{radius:11,cssClass:"large-green"}]}),s.append(l),a&&instance.connect({source:"sourceWindow"+r,target:"description"+r}),e}getTypeImage(e,t){let n,i,a=this.flowView.getTypes(),o=new Image;if(i=t?"media/"+e+".png":"media/"+a[e]+".png",null!=i)return n=$("<img></img>").attr({src:i,alt:a[e],title:a[e]}).addClass("typeImg"),o.src=i,o.onerror=function(){n.attr("src","media/basicPipe.png")},n}}class p{constructor(e){this.flowView=e,this.pipeView=new g(e)}addPipe(e="pipe"+this.flowView.windows,t,n="",i,a){return this.pipeView.addPipe(e,t,n,i,a)}generateFlow(e,t){this.flowView.resetWindows();let n=null,i=e;if(null!=i&&null!=i.Adapter&&null!=i.Adapter.Pipeline){if(instance.reset(),$("#canvas").empty(),null!=i.Adapter.Pipeline.pipe){$("#canvas").text("Adapter: "+i.Adapter["@name"]+" ");let e=i.Adapter.Pipeline.pipe,t=[];if(Array.isArray(e))for(let i in e){let a=e[i]["@name"],o=e[i]["@x"],r=e[i]["@y"],s="",l=null;if(n=this.checkPossitions(o,r),null!=e[i]["@xpathExpression"]?s=e[i]["@xpathExpression"].slice(0,15)+"...":null!=e[i].FixedQuerySender&&null!=e[i].FixedQuerySender["@query"]&&(s=e[i].FixedQuerySender["@query"].slice(0,15)+"..."),null!=e[i].description&&(console.log(e[i].description),l=e[i].description),this.addPipe(a,n,s,null,l),null!=e[i].Forward){let n=null;Array.isArray(e[i].Forward)?e[i].Forward.forEach((function(e,i){n={sourcePipe:a,targetPipe:e["@path"],name:e["@name"]},t.push(n)})):(n={sourcePipe:a,targetPipe:e[i].Forward["@path"],name:e[i].Forward["@name"]},t.push(n))}else{let n=parseInt(i)+1;if(null!=e[n]){let i={sourcePipe:a,targetPipe:e[n]["@name"],name:"success"};t.push(i)}}}else{let n=e["@name"];if(this.addPipe(n),null!=e.Forward){let i=null;Array.isArray(e.Forward)?e.Forward.forEach((function(e,a){i={sourcePipe:n,targetPipe:e["@path"],name:e["@name"]},t.push(i)})):(i={sourcePipe:n,targetPipe:e.Forward["@path"],name:e.Forward["@name"]},t.push(i))}}if(this.addExits(i.Adapter.Pipeline.Exit),null===n?this.flowView.setOffsets(!1):this.flowView.setOffsets(!0),null!=i.Adapter.Receiver){let e=this.addReceiver(i,t[0].sourcePipe);t.push(e)}this.generateForwards(t)}}else this.flowView.displayError(i)}checkPossitions(e,t){return null==e&&null!=t?e=t:null==t&&null!=e&&(t=e),null!=e&&null!=t?{x:e,y:t}:null}addReceiver(e,t){return this.addPipe("(receiver): "+e.Adapter.Receiver["@name"],{x:"600",y:"400"}),{sourcePipe:"(receiver): "+e.Adapter.Receiver["@name"],targetPipe:t,name:"request"}}addExits(e){let t,n,i,a,o=e;if(null!=o)if(Array.isArray(o)){let e=this;o.forEach((function(r,s){n=o[s]["@path"],a=o[s]["@x"],i=o[s]["@y"],null!=a&&null!=i&&(t={x:a,y:i}),e.addPipe(n,t,"",!0)}))}else n=o["@path"],a=o["@x"],i=o["@y"],null!=a&&null!=i&&(t={x:a,y:i}),this.addPipe(n,t,"",!0)}generateForwards(e){let t=!0,n=this;instance.bind("connection",(function(e,i){let a=0;instance.getAllConnections().forEach((function(t){t.sourceId==e.connection.sourceId&&t.targetId==e.connection.targetId&&a<2&&a++}));let o=e.sourceEndpoint.element.lastChild.firstElementChild.textContent,r=e.targetEndpoint.element.lastChild.firstElementChild.textContent;e.connection.bind("dblclick",(function(e){instance.deleteConnection(e),n.flowView.modifyFlow("delete",{name:o,target:r})})),a>1?instance.getAllConnections().some((function(t){if(t.sourceId==e.connection.sourceId&&t.targetId==e.connection.targetId)return instance.deleteConnection(t),!0})):t||n.flowView.modifyFlow("connection",{source:o,target:r})}));let i="",a="";t=!0,$(e).each((function(e,t){i="",a="",null==t.targetPipe&&(t.targetPipe=t.name),$(".sourceWindow").each((function(e,n){var o=$(n)[0];let r=o.lastChild.firstChild.innerHTML;r==t.sourcePipe?i=$(o).attr("id"):r==t.targetPipe&&(a=$(o).attr("id"))}));let n={stroke:"#000000",strokeWidth:3};"failure"==t.name||"exception"==t.name?n.stroke="#FF0000":"success"==t.name?n.stroke="#22bb33":"request"!=t.name&&"response"!=t.name||(n.dashstyle="2 4"),""!=i&&""!=a&&instance.connect({source:i,target:a,paintStyle:n,overlays:[["Label",{label:t.name,id:"label",location:.1,padding:100}]],connector:[this.connectorType,{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0,midpoint:1e-4}]})})),t=!1}}class u{constructor(){this.transformedXml=null,this.types=[],this.listeners=[],this.windows=0,this.moving=!1,this.adding=!1,this.connectorType="Flowchart",this.horizontalBuild=!1,this.flowGenerator=new p(this),this.getInstance()}addListener(e){this.listeners.push(e)}notifyListeners(e){this.listeners.forEach(t=>t.notify(e))}getImage(){var e=document.getElementById("canvas");domtoimage.toSvg(e).then((function(e){var t=document.createElement("a");t.download="lol.svg",t.href=e,t.click()})).catch((function(e){console.error("oops, something went wrong!",e)}))}resetWindows(){this.windows=0}getInstance(){this.sourceAnchors=["Top","Right","Left",[.25,1,0,1],[.5,1,0,1],[.75,1,0,1],[1,1,0,1]],this.instance=window.instance=jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},PaintStyle:{stroke:"#000000",strokeWidth:3},ConnectionOverlays:[["Arrow",{location:1,visible:!0,id:"ARROW",zIndex:1e3}]],Container:"canvas"});this.instance.registerConnectionType("basic",{connector:["StateMachine",{stub:[40,60],gap:10,cornerRadius:5,alwaysRespectStubs:!0}]})}modifyFlow(e,t){switch(e){case"generate":this.generateFlow();break;case"add":this.notifyListeners(this.addCustomPipe(t.name,t.className));break;case"edit":this.notifyListeners(this.editTitle(t));break;case"connection":this.adding=!0,t.type="changeAddForward",this.notifyListeners(t),this.adding=!1;break;case"drag":(t=this.cleanPossitions(t)).type="drag",this.notifyListeners(t);break;case"dragExit":(t=this.cleanPossitions(t)).type="dragExit",this.notifyListeners(t);break;case"delete":t.type="delete",this.notifyListeners(t);break;case"error":this.displayError(t)}}cleanPossitions(e){return e.x=e.x.replace(/px/,""),e.y=e.y.replace(/px/,""),e}editTitle(e){let t=e.innerHTML,n=prompt("What is the new Title?",t);return null!=n?(e.innerHTML=n,{oldTitle:t,newTitle:n}):null}addCustomPipe(e,t){return{type:"changeAddPipe",name:this.addPipe(e,{x:100,y:100}),possitions:{x:100,y:100},className:t}}toggleConnectorType(e){"Flowchart"===e.connectorType?e.connectorType="StateMachine":e.connectorType="Flowchart",e.generateFlow()}addPipe(e,t,n,i){return this.flowGenerator.addPipe(e,t,n,i)}getTypes(){return this.notifyListeners({type:"getTypes"}),this.types}setOffsets(e){let t=0;this.moving=!0;for(let n=1;n<=this.windows;n++){if(t+=250,!e){let e=$("#sourceWindow"+n);this.horizontalBuild?(e.css("top","100px"),e.css("left",t+"px")):e.css("top",t+"px"),this.modifyFlow("drag",{name:e[0].lastChild.firstElementChild.textContent,x:e.css("left"),y:e.css("top")})}let i,a;this.horizontalBuild?(i=t+(64*n-1e3),a=parseInt($("#canvas").css("width").replace("px","")),i>a&&$("#canvas").css("width",i)):(i=t+(64*n-1450),a=parseInt($("#canvas").css("height").replace("px","")),i>a&&$("#canvas").css("height",i))}this.moving=!1}generateFlow(){this.notifyListeners({type:"convertConfiguration"}),this.flowGenerator.generateFlow(this.transformedXml,this.windows)}displayError(e){instance.reset(),$("#canvas").empty(),$("#canvas").css("display","none"),$(".customErrorMessage").remove(),$("#flowContainer").append($("<h1></h1>").text("Error"+e).addClass("customErrorMessage"))}}class h{constructor(e){this.listeners=[],this.pipes=null,this.flowView=e.flowView}addListener(e){this.listeners.push(e)}notifyListeners(e){this.listeners.forEach(t=>t.notify(e))}generatePalettePipes(e){let t=new g(this.flowView),n=$("#palette");e.forEach((function(e,i){$("<strong></strong>").text(e.name);let a,o=$("<button></button>").attr("type","button").addClass("collapsible listItem"),r=$("<div></div>").addClass("content"),s=$("<span></span>").addClass("buttonText").text(e.name);a=t.getTypeImage(e.name,!0).attr("id",e.name),o.append(s),r.append(a),n.append(o,r)})),this.setHandlers()}setHandlers(){let e=this;var t,n=document.getElementsByClassName("collapsible");for(t=0;t<n.length;t++)n[t].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}));$("#canvas").on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})),$("#canvas").on("drop",(function(t){t.preventDefault(),t.stopPropagation();let n=localStorage.getItem("dropPipe");e.flowView.modifyFlow("add",{name:"new"+n,className:n})})),$(".typeImg").on("dragstart",(function(e){console.log("drag"),localStorage.setItem("dropPipe",e.target.id)}))}}class m{constructor(e){this.mainController=e,this.flowView=new u,this.flowView.addListener(this),this.paletteView=new h(this),this.paletteView.addListener(this),this.notify({type:"getPipes"}),this.hoverSourceWindow=!1,this.initHandlers()}notify(e){if(null!=e)switch(e.type){case"convertConfiguration":this.flowView.transformedXml=this.mainController.convertConfiguration();break;case"getTypes":this.flowView.types=this.mainController.modifyCode("getTypes");break;case"changeName":this.mainController.modifyCode("changeName",e);break;case"changeAddPipe":this.mainController.modifyCode("changeAddPipe",e);break;case"changeAddForward":this.mainController.modifyCode("changeAddForward",e);break;case"drag":this.mainController.modifyCode("changePossition",e);break;case"dragExit":this.mainController.modifyCode("changeExitPossition",e);break;case"delete":this.mainController.modifyCode("deleteForward",e)}}initHandlers(){let e=this;$("#addPipe").click((function(){e.flowView.modifyFlow("add",{name:"newPipe",className:"customPipe"})})),$("#downloadLink").click((function(){e.flowView.getImage()})),$("#setData").click((function(){e.flowView.generateFlow(e.flowView)})),$("#lineChanges").click((function(){e.flowView.toggleConnectorType(e.flowView)})),$("#toggleH").click((function(){e.flowView.horizontalBuild?(e.flowView.horizontalBuild=!1,$("#toggleH").removeClass("selectedItem")):(e.flowView.horizontalBuild=!0,$("#toggleH").addClass("selectedItem")),e.flowView.generateFlow(e.flowView)})),$("#canvas").on("dblclick","#strong",(function(t){t.stopPropagation(),console.log("dblclick!"),"EXIT"!==this.innerHTML&&e.flowView.modifyFlow("edit",this)})),jsPlumb.on($("#canvas"),"mouseover",".sourceWindow",(function(){t.panzoom("disable")})),jsPlumb.on($("#canvas"),"mouseout",".sourceWindow",(function(){t.panzoom("enable"),$("#flowContainer").attr("style","")})),$("#canvas").on("click",".sourceWindow",(function(t){t.preventDefault(),e.mainController.modifyCode("undoDecorations"),e.mainController.modifyCode("selectPipe",{name:this.lastElementChild.firstElementChild.innerHTML})})),jsPlumb.on($("#canvas"),"mouseover",".bottomContainer",(function(){let t=this.parentElement,n={disabled:!1,containment:"#canvas",drag:function(){e.flowView.moving=!0;let n={x:$(t).css("left"),y:$(t).css("top"),name:t.lastElementChild.firstElementChild.innerHTML};$(t).hasClass("exit")?e.flowView.modifyFlow("dragExit",n):e.flowView.modifyFlow("drag",n)},stop:function(t,n){e.flowView.moving=!1}};instance.draggable(t,n),instance.isSourceEnabled(t)&&instance.toggleSourceEnabled(t),$(this).addClass("element-disabled")})),jsPlumb.on($("#canvas"),"mouseout",".bottomContainer",(function(){let e=this.parentElement;instance.draggable(e,{disabled:!0}),instance.isSourceEnabled(e)||instance.toggleSourceEnabled(e),$(this).removeClass("element-disabled")}));$("#flowContainer").innerWidth(),$("#flowContainer").innerHeight();let t=$("#canvas").panzoom({minScale:.5,increment:.2});t.on("panzoomend",(function(e){var n=parseInt($("#canvas").css("transform").split(",")[5]),i=parseInt($("#canvas").css("transform").split(",")[4]);i>=0&&t.panzoom("pan",0,n),n<=1e3-Math.abs($("#canvas").css("height").replace("px",""))&&t.panzoom("pan",i,1e3-Math.abs($("#canvas").css("height").replace("px",""))),i<=-1540&&t.panzoom("pan",-1540,n),n>=0&&t.panzoom("pan",i,0),$("#flowContainer").attr("style","")})),t.parent().on("mousewheel.focal",(function(e){if(e.shiftKey){e.preventDefault();var n=e.delta||e.originalEvent.wheelDelta,i=n?n<0:e.originalEvent.deltaY>0;t.panzoom("zoom",i,{increment:.1,focal:e})}}))}}new class{constructor(){this.configurationConverter=new i,this.codeController=new c(this),this.flowController=new m(this)}convertConfiguration(){return this.configurationConverter.convertConfiguration(this.codeController.codeView.editor)}generateFlow(){this.flowController.flowView.modifyFlow("generate")}setPipes(e){this.flowController.paletteView.generatePalettePipes(e[2].classes)}modifyCode(e,t){let n=this.codeController;switch(e){case"getTypes":return n.getTypes();case"validateConfiguration":return n.validateConfiguration();case"decorateLine":n.decorateLine(t.line);break;case"undoDecorations":n.undoDecorations();break;case"changeName":n.changeName(t.oldTitle,t.newTitle);break;case"changePossition":n.changePossition(t.name,t.x,t.y);break;case"changeExitPossition":n.changeExitPossition(t.name,t.x,t.y);break;case"changeAddForward":n.changeAddForward(t.source,t.target);break;case"deleteForward":n.deleteForward(t.name,t.target);break;case"changeAddPipe":n.changeAddPipe(t.name,t.possitions,t.className);break;case"selectPipe":n.selectPipe(t.name)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXBwL01vZGVsL0NvbmZpZ3VyYXRpb25Db252ZXJ0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL01vZGVsL0NvZGVNb2RlbC5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvVmlldy9jb2RlVmlldy9WYWxpZGF0ZUNvbmZpZ3VyYXRpb25WaWV3LmpzIiwid2VicGFjazovLy8uL2FwcC9WaWV3L2NvZGVWaWV3L0NvZGVDb21wbGV0aW9uVmlldy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvVmlldy9jb2RlVmlldy9Db2RlVmlldy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvVmlldy9jb2RlVmlldy9Ub0JlYXV0aWZ1bFN5bnRheC5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvQ29udHJvbGxlci9Db2RlQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvVmlldy9mbG93Vmlldy9EZXNjcmlwdGlvblZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL1ZpZXcvZmxvd1ZpZXcvUGlwZVZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL1ZpZXcvZmxvd1ZpZXcvRmxvd0dlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvVmlldy9mbG93Vmlldy9GbG93Vmlldy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvVmlldy9mbG93Vmlldy9QYWxldHRlVmlldy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvQ29udHJvbGxlci9GbG93Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvQ29udHJvbGxlci9NYWluQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNvbmZpZ3VyYXRpb25Db252ZXJ0ZXIiLCJlZGl0b3IiLCJnZXRWYWx1ZSIsInJlcGxhY2UiLCJ4bWwiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJ0cmFuc2Zvcm1lZFhtbCIsIkpTT04iLCJwYXJzZSIsInRoaXMiLCJ4bWwyanNvbiIsIkNvbmZpZ3VyYXRpb24iLCJNb2R1bGUiLCJBZGFwdGVyIiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsIkFycmF5IiwiaXNBcnJheSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJ0YWIiLCJYIiwidG9PYmoiLCJub2RlVHlwZSIsImF0dHJpYnV0ZXMiLCJsZW5ndGgiLCJub2RlTmFtZSIsIm5vZGVWYWx1ZSIsInRvU3RyaW5nIiwiZmlyc3RDaGlsZCIsInRleHRDaGlsZCIsImNkYXRhQ2hpbGQiLCJoYXNFbGVtZW50Q2hpbGQiLCJuZXh0U2libGluZyIsIm1hdGNoIiwicmVtb3ZlV2hpdGUiLCJlc2NhcGUiLCJpbm5lclhtbCIsImRvY3VtZW50RWxlbWVudCIsInRvSnNvbiIsImluZCIsImpzb24iLCJqb2luIiwiYXJyIiwibm9kZSIsImlubmVySFRNTCIsImFzWG1sIiwidHh0IiwiZSIsIm5vcm1hbGl6ZSIsIm54dCIsInJlbW92ZUNoaWxkIiwiQ29kZU1vZGVsIiwiaW5pdEFkYXB0ZXIiLCJhZGFwdGVyIiwiVmFsaWRhdGVDb25maWd1cmF0aW9uVmlldyIsInhtbGxpbnQiLCJ2YWxpZGF0ZVhNTCIsInNjaGVtYSIsIlRPVEFMX01FTU9SWSIsImxpbmVOdW1iZXIiLCJkZWNvcmF0aW9ucyIsImRlbHRhRGVjb3JhdGlvbnMiLCJyYW5nZSIsIm1vbmFjbyIsIlJhbmdlIiwib3B0aW9ucyIsImdseXBoTWFyZ2luQ2xhc3NOYW1lIiwiZ2V0TW9kZWwiLCJnZXRBbGxEZWNvcmF0aW9ucyIsInNldFZhbHVlIiwiQ29kZUNvbXBsZXRpb25WaWV3IiwiY29kZVZpZXciLCJzY2hlbWFOb2RlIiwic3RyaW5nVG9YbWwiLCJjaGlsZE5vZGVzIiwiY29uc29sZSIsImxvZyIsImxhbmd1YWdlcyIsInJlZ2lzdGVyQ29tcGxldGlvbkl0ZW1Qcm92aWRlciIsImdldFhtbENvbXBsZXRpb25Qcm92aWRlciIsInRleHQiLCJ4bWxEb2MiLCJ3aW5kb3ciLCJBY3RpdmVYT2JqZWN0IiwiYXN5bmMiLCJsb2FkWE1MIiwidGFncyIsImNsb3NpbmdUYWdzIiwiaW5kZXhPZiIsInB1c2giLCJzdWJzdHJpbmciLCJ0YWdQb3NpdGlvbiIsImxhc3RJbmRleE9mIiwidGFnIiwidGFnTmFtZSIsImlzQXR0cmlidXRlU2VhcmNoIiwic3BsaWNlIiwiaXRlbXMiLCJpc0NvbXBsZXRpb25BdmFpbGFibGUiLCJpdGVtSWR4IiwiY2xlYXJlZFRleHQiLCJlbGVtZW50cyIsImVsZW1lbnROYW1lIiwic2hvdWxkU2tpcExldmVsIiwiY2hpbGQiLCJmaW5kRWxlbWVudHMiLCJjaGlsZHJlbiIsImdldEVsZW1lbnRBdHRyaWJ1dGVzIiwiYXR0cnMiLCJmaW5kQXR0cmlidXRlcyIsImVsZW1lbnQiLCJnZXRJdGVtRG9jdW1lbnRhdGlvbiIsInRleHRDb250ZW50IiwiaXRlbU5hbWUiLCJtYXhPY2N1cnMiLCJjb3VudCIsInBhcnNlSW50IiwidXNlZEl0ZW1zIiwiYXZhaWxhYmxlSXRlbXMiLCJlbGVtZW50QXR0cnMiLCJpc0l0ZW1BdmFpbGFibGUiLCJsYWJlbCIsImtpbmQiLCJDb21wbGV0aW9uSXRlbUtpbmQiLCJGaWVsZCIsImRldGFpbCIsInR5cGUiLCJkb2N1bWVudGF0aW9uIiwidXNlZENoaWxkVGFncyIsIlByb3BlcnR5IiwiY3VyIiwidHJpZ2dlckNoYXJhY3RlcnMiLCJwcm92aWRlQ29tcGxldGlvbkl0ZW1zIiwibW9kZWwiLCJwb3NpdGlvbiIsInRleHRVbnRpbFBvc2l0aW9uIiwiZ2V0VmFsdWVJblJhbmdlIiwic3RhcnRMaW5lTnVtYmVyIiwic3RhcnRDb2x1bW4iLCJlbmRMaW5lTnVtYmVyIiwiZW5kQ29sdW1uIiwiY29sdW1uIiwiYXJlYVVudGlsUG9zaXRpb25JbmZvIiwiZ2V0QXJlYUluZm8iLCJsYXN0T3BlbmVkVGFnIiwiZ2V0TGFzdE9wZW5lZFRhZyIsIm9wZW5lZFRhZ3MiLCJsYXN0Q2hpbGQiLCJsYXN0RWxlbWVudENoaWxkIiwiY3VycmVudEl0ZW0iLCJnZXRBdmFpbGFibGVBdHRyaWJ1dGUiLCJnZXRBdmFpbGFibGVFbGVtZW50cyIsImxpc3RlbmVycyIsImliaXNkb2NKc29uIiwidmFsaWRhdGVDb25maWd1cmF0aW9uVmlldyIsImxpc3RlbmVyIiwiZGF0YSIsIm5vdGlmeSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJsYW5ndWFnZSIsInRoZW1lIiwiZ2x5cGhNYXJnaW4iLCJhdXRvbWF0aWNMYXlvdXQiLCJzZWxlY3RQaXBlIiwiZXhlY3V0ZUVkaXRzIiwiYWRhcHRlcnMiLCJvcHRpb24iLCJzZWxlY3QiLCIkIiwiYXR0ciIsImFwcGVuZCIsImZpbmRNYXRjaGVzIiwiaW5saW5lQ2xhc3NOYW1lIiwib2xkV29yZCIsIm5ld1dvcmQiLCJjaGFuZ2VOYW1lQ29kZSIsIm5ld1giLCJuZXdZIiwicGlwZSIsInNwbGl0IiwiZmluZCIsIndvcmQiLCJSZWdFeHAiLCJzdHIiLCJzbGljZSIsImVkaXQiLCJhdHRyaWJ1dGVPYmplY3RSZWdleCIsImV4aXQiLCJyZWciLCJjaGFuZ2VkIiwibmV3UGlwZSIsInBhdGgiLCJzZWFyY2giLCJuZXdMaW5lUmFuZ2UiLCJ0b0xvd2VyQ2FzZSIsInBvc3NpdGlvbnMiLCJjbGFzc05hbWUiLCJzb21lIiwieCIsInkiLCJ0eXBlcyIsIm9jY3VyZW5jZXMiLCJyZWNlaXZlciIsImNoYXJBdCIsIlRvQmVhdXRpZnVsU3ludGF4IiwiZXhpdHMiLCJtYXRjaGVzIiwiZG9jIiwib2xkUGlwZSIsInRvVXBwZXJDYXNlIiwibWFpbkNvbnRyb2xsZXIiLCJjb2RlTW9kZWwiLCJhZGRMaXN0ZW5lciIsInRvQmVhdXRpZnVsIiwiaW5pdExpc3RlbmVycyIsImdldFhzZCIsImdldENvZGUiLCJnZXRDb25maWd1cmF0aW9ucyIsIm1ha2VFZGl0b3IiLCJvbiIsInZhbCIsInNldEl0ZW0iLCJjbGljayIsInByZXR0eVhNTCIsImJlYXV0aWZ5Iiwib25Nb3VzZURvd24iLCJ0YXJnZXQiLCJhZGFwdGVyTmFtZSIsImdlbmVyYXRlRmxvdyIsIm9uRGlkQ2hhbmdlQ29udGVudCIsImZsb3dDb250cm9sbGVyIiwiZmxvd1ZpZXciLCJtb3ZpbmciLCJhZGRpbmciLCJjc3MiLCJyZW1vdmUiLCJlcnJvciIsIm1vZGlmeUZsb3ciLCJ2YWxpZGF0ZSIsInZhbGlkYXRlQ29uZmlndXJhdGlvbiIsInVuZG9EZWNvcmF0aW9ucyIsImVycm9ycyIsImRlY29yYXRlTGluZSIsImdldFR5cGVzIiwiY2hhbmdlTmFtZSIsImNoYW5nZVBvc3NpdGlvbiIsImNoYW5nZUV4aXRQb3NzaXRpb24iLCJjaGFuZ2VBZGRGb3J3YXJkIiwiZGVsZXRlRm9yd2FyZCIsImNoYW5nZUFkZFBpcGUiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXNwb25zZSIsInNldFBpcGVzIiwiY2F0Y2giLCJlcnIiLCJjb25maWd1cmF0aW9ucyIsInRvQmVhdXRpZnVsU3ludGF4IiwiYWRkT3B0aW9ucyIsIkRlc2NyaXB0aW9uVmlldyIsImlkIiwiY2FudmFzIiwiZWwiLCJhZGRDbGFzcyIsImRlc2NyaXB0aW9uVGV4dCIsImRlc2NyaXB0aW9uVmlldyIsImV4dHJhIiwiaXNFeGl0IiwiZGVzY1RleHQiLCJ3aW5kb3dzIiwidHlwZVRleHQiLCJ0eXBlV2luZG93IiwiZ2V0VHlwZUltYWdlIiwiYm90dG9tQ29udGFpbmVyIiwibmFtZVRleHQiLCJociIsImV4dHJhVGV4dCIsImFkZERlc2NyaXB0aW9uIiwiaW5zdGFuY2UiLCJtYWtlU291cmNlIiwiZmlsdGVyIiwiZmlsdGVyRXhjbHVkZSIsIm1heENvbm5lY3Rpb25zIiwiZW5kcG9pbnQiLCJyYWRpdXMiLCJjc3NDbGFzcyIsImFuY2hvciIsInNvdXJjZUFuY2hvcnMiLCJjb25uZWN0b3IiLCJjb25uZWN0b3JUeXBlIiwic3R1YiIsImdhcCIsImNvcm5lclJhZGl1cyIsImFsd2F5c1Jlc3BlY3RTdHVicyIsIm1pZHBvaW50IiwibWFrZVRhcmdldCIsImRyb3BPcHRpb25zIiwiaG92ZXJDbGFzcyIsImNvbm5lY3QiLCJzb3VyY2UiLCJwYWxldHRlSW1nIiwiaW1nIiwidXJsIiwidGVzdEltYWdlIiwiSW1hZ2UiLCJzcmMiLCJhbHQiLCJ0aXRsZSIsIm9uZXJyb3IiLCJwaXBlVmlldyIsImFkZFBpcGUiLCJyZXNldFdpbmRvd3MiLCJQaXBlbGluZSIsInJlc2V0IiwiZW1wdHkiLCJmb3J3YXJkcyIsInhwb3MiLCJ5cG9zIiwiY2hlY2tQb3NzaXRpb25zIiwiRml4ZWRRdWVyeVNlbmRlciIsImRlc2NyaXB0aW9uIiwiRm9yd2FyZCIsImZvcndhcmREYXRhIiwic291cmNlUGlwZSIsInRhcmdldFBpcGUiLCJuZXh0UGlwZSIsImFkZEV4aXRzIiwiRXhpdCIsInNldE9mZnNldHMiLCJSZWNlaXZlciIsImFkZFJlY2VpdmVyIiwiZ2VuZXJhdGVGb3J3YXJkcyIsImRpc3BsYXlFcnJvciIsImdlbmVyYXRlZCIsImNvdW50ZXIiLCJnZXRBbGxDb25uZWN0aW9ucyIsImNvbm4iLCJzb3VyY2VJZCIsImNvbm5lY3Rpb24iLCJ0YXJnZXRJZCIsInNvdXJjZUVuZHBvaW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJ0YXJnZXRFbmRwb2ludCIsImRlbGV0ZUNvbm5lY3Rpb24iLCJlYWNoIiwiZiIsIiRlbGVtZW50IiwicmVmYWN0b3JlZFRleHQiLCJwYWludFN0eWxlIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJkYXNoc3R5bGUiLCJvdmVybGF5cyIsImxvY2F0aW9uIiwicGFkZGluZyIsImhvcml6b250YWxCdWlsZCIsImZsb3dHZW5lcmF0b3IiLCJnZXRJbnN0YW5jZSIsImRvbXRvaW1hZ2UiLCJ0b1N2ZyIsImRhdGFVcmwiLCJsaW5rIiwiY3JlYXRlRWxlbWVudCIsImRvd25sb2FkIiwiaHJlZiIsImpzUGx1bWIiLCJEcmFnT3B0aW9ucyIsImN1cnNvciIsInpJbmRleCIsIlBhaW50U3R5bGUiLCJDb25uZWN0aW9uT3ZlcmxheXMiLCJ2aXNpYmxlIiwiQ29udGFpbmVyIiwicmVnaXN0ZXJDb25uZWN0aW9uVHlwZSIsImNoYW5nZSIsIm9iaiIsIm5vdGlmeUxpc3RlbmVycyIsImFkZEN1c3RvbVBpcGUiLCJlZGl0VGl0bGUiLCJjbGVhblBvc3NpdGlvbnMiLCJvbGRUaXRsZSIsIm5ld1RpdGxlIiwicHJvbXB0IiwiYm94T2Zmc2V0IiwiYm94IiwidG90YWxMZW5ndGgiLCJ3aW5kb3dMZW5ndGgiLCJwaXBlcyIsInBhbGV0dGUiLCJidXR0b24iLCJjb2xsYXBzQm94IiwiYnV0dG9uVGV4dCIsInNldEhhbmRsZXJzIiwiY29sbCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGVudCIsIm5leHRFbGVtZW50U2libGluZyIsInN0eWxlIiwiZGlzcGxheSIsImV2IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJwYWxldHRlVmlldyIsImhvdmVyU291cmNlV2luZG93IiwiaW5pdEhhbmRsZXJzIiwiY29udmVydENvbmZpZ3VyYXRpb24iLCJtb2RpZnlDb2RlIiwiZ2V0SW1hZ2UiLCJ0b2dnbGVDb25uZWN0b3JUeXBlIiwicmVtb3ZlQ2xhc3MiLCIkcGFuem9vbSIsInBhbnpvb20iLCJzb3VyY2VEaXYiLCJwYXJlbnRFbGVtZW50IiwiZHJhZ0RhdGEiLCJkaXNhYmxlZCIsImNvbnRhaW5tZW50IiwiZHJhZyIsImRyYWdPYmoiLCJoYXNDbGFzcyIsInN0b3AiLCJldmVudCIsInVpIiwiZHJhZ2dhYmxlIiwiaXNTb3VyY2VFbmFibGVkIiwidG9nZ2xlU291cmNlRW5hYmxlZCIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIm1pblNjYWxlIiwiaW5jcmVtZW50IiwiY3VycmVudF9wdWxsWSIsImN1cnJlbnRfcHVsbFgiLCJNYXRoIiwiYWJzIiwicGFyZW50Iiwic2hpZnRLZXkiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJ3aGVlbERlbHRhIiwiem9vbU91dCIsImRlbHRhWSIsImZvY2FsIiwiY29uZmlndXJhdGlvbkNvbnZlcnRlciIsImNvZGVDb250cm9sbGVyIiwiZ2VuZXJhdGVQYWxldHRlUGlwZXMiLCJjbGFzc2VzIiwibGluZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNE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TixFQUFldk0sY0FBY2dJLEVBQUlyWixLQUFNcVosRUFBSXRKLFFBQzNDLE1BQ0YsSUFBSyxnQkFDSDZOLEVBQWV0TSxjQUFjK0gsRUFBSXJaLEtBQU1xWixFQUFJckwsV0FBWXFMLEVBQUlwTCxXQUMzRCxNQUNGLElBQUssYUFDSDJQLEVBQWU1UixXQUFXcU4sRUFBSXJaIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDb25maWd1cmF0aW9uQ29udmVydGVyIHtcclxuXHJcbiAgLy8gYSBmdW5jdGlvbiB0aGF0IGNvbnZlcnRzIHRoZSB4bWwgdG8gYSByZWFkYWJsZSBqc29uIGZvcm1hdCBhbmQgdGhlbiBnZW5lcmF0ZXMgYSBmbG93XHJcbiAgY29udmVydENvbmZpZ3VyYXRpb24oZWRpdG9yKSB7XHJcbiAgICBsZXQgdmFsdWUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcclxuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvPFteXFwvXVtcXFNdKj9bXlwiXFwvXVBpcGUvZywgXCI8cGlwZVwiKTtcclxuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvPFtcXC9dW1xcU10qP1teXCJcXC9dUGlwZS9nLCBcIjwvcGlwZVwiKS5yZXBsYWNlKC8mL2csICcnKTtcclxuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvPCEtLVteXSo/LS0+L2csICcnKVxyXG4gICAgdmFyIGdldFhtbCA9IG5ldyBET01QYXJzZXIoKTtcclxuICAgIGxldCB4bWwgPSBnZXRYbWwucGFyc2VGcm9tU3RyaW5nKHZhbHVlLCBcInRleHQveG1sXCIpO1xyXG4gICAgbGV0IHRyYW5zZm9ybWVkWG1sID0gSlNPTi5wYXJzZSh0aGlzLnhtbDJqc29uKHhtbCkucmVwbGFjZSgndW5kZWZpbmVkJywgJycpKTtcclxuXHJcbiAgICBpZiAodHJhbnNmb3JtZWRYbWwuQ29uZmlndXJhdGlvbi5Nb2R1bGUgPT0gbnVsbCAmJiB0cmFuc2Zvcm1lZFhtbC5Db25maWd1cmF0aW9uLkFkYXB0ZXIgIT0gbnVsbCkge1xyXG4gICAgICB0cmFuc2Zvcm1lZFhtbC5BZGFwdGVyID0gdHJhbnNmb3JtZWRYbWwuQ29uZmlndXJhdGlvbi5BZGFwdGVyO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdHJhbnNmb3JtZWRYbWwuQ29uZmlndXJhdGlvbi5Nb2R1bGUuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0uQWRhcHRlcikpIHtcclxuICAgICAgICAgIGl0ZW0uQWRhcHRlci5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtW1wiQG5hbWVcIl0gIT0gbnVsbCAmJiBpdGVtW1wiQG5hbWVcIl0gPT0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50QWRhcHRlclwiKSkge1xyXG4gICAgICAgICAgICAgIHRyYW5zZm9ybWVkWG1sLkFkYXB0ZXIgPSBpdGVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoaXRlbS5BZGFwdGVyICE9IG51bGwgJiYgaXRlbS5BZGFwdGVyW1wiQG5hbWVcIl0gIT0gbnVsbCAmJiBpdGVtLkFkYXB0ZXJbXCJAbmFtZVwiXSA9PSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRBZGFwdGVyXCIpKSB7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkWG1sID0gaXRlbTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkWG1sO1xyXG4gIH1cclxuXHJcbiAgZG9tUGFyc2UoeG1sKSB7XHJcbiAgICB2YXIgZ2V0WG1sID0gbmV3IERPTVBhcnNlcigpO1xyXG4gICAgbGV0IGRvbVhtbCA9IGdldFhtbC5wYXJzZUZyb21TdHJpbmcoeG1sLCBcInRleHQveG1sXCIpO1xyXG4gICAgcmV0dXJuIGRvbVhtbDtcclxuICB9XHJcblxyXG4gIC8qXHRUaGlzIHdvcmsgaXMgbGljZW5zZWQgdW5kZXIgQ3JlYXRpdmUgQ29tbW9ucyBHTlUgTEdQTCBMaWNlbnNlLlxyXG5cclxuICBMaWNlbnNlOiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9MR1BMLzIuMS9cclxuICAgVmVyc2lvbjogMC45XHJcbiAgQXV0aG9yOiAgU3RlZmFuIEdvZXNzbmVyLzIwMDZcclxuICBXZWI6ICAgICBodHRwOi8vZ29lc3NuZXIubmV0L1xyXG4gICovXHJcbiAgeG1sMmpzb24oeG1sLCB0YWIpIHtcclxuICAgIHZhciBYID0ge1xyXG4gICAgICB0b09iajogZnVuY3Rpb24oeG1sKSB7XHJcbiAgICAgICAgdmFyIG8gPSB7fTtcclxuICAgICAgICBpZiAoeG1sLm5vZGVUeXBlID09IDEpIHsgLy8gZWxlbWVudCBub2RlIC4uXHJcbiAgICAgICAgICBpZiAoeG1sLmF0dHJpYnV0ZXMubGVuZ3RoKSAvLyBlbGVtZW50IHdpdGggYXR0cmlidXRlcyAgLi5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4bWwuYXR0cmlidXRlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICBvW1wiQFwiICsgeG1sLmF0dHJpYnV0ZXNbaV0ubm9kZU5hbWVdID0gKHhtbC5hdHRyaWJ1dGVzW2ldLm5vZGVWYWx1ZSB8fCBcIlwiKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgaWYgKHhtbC5maXJzdENoaWxkKSB7IC8vIGVsZW1lbnQgaGFzIGNoaWxkIG5vZGVzIC4uXHJcbiAgICAgICAgICAgIHZhciB0ZXh0Q2hpbGQgPSAwLFxyXG4gICAgICAgICAgICAgIGNkYXRhQ2hpbGQgPSAwLFxyXG4gICAgICAgICAgICAgIGhhc0VsZW1lbnRDaGlsZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBuID0geG1sLmZpcnN0Q2hpbGQ7IG47IG4gPSBuLm5leHRTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG4ubm9kZVR5cGUgPT0gMSkgaGFzRWxlbWVudENoaWxkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBlbHNlIGlmIChuLm5vZGVUeXBlID09IDMgJiYgbi5ub2RlVmFsdWUubWF0Y2goL1teIFxcZlxcblxcclxcdFxcdl0vKSkgdGV4dENoaWxkKys7IC8vIG5vbi13aGl0ZXNwYWNlIHRleHRcclxuICAgICAgICAgICAgICBlbHNlIGlmIChuLm5vZGVUeXBlID09IDQpIGNkYXRhQ2hpbGQrKzsgLy8gY2RhdGEgc2VjdGlvbiBub2RlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGhhc0VsZW1lbnRDaGlsZCkge1xyXG4gICAgICAgICAgICAgIGlmICh0ZXh0Q2hpbGQgPCAyICYmIGNkYXRhQ2hpbGQgPCAyKSB7IC8vIHN0cnVjdHVyZWQgZWxlbWVudCB3aXRoIGV2dGwuIGEgc2luZ2xlIHRleHQgb3IvYW5kIGNkYXRhIG5vZGUgLi5cclxuICAgICAgICAgICAgICAgIFgucmVtb3ZlV2hpdGUoeG1sKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB4bWwuZmlyc3RDaGlsZDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKG4ubm9kZVR5cGUgPT0gMykgLy8gdGV4dCBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgb1tcIiN0ZXh0XCJdID0gWC5lc2NhcGUobi5ub2RlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICBlbHNlIGlmIChuLm5vZGVUeXBlID09IDQpIC8vIGNkYXRhIG5vZGVcclxuICAgICAgICAgICAgICAgICAgICBvW1wiI2NkYXRhXCJdID0gWC5lc2NhcGUobi5ub2RlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICBlbHNlIGlmIChvW24ubm9kZU5hbWVdKSB7IC8vIG11bHRpcGxlIG9jY3VyZW5jZSBvZiBlbGVtZW50IC4uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9bbi5ub2RlTmFtZV0gaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgIG9bbi5ub2RlTmFtZV1bb1tuLm5vZGVOYW1lXS5sZW5ndGhdID0gWC50b09iaihuKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICBvW24ubm9kZU5hbWVdID0gW29bbi5ub2RlTmFtZV0sIFgudG9PYmoobildO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgLy8gZmlyc3Qgb2NjdXJlbmNlIG9mIGVsZW1lbnQuLlxyXG4gICAgICAgICAgICAgICAgICAgIG9bbi5ub2RlTmFtZV0gPSBYLnRvT2JqKG4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7IC8vIG1peGVkIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIGlmICgheG1sLmF0dHJpYnV0ZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICBvID0gWC5lc2NhcGUoWC5pbm5lclhtbCh4bWwpKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgb1tcIiN0ZXh0XCJdID0gWC5lc2NhcGUoWC5pbm5lclhtbCh4bWwpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGV4dENoaWxkKSB7IC8vIHB1cmUgdGV4dFxyXG4gICAgICAgICAgICAgIGlmICgheG1sLmF0dHJpYnV0ZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgbyA9IFguZXNjYXBlKFguaW5uZXJYbWwoeG1sKSk7XHJcbiAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgb1tcIiN0ZXh0XCJdID0gWC5lc2NhcGUoWC5pbm5lclhtbCh4bWwpKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjZGF0YUNoaWxkKSB7IC8vIGNkYXRhXHJcbiAgICAgICAgICAgICAgaWYgKGNkYXRhQ2hpbGQgPiAxKVxyXG4gICAgICAgICAgICAgICAgbyA9IFguZXNjYXBlKFguaW5uZXJYbWwoeG1sKSk7XHJcbiAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHhtbC5maXJzdENoaWxkOyBuOyBuID0gbi5uZXh0U2libGluZylcclxuICAgICAgICAgICAgICAgICAgb1tcIiNjZGF0YVwiXSA9IFguZXNjYXBlKG4ubm9kZVZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCF4bWwuYXR0cmlidXRlcy5sZW5ndGggJiYgIXhtbC5maXJzdENoaWxkKSBvID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKHhtbC5ub2RlVHlwZSA9PSA5KSB7IC8vIGRvY3VtZW50Lm5vZGVcclxuICAgICAgICAgIG8gPSBYLnRvT2JqKHhtbC5kb2N1bWVudEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbztcclxuICAgICAgfSxcclxuICAgICAgdG9Kc29uOiBmdW5jdGlvbihvLCBuYW1lLCBpbmQpIHtcclxuICAgICAgICB2YXIganNvbiA9IG5hbWUgPyAoXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiXCIpIDogXCJcIjtcclxuICAgICAgICBpZiAobyBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbiA9IG8ubGVuZ3RoOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICBvW2ldID0gWC50b0pzb24ob1tpXSwgXCJcIiwgaW5kICsgXCJcXHRcIik7XHJcbiAgICAgICAgICBqc29uICs9IChuYW1lID8gXCI6W1wiIDogXCJbXCIpICsgKG8ubGVuZ3RoID4gMSA/IChcIlxcblwiICsgaW5kICsgXCJcXHRcIiArIG8uam9pbihcIixcXG5cIiArIGluZCArIFwiXFx0XCIpICsgXCJcXG5cIiArIGluZCkgOiBvLmpvaW4oXCJcIikpICsgXCJdXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvID09IG51bGwpXHJcbiAgICAgICAgICBqc29uICs9IChuYW1lICYmIFwiOlwiKSArIFwibnVsbFwiO1xyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZihvKSA9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICBmb3IgKHZhciBtIGluIG8pXHJcbiAgICAgICAgICAgIGFyclthcnIubGVuZ3RoXSA9IFgudG9Kc29uKG9bbV0sIG0sIGluZCArIFwiXFx0XCIpO1xyXG4gICAgICAgICAganNvbiArPSAobmFtZSA/IFwiOntcIiA6IFwie1wiKSArIChhcnIubGVuZ3RoID4gMSA/IChcIlxcblwiICsgaW5kICsgXCJcXHRcIiArIGFyci5qb2luKFwiLFxcblwiICsgaW5kICsgXCJcXHRcIikgKyBcIlxcblwiICsgaW5kKSA6IGFyci5qb2luKFwiXCIpKSArIFwifVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mKG8pID09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgICBqc29uICs9IChuYW1lICYmIFwiOlwiKSArIFwiXFxcIlwiICsgby50b1N0cmluZygpICsgXCJcXFwiXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAganNvbiArPSAobmFtZSAmJiBcIjpcIikgKyBvLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgIH0sXHJcbiAgICAgIGlubmVyWG1sOiBmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgdmFyIHMgPSBcIlwiXHJcbiAgICAgICAgaWYgKFwiaW5uZXJIVE1MXCIgaW4gbm9kZSlcclxuICAgICAgICAgIHMgPSBub2RlLmlubmVySFRNTDtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHZhciBhc1htbCA9IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgICAgICAgdmFyIHMgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZiAobi5ub2RlVHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgcyArPSBcIjxcIiArIG4ubm9kZU5hbWU7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBzICs9IFwiIFwiICsgbi5hdHRyaWJ1dGVzW2ldLm5vZGVOYW1lICsgXCI9XFxcIlwiICsgKG4uYXR0cmlidXRlc1tpXS5ub2RlVmFsdWUgfHwgXCJcIikudG9TdHJpbmcoKSArIFwiXFxcIlwiO1xyXG4gICAgICAgICAgICAgIGlmIChuLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIHMgKz0gXCI+XCI7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gbi5maXJzdENoaWxkOyBjOyBjID0gYy5uZXh0U2libGluZylcclxuICAgICAgICAgICAgICAgICAgcyArPSBhc1htbChjKTtcclxuICAgICAgICAgICAgICAgIHMgKz0gXCI8L1wiICsgbi5ub2RlTmFtZSArIFwiPlwiO1xyXG4gICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgcyArPSBcIi8+XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobi5ub2RlVHlwZSA9PSAzKVxyXG4gICAgICAgICAgICAgIHMgKz0gbi5ub2RlVmFsdWU7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG4ubm9kZVR5cGUgPT0gNClcclxuICAgICAgICAgICAgICBzICs9IFwiPCFbQ0RBVEFbXCIgKyBuLm5vZGVWYWx1ZSArIFwiXV0+XCI7XHJcbiAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGZvciAodmFyIGMgPSBub2RlLmZpcnN0Q2hpbGQ7IGM7IGMgPSBjLm5leHRTaWJsaW5nKVxyXG4gICAgICAgICAgICBzICs9IGFzWG1sKGMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcztcclxuICAgICAgfSxcclxuICAgICAgZXNjYXBlOiBmdW5jdGlvbih0eHQpIHtcclxuICAgICAgICByZXR1cm4gdHh0LnJlcGxhY2UoL1tcXFxcXS9nLCBcIlxcXFxcXFxcXCIpXHJcbiAgICAgICAgICAucmVwbGFjZSgvW1xcXCJdL2csICdcXFxcXCInKVxyXG4gICAgICAgICAgLnJlcGxhY2UoL1tcXG5dL2csICdcXFxcbicpXHJcbiAgICAgICAgICAucmVwbGFjZSgvW1xccl0vZywgJ1xcXFxyJyk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlbW92ZVdoaXRlOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5ub3JtYWxpemUoKTtcclxuICAgICAgICBmb3IgKHZhciBuID0gZS5maXJzdENoaWxkOyBuOykge1xyXG4gICAgICAgICAgaWYgKG4ubm9kZVR5cGUgPT0gMykgeyAvLyB0ZXh0IG5vZGVcclxuICAgICAgICAgICAgaWYgKCFuLm5vZGVWYWx1ZS5tYXRjaCgvW14gXFxmXFxuXFxyXFx0XFx2XS8pKSB7IC8vIHB1cmUgd2hpdGVzcGFjZSB0ZXh0IG5vZGVcclxuICAgICAgICAgICAgICB2YXIgbnh0ID0gbi5uZXh0U2libGluZztcclxuICAgICAgICAgICAgICBlLnJlbW92ZUNoaWxkKG4pO1xyXG4gICAgICAgICAgICAgIG4gPSBueHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgIG4gPSBuLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChuLm5vZGVUeXBlID09IDEpIHsgLy8gZWxlbWVudCBub2RlXHJcbiAgICAgICAgICAgIFgucmVtb3ZlV2hpdGUobik7XHJcbiAgICAgICAgICAgIG4gPSBuLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgfSBlbHNlIC8vIGFueSBvdGhlciBub2RlXHJcbiAgICAgICAgICAgIG4gPSBuLm5leHRTaWJsaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmICh4bWwubm9kZVR5cGUgPT0gOSkgLy8gZG9jdW1lbnQgbm9kZVxyXG4gICAgICB4bWwgPSB4bWwuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgdmFyIGpzb24gPSBYLnRvSnNvbihYLnRvT2JqKFgucmVtb3ZlV2hpdGUoeG1sKSksIHhtbC5ub2RlTmFtZSwgXCJcXHRcIik7XHJcbiAgICByZXR1cm4gXCJ7XFxuXCIgKyB0YWIgKyAodGFiID8ganNvbi5yZXBsYWNlKC9cXHQvZywgdGFiKSA6IGpzb24ucmVwbGFjZSgvXFx0fFxcbi9nLCBcIlwiKSkgKyBcIlxcbn1cIjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29kZU1vZGVsIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuaW5pdEFkYXB0ZXIoKTtcclxuICB9XHJcblxyXG4gIGluaXRBZGFwdGVyKCkge1xyXG4gICAgdGhpcy5hZGFwdGVyID0gW1xyXG4gICAgICAnPEFkYXB0ZXInLFxyXG4gICAgICAnXHR4bWxuczp4c2k9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiJyxcclxuICAgICAgJ1x0eHNpOm5vTmFtZXNwYWNlU2NoZW1hTG9jYXRpb249XCJodHRwczovL2liaXM0ZXhhbXBsZS5pYmlzc291cmNlLm9yZy9yZXN0L2liaXNkb2MvaWJpc2RvYy54c2RcIicsXHJcbiAgICAgICdcdG5hbWU9XCJIZWxsb1dvcmxkXCIgJyxcclxuICAgICAgJ1x0ZGVzY3JpcHRpb249XCJWb29yYmVlbGQgYWRhcHRlclwiPicsXHJcblxyXG4gICAgICAnXHQ8UmVjZWl2ZXIgbmFtZT1cIkhlbGxvV29ybGRcIj4nLFxyXG4gICAgICAnXHRcdDxBcGlMaXN0ZW5lciBuYW1lPVwiSGVsbG9Xb3JsZFwiJyxcclxuICAgICAgJ1x0XHRcdHVyaVBhdHRlcm49XCJoZWxsb3dvcmxkL3tpbnB1dFN0cmluZ31cIicsXHJcbiAgICAgICdcdFx0XHRtZXRob2QgPSBcImdldFwiJyxcclxuICAgICAgJ1x0XHQvPicsXHJcbiAgICAgICdcdDwvUmVjZWl2ZXI+JyxcclxuXHJcbiAgICAgICdcdDxQaXBlbGluZSBmaXJzdFBpcGU9XCJTd2l0Y2hJbnB1dFwiPicsXHJcbiAgICAgICdcdFx0PFhtbFN3aXRjaFBpcGUgbmFtZT1cIlN3aXRjaElucHV0XCInLFxyXG4gICAgICAnXHRcdFx0Z2V0SW5wdXRGcm9tRml4ZWRWYWx1ZT1cIiZsdDtkdW1teS8mZ3Q7XCInLFxyXG4gICAgICAnXHRcdFx0eHBhdGhFeHByZXNzaW9uPVwiJGlucHV0XCIgeD1cIjQzNlwiIHk9XCIxMzFcIj4nLFxyXG4gICAgICAnXHRcdFx0PFBhcmFtIG5hbWU9XCJpbnB1dFwiIHNlc3Npb25LZXk9XCJpbnB1dFN0cmluZ1wiPjwvUGFyYW0+JyxcclxuICAgICAgJ1x0XHQ8L1htbFN3aXRjaFBpcGU+XFxuXFxuJyxcclxuICAgICAgJ1x0XHQ8Rml4ZWRSZXN1bHRQaXBlJyxcclxuICAgICAgJ1x0XHRcdG5hbWU9XCJORkhlbGxvV29ybGRcIicsXHJcbiAgICAgICdcdFx0XHRyZXR1cm5TdHJpbmc9XCJIYWxsbyBSaWNhcmRvICFcIicsXHJcbiAgICAgICdcdFx0IFx0eD1cIjg2M1wiIHk9XCIyMjhcIj4nLFxyXG4gICAgICAnXHRcdFx0PEZvcndhcmQgbmFtZT1cInN1Y2Nlc3NcIiBwYXRoPVwiRXhpdFwiLz4nLFxyXG4gICAgICAnXHRcdDwvRml4ZWRSZXN1bHRQaXBlPlxcbicsXHJcblxyXG4gICAgICAnXHRcdDxFeGl0IHBhdGg9XCJTZXJ2ZXJFcnJvclwiIHN0YXRlPVwiZXJyb3JcIiBjb2RlPVwiNTAwXCIvPicsXHJcbiAgICAgICdcdFx0PEV4aXQgcGF0aD1cIkV4aXRcIiBzdGF0ZT1cInN1Y2Nlc3NcIiBjb2RlPVwiMjAxXCIvPicsXHJcbiAgICAgICdcdDwvUGlwZWxpbmU+JyxcclxuICAgICAgJzwvQWRhcHRlcj4nXHJcbiAgICBdO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBWYWxpZGF0ZUNvbmZpZ3VyYXRpb25WaWV3IHtcclxuXHJcbiAgY29uc3RydWN0b3IoZWRpdG9yKSB7XHJcbiAgICB0aGlzLmVkaXRvciA9IGVkaXRvclxyXG4gIH1cclxuICAvL3ZhbGlkYXRlIHRoZSBjb25maWd1cmF0aW9uLlxyXG4gIHZhbGlkYXRlQ29uZmlndXJhdGlvbigpIHtcclxuICAgIGxldCBjdXIgPSB0aGlzO1xyXG4gICAgbGV0IHZhbGlkYXRlID0geG1sbGludC52YWxpZGF0ZVhNTCh7XHJcbiAgICAgIHhtbDogY3VyLmVkaXRvci5nZXRWYWx1ZSgpLnJlcGxhY2UoL1xcc3g9XCIuKj9cIi9nLCAnJykucmVwbGFjZSgvXFxzeT1cIi4qP1wiL2csICcnKSxcclxuICAgICAgc2NoZW1hOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImliaXNkb2NYc2RcIiksXHJcbiAgICAgIFRPVEFMX01FTU9SWTogMTY3NzcyMTdcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbGlkYXRlO1xyXG4gIH1cclxuXHJcbiAgZGVjb3JhdGVMaW5lKGxpbmVOdW1iZXIpIHtcclxuICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmVkaXRvci5kZWx0YURlY29yYXRpb25zKFtdLCBbe1xyXG4gICAgICByYW5nZTogbmV3IG1vbmFjby5SYW5nZShsaW5lTnVtYmVyLCAxLCBsaW5lTnVtYmVyLCAxKSxcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIGdseXBoTWFyZ2luQ2xhc3NOYW1lOiAnbXlHbHlwaE1hcmdpbkNsYXNzJ1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcbiAgfVxyXG5cclxuICAvL3VuZG8gYWxsIGRlY29yYXRpb25zLlxyXG4gIHVuZG9EZWNvcmF0aW9ucygpIHtcclxuICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmVkaXRvci5kZWx0YURlY29yYXRpb25zKHRoaXMuZWRpdG9yLmdldE1vZGVsKCkuZ2V0QWxsRGVjb3JhdGlvbnMoKSwgW3tcclxuICAgICAgcmFuZ2U6IG5ldyBtb25hY28uUmFuZ2UoMSwgMSwgMSwgMSksXHJcbiAgICAgIG9wdGlvbnM6IHt9XHJcbiAgICB9XSk7XHJcbiAgICB0aGlzLmVkaXRvci5nZXRNb2RlbCgpLnNldFZhbHVlKHRoaXMuZWRpdG9yLmdldE1vZGVsKCkuZ2V0VmFsdWUoKSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvZGVDb21wbGV0aW9uVmlldyB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvZGVWaWV3KSB7XHJcbiAgICB0aGlzLmNvZGVWaWV3ID0gY29kZVZpZXc7XHJcbiAgICAvL3RoaXMuaW5pdFByb3ZpZGVyKCk7XHJcbiAgfVxyXG5cclxuICAvLyAvL3NldHVwIHRoZSBhdXRvY29tcGxldGUuXHJcbiAgLy8gaW5pdFByb3ZpZGVyKCkge1xyXG4gIC8vICAgbGV0IGN1ciA9IHRoaXMsXHJcbiAgLy8gICAgIHN1Z2dlc3Rpb25zO1xyXG4gIC8vICAgY29uc29sZS5sb2coJ2F1dG9jb21wbGV0ZSB3b3JraW5nJyk7XHJcbiAgLy8gICBtb25hY28ubGFuZ3VhZ2VzLnJlZ2lzdGVyQ29tcGxldGlvbkl0ZW1Qcm92aWRlcigneG1sJywge1xyXG4gIC8vICAgICBwcm92aWRlQ29tcGxldGlvbkl0ZW1zOiBmdW5jdGlvbihtb2RlbCwgcG9zaXRpb24pIHtcclxuICAvLyAgICAgICAvLyBmaW5kIG91dCBpZiB3ZSBhcmUgY29tcGxldGluZyBhIHByb3BlcnR5IGluIHRoZSAnZGVwZW5kZW5jaWVzJyBvYmplY3QuXHJcbiAgLy8gICAgICAgdmFyIHRleHRVbnRpbFBvc2l0aW9uID0gbW9kZWwuZ2V0VmFsdWVJblJhbmdlKHtcclxuICAvLyAgICAgICAgIHN0YXJ0TGluZU51bWJlcjogMSxcclxuICAvLyAgICAgICAgIHN0YXJ0Q29sdW1uOiAxLFxyXG4gIC8vICAgICAgICAgZW5kTGluZU51bWJlcjogcG9zaXRpb24ubGluZU51bWJlcixcclxuICAvLyAgICAgICAgIGVuZENvbHVtbjogcG9zaXRpb24uY29sdW1uXHJcbiAgLy8gICAgICAgfSk7XHJcbiAgLy8gICAgICAgbGV0IGRlc2lyZWRQaXBlID0gdGV4dFVudGlsUG9zaXRpb24ubWF0Y2goLzxbXlwiXFwvXVtcXFNdKj9bcFBdaXBlL2cpO1xyXG4gIC8vICAgICAgIHZhciBtYXRjaCA9IG1vZGVsLmdldFZhbHVlKCkubWF0Y2goLzxbXFxTXSo/W15cIi9dW3BQXWlwZVtcXHNcXHRcXG5dW15dKj8+W15dKj88Wy9dW1xcU10qP1teXCIvXVBpcGU+L2cpO1xyXG4gIC8vICAgICAgIGlmIChtYXRjaCA9PSBudWxsIHx8IGRlc2lyZWRQaXBlID09IG51bGwpIHtcclxuICAvLyAgICAgICAgIHJldHVybjtcclxuICAvLyAgICAgICB9XHJcbiAgLy8gICAgICAgZGVzaXJlZFBpcGUgPSBkZXNpcmVkUGlwZVtkZXNpcmVkUGlwZS5sZW5ndGggLSAxXS5yZXBsYWNlKC88L2csICcnKTtcclxuICAvLyAgICAgICBtYXRjaC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgLy8gICAgICAgICBsZXQgbGluZSA9IG1vZGVsLmdldExpbmVDb250ZW50KHBvc2l0aW9uLmxpbmVOdW1iZXIgLSAxKTtcclxuICAvLyAgICAgICAgIGlmIChpdGVtLmluZGV4T2YobGluZSkgIT0gLTEpIHtcclxuICAvLyAgICAgICAgICAgc3VnZ2VzdGlvbnMgPSBjdXIuY3JlYXRlUGlwZUF1dG9Db21wbGV0ZSgpO1xyXG4gIC8vICAgICAgICAgfSBlbHNlIHtcclxuICAvLyAgICAgICAgICAgc3VnZ2VzdGlvbnMgPSBjdXIuY3JlYXRlQXR0cmlidXRlQXV0b2NvbXBsZXRlKGRlc2lyZWRQaXBlKTtcclxuICAvLyAgICAgICAgIH1cclxuICAvLyAgICAgICB9KTtcclxuICAvLyAgICAgICByZXR1cm4ge1xyXG4gIC8vICAgICAgICAgc3VnZ2VzdGlvbnM6IHN1Z2dlc3Rpb25zXHJcbiAgLy8gICAgICAgfTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgfSk7XHJcbiAgLy8gfVxyXG4gIC8vXHJcbiAgLy8gY3JlYXRlUGlwZUF1dG9Db21wbGV0ZSgpIHtcclxuICAvLyAgIGxldCBwaXBlLCBvYmogPSBudWxsO1xyXG4gIC8vICAgbGV0IGFyciA9IFtdO1xyXG4gIC8vXHJcbiAgLy8gICBpZiAodGhpcy5jb2RlVmlldy5pYmlzZG9jSnNvbiAhPSBudWxsKSB7XHJcbiAgLy8gICAgIHRoaXMuaWJpc2RvY0pzb24gPSB0aGlzLmNvZGVWaWV3LmliaXNkb2NKc29uO1xyXG4gIC8vICAgICB0aGlzLmliaXNkb2NKc29uWzJdLmNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gIC8vICAgICAgIHBpcGUgPSBpdGVtO1xyXG4gIC8vICAgICAgIG9iaiA9IHtcclxuICAvLyAgICAgICAgIGxhYmVsOiBwaXBlLm5hbWUucmVwbGFjZSgvXigoPyFQaXBlKS4pKiQvLCBwaXBlLm5hbWUgKyBcIlBpcGVcIiksXHJcbiAgLy8gICAgICAgICBraW5kOiBtb25hY28ubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZC5GdW5jdGlvbixcclxuICAvLyAgICAgICAgIGRvY3VtZW50YXRpb246IHBpcGUucGFja2FnZU5hbWUsXHJcbiAgLy8gICAgICAgICBpbnNlcnRUZXh0OiAnPCcgKyBwaXBlLm5hbWUgKyAnIG5hbWU9XCJ5b3VyUGlwZVwiPiBcXG4gPC8nICsgcGlwZS5uYW1lICsgJz4nXHJcbiAgLy8gICAgICAgfVxyXG4gIC8vICAgICAgIGFyci5wdXNoKG9iaik7XHJcbiAgLy8gICAgIH0pO1xyXG4gIC8vICAgfVxyXG4gIC8vXHJcbiAgLy8gICBvYmogPSB7XHJcbiAgLy8gICAgIGxhYmVsOiAnRm9yd2FyZCcsXHJcbiAgLy8gICAgIGtpbmQ6IG1vbmFjby5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLkZ1bmN0aW9uLFxyXG4gIC8vICAgICBkb2N1bWVudGF0aW9uOiBcImEgZm9yd2FyZFwiLFxyXG4gIC8vICAgICBpbnNlcnRUZXh0OiAnPEZvcndhcmQgbmFtZT1cImZvcndhcmROYW1lXCIgcGF0aD1cIm5ld1BhdGhcIiAvPidcclxuICAvLyAgIH1cclxuICAvLyAgIGFyci5wdXNoKG9iaik7XHJcbiAgLy8gICByZXR1cm4gYXJyO1xyXG4gIC8vIH1cclxuICAvLyBjcmVhdGVBdHRyaWJ1dGVBdXRvY29tcGxldGUoc2VsZWN0UGlwZSkge1xyXG4gIC8vICAgbGV0IGFyciA9IFtdLFxyXG4gIC8vICAgICBvYmo7XHJcbiAgLy8gICBpZiAodGhpcy5jb2RlVmlldy5pYmlzZG9jSnNvbiAhPSBudWxsKSB7XHJcbiAgLy8gICAgIHRoaXMuaWJpc2RvY0pzb24gPSB0aGlzLmNvZGVWaWV3LmliaXNkb2NKc29uO1xyXG4gIC8vICAgICB0aGlzLmliaXNkb2NKc29uWzJdLmNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbihwaXBlLCBpbmRleCkge1xyXG4gIC8vICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHBpcGUubmFtZS5sZW5ndGgsIHBpcGUubmFtZSwgc2VsZWN0UGlwZS5sZW5ndGgpO1xyXG4gIC8vICAgICAgIGlmIChwaXBlLm5hbWUgPT0gc2VsZWN0UGlwZSkge1xyXG4gIC8vICAgICAgICAgcGlwZS5tZXRob2RzLmZvckVhY2goZnVuY3Rpb24oYXR0ciwgaW5kZXgpIHtcclxuICAvLyAgICAgICAgICAgb2JqID0ge1xyXG4gIC8vICAgICAgICAgICAgIGxhYmVsOiBhdHRyLm5hbWUsXHJcbiAgLy8gICAgICAgICAgICAga2luZDogbW9uYWNvLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuRnVuY3Rpb24sXHJcbiAgLy8gICAgICAgICAgICAgZG9jdW1lbnRhdGlvbjogYXR0ci5kZXNjcmlwdGlvbixcclxuICAvLyAgICAgICAgICAgICBpbnNlcnRUZXh0OiBhdHRyLm5hbWUgKyAnPVwiJyArIGF0dHIuZGVmYXVsdFZhbHVlICsgJ1wiJ1xyXG4gIC8vICAgICAgICAgICB9XHJcbiAgLy8gICAgICAgICAgIGFyci5wdXNoKG9iaik7XHJcbiAgLy8gICAgICAgICB9KTtcclxuICAvLyAgICAgICB9XHJcbiAgLy8gICAgIH0pO1xyXG4gIC8vICAgfVxyXG4gIC8vICAgcmV0dXJuIGFycjtcclxuICAvLyB9XHJcblxyXG4gIGluaXRQcm92aWRlcigpIHtcclxuXHJcbiAgICB0aGlzLnNjaGVtYU5vZGUgPSB0aGlzLnN0cmluZ1RvWG1sKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpYmlzZG9jWHNkJykucmVwbGFjZSgveHNcXDovZywgJycpKS5jaGlsZE5vZGVzWzBdO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5zY2hlbWFOb2RlLCBcImhvaVwiKTtcclxuICAgIG1vbmFjby5sYW5ndWFnZXMucmVnaXN0ZXJDb21wbGV0aW9uSXRlbVByb3ZpZGVyKCd4bWwnLCB0aGlzLmdldFhtbENvbXBsZXRpb25Qcm92aWRlcihtb25hY28pKTtcclxuICB9XHJcblxyXG4gIHN0cmluZ1RvWG1sKHRleHQpIHtcclxuICAgIHZhciB4bWxEb2M7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5ET01QYXJzZXIpIHtcclxuICAgICAgdmFyIHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuICAgICAgeG1sRG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0ZXh0LCAndGV4dC94bWwnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHhtbERvYyA9IG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MRE9NJyk7XHJcbiAgICAgIHhtbERvYy5hc3luYyA9IGZhbHNlO1xyXG4gICAgICB4bWxEb2MubG9hZFhNTCh0ZXh0KTtcclxuICAgIH1cclxuICAgIHJldHVybiB4bWxEb2M7XHJcbiAgfVxyXG5cclxuICBnZXRMYXN0T3BlbmVkVGFnKHRleHQpIHtcclxuICAgIC8vIGdldCBhbGwgdGFncyBpbnNpZGUgb2YgdGhlIGNvbnRlbnRcclxuICAgIHZhciB0YWdzID0gdGV4dC5tYXRjaCgvPFxcLyooPz1cXFMqKShbYS16QS1aLV0rKS9nKTtcclxuICAgIGlmICghdGFncykge1xyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgLy8gd2UgbmVlZCB0byBrbm93IHdoaWNoIHRhZ3MgYXJlIGNsb3NlZFxyXG4gICAgdmFyIGNsb3NpbmdUYWdzID0gW107XHJcbiAgICBmb3IgKHZhciBpID0gdGFncy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICBpZiAodGFnc1tpXS5pbmRleE9mKCc8LycpID09PSAwKSB7XHJcbiAgICAgICAgY2xvc2luZ1RhZ3MucHVzaCh0YWdzW2ldLnN1YnN0cmluZygnPC8nLmxlbmd0aCkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGdldCB0aGUgbGFzdCBwb3NpdGlvbiBvZiB0aGUgdGFnXHJcbiAgICAgICAgdmFyIHRhZ1Bvc2l0aW9uID0gdGV4dC5sYXN0SW5kZXhPZih0YWdzW2ldKTtcclxuICAgICAgICB2YXIgdGFnID0gdGFnc1tpXS5zdWJzdHJpbmcoJzwnLmxlbmd0aCk7XHJcbiAgICAgICAgdmFyIGNsb3NpbmdCcmFja2V0SWR4ID0gdGV4dC5pbmRleE9mKCcvPicsIHRhZ1Bvc2l0aW9uKTtcclxuICAgICAgICAvLyBpZiB0aGUgdGFnIHdhc24ndCBjbG9zZWRcclxuICAgICAgICBpZiAoY2xvc2luZ0JyYWNrZXRJZHggPT09IC0xKSB7XHJcbiAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gY2xvc2luZyB0YWdzIG9yIHRoZSBjdXJyZW50IHRhZyB3YXNuJ3QgY2xvc2VkXHJcbiAgICAgICAgICBpZiAoIWNsb3NpbmdUYWdzLmxlbmd0aCB8fCBjbG9zaW5nVGFnc1tjbG9zaW5nVGFncy5sZW5ndGggLSAxXSAhPT0gdGFnKSB7XHJcbiAgICAgICAgICAgIC8vIHdlIGZvdW5kIG91ciB0YWcsIGJ1dCBsZXQncyBnZXQgdGhlIGluZm9ybWF0aW9uIGlmIHdlIGFyZSBsb29raW5nIGZvclxyXG4gICAgICAgICAgICAvLyBhIGNoaWxkIGVsZW1lbnQgb3IgYW4gYXR0cmlidXRlXHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZyh0YWdQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgdGFnTmFtZTogdGFnLFxyXG4gICAgICAgICAgICAgIGlzQXR0cmlidXRlU2VhcmNoOiB0ZXh0LmluZGV4T2YoJzwnKSA+IHRleHQuaW5kZXhPZignPicpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyByZW1vdmUgdGhlIGxhc3QgY2xvc2VkIHRhZ1xyXG4gICAgICAgICAgY2xvc2luZ1RhZ3Muc3BsaWNlKGNsb3NpbmdUYWdzLmxlbmd0aCAtIDEsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW1vdmUgdGhlIGxhc3QgY2hlY2tlZCB0YWcgYW5kIGNvbnRpbnVlIHByb2Nlc3NpbmcgdGhlIHJlc3Qgb2YgdGhlIGNvbnRlbnRcclxuICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgdGFnUG9zaXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRBcmVhSW5mbyh0ZXh0KSB7XHJcbiAgICAvLyBvcGVuaW5nIGZvciBzdHJpbmdzLCBjb21tZW50cyBhbmQgQ0RBVEFcclxuICAgIHZhciBpdGVtcyA9IFsnXCInLCAnXFwnJywgJzwhLS0nLCAnPCFbQ0RBVEFbJ107XHJcbiAgICB2YXIgaXNDb21wbGV0aW9uQXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgIC8vIHJlbW92ZSBhbGwgY29tbWVudHMsIHN0cmluZ3MgYW5kIENEQVRBXHJcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cIihbXlwiXFxcXF0qKFxcXFwuW15cIlxcXFxdKikqKVwifFxcJyhbXlxcJ1xcXFxdKihcXFxcLlteXFwnXFxcXF0qKSopXFwnfDwhLS0oW1xcc1xcU10pKj8tLT58PCFcXFtDREFUQVxcWyguKj8pXFxdXFxdPi9nLCAnJyk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBpdGVtSWR4ID0gdGV4dC5pbmRleE9mKGl0ZW1zW2ldKTtcclxuICAgICAgaWYgKGl0ZW1JZHggPiAtMSkge1xyXG4gICAgICAgIC8vIHdlIGFyZSBpbnNpZGUgb25lIG9mIHVuYXZhaWxhYmxlIGFyZWFzLCBzbyB3ZSByZW1vdGUgdGhhdCBhcmVhXHJcbiAgICAgICAgLy8gZnJvbSBvdXIgY2xlYXIgdGV4dFxyXG4gICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZygwLCBpdGVtSWR4KTtcclxuICAgICAgICAvLyBhbmQgdGhlIGNvbXBsZXRpb24gaXMgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgIGlzQ29tcGxldGlvbkF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhcImNvbXBsZXRpb24gYXZhaWxhYmxlOiBcIiwgaXNDb21wbGV0aW9uQXZhaWxhYmxlLCB0ZXh0KVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNDb21wbGV0aW9uQXZhaWxhYmxlOiBpc0NvbXBsZXRpb25BdmFpbGFibGUsXHJcbiAgICAgIGNsZWFyZWRUZXh0OiB0ZXh0XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2hvdWxkU2tpcExldmVsKHRhZ05hbWUpIHtcclxuICAgIC8vIGlmIHdlIGxvb2sgYXQgdGhlIFhTRCBzY2hlbWEsIHRoZXNlIG5vZGVzIGFyZSBjb250YWluZXJzIGZvciBlbGVtZW50cyxcclxuICAgIC8vIHNvIHdlIGNhbiBza2lwIHRoYXQgbGV2ZWxcclxuICAgIHJldHVybiB0YWdOYW1lID09PSAnY29tcGxleFR5cGUnIHx8IHRhZ05hbWUgPT09ICdhbGwnIHx8IHRhZ05hbWUgPT09ICdzZXF1ZW5jZSc7XHJcbiAgfVxyXG5cclxuICBmaW5kRWxlbWVudHMoZWxlbWVudHMsIGVsZW1lbnROYW1lKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIC8vIHdlIGFyZSBsb29raW5nIGZvciBlbGVtZW50cywgc28gd2UgZG9uJ3QgbmVlZCB0byBwcm9jZXNzIGFubm90YXRpb25zIGFuZCBhdHRyaWJ1dGVzXHJcbiAgICAgIGlmIChlbGVtZW50c1tpXS50YWdOYW1lICE9PSAnYW5ub3RhdGlvbicgJiYgZWxlbWVudHNbaV0udGFnTmFtZSAhPT0gJ2F0dHJpYnV0ZScpIHtcclxuICAgICAgICAvLyBpZiBpdCBpcyBvbmUgb2YgdGhlIG5vZGVzIHRoYXQgZG8gbm90IGhhdmUgdGhlIGluZm8gd2UgbmVlZCwgc2tpcCBpdFxyXG4gICAgICAgIC8vIGFuZCBwcm9jZXNzIHRoYXQgbm9kZSdzIGNoaWxkIGl0ZW1zXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkU2tpcExldmVsKGVsZW1lbnRzW2ldLnRhZ05hbWUpKSB7XHJcbiAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmZpbmRFbGVtZW50cyhlbGVtZW50c1tpXS5jaGlsZHJlbiwgZWxlbWVudE5hbWUpO1xyXG4gICAgICAgICAgLy8gaWYgY2hpbGQgZXhpc3RzLCByZXR1cm4gaXRcclxuICAgICAgICAgIGlmIChjaGlsZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGVsZW1lbnROYW1lLCByZXR1cm4gYWxsIGVsZW1lbnRzICh3ZSdsbCBleHBsYWluXHJcbiAgICAgICAgLy8gdGhpcyBiaXQgbGl0dGxlIGxhdGVyXHJcbiAgICAgICAgZWxzZSBpZiAoIWVsZW1lbnROYW1lKSB7XHJcbiAgICAgICAgICByZXR1cm4gZWxlbWVudHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZpbmQgYWxsIHRoZSBlbGVtZW50IGF0dHJpYnV0ZXMsIGFuZCBpZiBpcyd0IG5hbWUgaXMgdGhlIHNhbWVcclxuICAgICAgICAvLyBhcyB0aGUgZWxlbWVudCB3ZSdyZSBsb29raW5nIGZvciwgcmV0dXJuIHRoZSBlbGVtZW50LlxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ2V0RWxlbWVudEF0dHJpYnV0ZXMoZWxlbWVudHNbaV0pLm5hbWUgPT09IGVsZW1lbnROYW1lKSB7XHJcbiAgICAgICAgICByZXR1cm4gZWxlbWVudHNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmaW5kQXR0cmlidXRlcyhlbGVtZW50cykge1xyXG4gICAgdmFyIGF0dHJzID0gW107XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIC8vIHNraXAgbGV2ZWwgaWYgaXQgaXMgYSAnY29tcGxleFR5cGUnIHRhZ1xyXG4gICAgICBpZiAoZWxlbWVudHNbaV0udGFnTmFtZSA9PT0gJ2NvbXBsZXhUeXBlJykge1xyXG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuZmluZEF0dHJpYnV0ZXMoZWxlbWVudHNbaV0uY2hpbGRyZW4pO1xyXG4gICAgICAgIGlmIChjaGlsZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyB3ZSBuZWVkIG9ubHkgdGhvc2UgWFNEIGVsZW1lbnRzIHRoYXQgaGF2ZSBhXHJcbiAgICAgIC8vIHRhZyAnYXR0cmlidXRlJ1xyXG4gICAgICBlbHNlIGlmIChlbGVtZW50c1tpXS50YWdOYW1lID09PSAnYXR0cmlidXRlJykge1xyXG4gICAgICAgIGF0dHJzLnB1c2goZWxlbWVudHNbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXR0cnM7XHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50QXR0cmlidXRlcyhlbGVtZW50KSB7XHJcbiAgICB2YXIgYXR0cnMgPSB7fTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGF0dHJzW2VsZW1lbnQuYXR0cmlidXRlc1tpXS5uYW1lXSA9IGVsZW1lbnQuYXR0cmlidXRlc1tpXS52YWx1ZTtcclxuICAgIH1cclxuICAgIC8vIHJldHVybiBhbGwgYXR0cmlidXRlcyBhcyBhbiBvYmplY3RcclxuICAgIHJldHVybiBhdHRycztcclxuICB9XHJcblxyXG4gIGdldEl0ZW1Eb2N1bWVudGF0aW9uKGVsZW1lbnQpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAvLyBhbm5vdGFpb24gY29udGFpbnMgZG9jdW1lbnRhdGlvbiwgc28gY2FsY3VsYXRlIHRoZVxyXG4gICAgICAvLyBkb2N1bWVudGF0aW9uIGZyb20gaXQncyBjaGlsZCBlbGVtZW50c1xyXG4gICAgICBpZiAoZWxlbWVudC5jaGlsZHJlbltpXS50YWdOYW1lID09PSAnYW5ub3RhdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRJdGVtRG9jdW1lbnRhdGlvbihlbGVtZW50LmNoaWxkcmVuWzBdKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiBpdCdzIHRoZSBkb2N1bWVudGF0aW9uIGVsZW1lbnQsIGp1c3QgZ2V0IHRoZSB2YWx1ZVxyXG4gICAgICBlbHNlIGlmIChlbGVtZW50LmNoaWxkcmVuW2ldLnRhZ05hbWUgPT09ICdkb2N1bWVudGF0aW9uJykge1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50LmNoaWxkcmVuW2ldLnRleHRDb250ZW50O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpc0l0ZW1BdmFpbGFibGUoaXRlbU5hbWUsIG1heE9jY3VycywgaXRlbXMpIHtcclxuICAgIC8vIHRoZSBkZWZhdWx0IGZvciAnbWF4T2NjdXJzJyBpcyAxXHJcbiAgICBtYXhPY2N1cnMgPSBtYXhPY2N1cnMgfHwgJzEnO1xyXG4gICAgLy8gdGhlIGVsZW1lbnQgY2FuIGFwcGVyZSBpbmZpbml0ZSB0aW1lcywgc28gaXQgaXMgYXZhaWxhYmVsXHJcbiAgICBpZiAobWF4T2NjdXJzICYmIG1heE9jY3VycyA9PT0gJ3VuYm91bmRlZCcpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyBjb3VudCBob3cgbWFueSB0aW1lcyB0aGUgZWxlbWVudCBhcHBlcmVkXHJcbiAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoaXRlbXNbaV0gPT09IGl0ZW1OYW1lKSB7XHJcbiAgICAgICAgY291bnQrKztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaWYgaXQgZGlkbid0IGFwcGVhciB5ZXQsIG9yIGl0IGNhbiBhcHBlYXIgYWdhaW4sIHRoZW4gaXRcclxuICAgIC8vIGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGl0J3Qgbm90XHJcbiAgICByZXR1cm4gY291bnQgPT09IDAgfHwgcGFyc2VJbnQobWF4T2NjdXJzKSA+IGNvdW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0QXZhaWxhYmxlRWxlbWVudHMobW9uYWNvLCBlbGVtZW50cywgdXNlZEl0ZW1zKSB7XHJcbiAgICB2YXIgYXZhaWxhYmxlSXRlbXMgPSBbXTtcclxuICAgIHZhciBjaGlsZHJlbjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgLy8gYW5ub3RhdGlvbiBlbGVtZW50IG9ubHkgY29udGFpbnMgZG9jdW1lbnRhdGlvbixcclxuICAgICAgLy8gc28gbm8gbmVlZCB0byBwcm9jZXNzIGl0IGhlcmVcclxuICAgICAgaWYgKGVsZW1lbnRzW2ldLnRhZ05hbWUgIT09ICdhbm5vdGF0aW9uJykge1xyXG4gICAgICAgIC8vIGdldCBhbGwgY2hpbGQgZWxlbWVudHMgdGhhdCBoYXZlICdlbGVtZW50JyB0YWdcclxuICAgICAgICBjaGlsZHJlbiA9IHRoaXMuZmluZEVsZW1lbnRzKFtlbGVtZW50c1tpXV0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGlmIHRoZXJlIGFyZSBubyBzdWNoIGVsZW1lbnRzLCB0aGVuIHRoZXJlIGFyZSBubyBzdWdnZXN0aW9uc1xyXG4gICAgaWYgKCFjaGlsZHJlbikge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIC8vIGdldCBhbGwgZWxlbWVudCBhdHRyaWJ1dGVzXHJcbiAgICAgIGxldCBlbGVtZW50QXR0cnMgPSB0aGlzLmdldEVsZW1lbnRBdHRyaWJ1dGVzKGNoaWxkcmVuW2ldKTtcclxuICAgICAgLy8gdGhlIGVsZW1lbnQgaXMgYSBzdWdnZXN0aW9uIGlmIGl0J3MgYXZhaWxhYmxlXHJcbiAgICAgIGlmICh0aGlzLmlzSXRlbUF2YWlsYWJsZShlbGVtZW50QXR0cnMubmFtZSwgZWxlbWVudEF0dHJzLm1heE9jY3VycywgdXNlZEl0ZW1zKSkge1xyXG4gICAgICAgIC8vIG1hcmsgaXQgYXMgYSAnZmllbGQnLCBhbmQgZ2V0IHRoZSBkb2N1bWVudGF0aW9uXHJcbiAgICAgICAgYXZhaWxhYmxlSXRlbXMucHVzaCh7XHJcbiAgICAgICAgICBsYWJlbDogZWxlbWVudEF0dHJzLm5hbWUsXHJcbiAgICAgICAgICBraW5kOiBtb25hY28ubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZC5GaWVsZCxcclxuICAgICAgICAgIGRldGFpbDogZWxlbWVudEF0dHJzLnR5cGUsXHJcbiAgICAgICAgICBkb2N1bWVudGF0aW9uOiB0aGlzLmdldEl0ZW1Eb2N1bWVudGF0aW9uKGNoaWxkcmVuW2ldKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyByZXR1cm4gdGhlIHN1Z2dlc3Rpb25zIHdlIGZvdW5kXHJcbiAgICByZXR1cm4gYXZhaWxhYmxlSXRlbXM7XHJcbiAgfVxyXG5cclxuICBnZXRBdmFpbGFibGVBdHRyaWJ1dGUobW9uYWNvLCBlbGVtZW50cywgdXNlZENoaWxkVGFncykge1xyXG4gICAgdmFyIGF2YWlsYWJsZUl0ZW1zID0gW107XHJcbiAgICB2YXIgY2hpbGRyZW47XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIC8vIGFubm90YXRpb24gZWxlbWVudCBvbmx5IGNvbnRhaW5zIGRvY3VtZW50YXRpb24sXHJcbiAgICAgIC8vIHNvIG5vIG5lZWQgdG8gcHJvY2VzcyBpdCBoZXJlXHJcbiAgICAgIGlmIChlbGVtZW50c1tpXS50YWdOYW1lICE9PSAnYW5ub3RhdGlvbicpIHtcclxuICAgICAgICAvLyBnZXQgYWxsIGNoaWxkIGVsZW1lbnRzIHRoYXQgaGF2ZSAnYXR0cmlidXRlJyB0YWdcclxuICAgICAgICBjaGlsZHJlbiA9IHRoaXMuZmluZEF0dHJpYnV0ZXMoW2VsZW1lbnRzW2ldXSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaWYgdGhlcmUgYXJlIG5vIGF0dHJpYnV0ZXMsIHRoZW4gdGhlcmUgYXJlIG5vXHJcbiAgICAvLyBzdWdnZXN0aW9ucyBhdmFpbGFibGVcclxuICAgIGlmICghY2hpbGRyZW4pIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAvLyBnZXQgYWxsIGF0dHJpYnV0ZXMgZm9yIHRoZSBlbGVtZW50XHJcbiAgICAgIHZhciBhdHRycyA9IHRoaXMuZ2V0RWxlbWVudEF0dHJpYnV0ZXMoY2hpbGRyZW5baV0pO1xyXG4gICAgICAvLyBhY2NlcHQgaXQgaW4gYSBzdWdnZXN0aW9uIGxpc3Qgb25seSBpZiBpdCBpcyBhdmFpbGFibGVcclxuICAgICAgaWYgKHRoaXMuaXNJdGVtQXZhaWxhYmxlKGF0dHJzLm5hbWUsIGF0dHJzLm1heE9jY3VycywgdXNlZENoaWxkVGFncykpIHtcclxuICAgICAgICAvLyBtYXJrIGl0IGFzIGEgJ3Byb3BlcnR5JywgYW5kIGdldCBpdCdzIGRvY3VtZW50YXRpb25cclxuICAgICAgICBhdmFpbGFibGVJdGVtcy5wdXNoKHtcclxuICAgICAgICAgIGxhYmVsOiBhdHRycy5uYW1lLFxyXG4gICAgICAgICAga2luZDogbW9uYWNvLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuUHJvcGVydHksXHJcbiAgICAgICAgICBkZXRhaWw6IGF0dHJzLnR5cGUsXHJcbiAgICAgICAgICBkb2N1bWVudGF0aW9uOiB0aGlzLmdldEl0ZW1Eb2N1bWVudGF0aW9uKGNoaWxkcmVuW2ldKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyByZXR1cm4gdGhlIGVsZW1lbnRzIHdlIGZvdW5kXHJcbiAgICByZXR1cm4gYXZhaWxhYmxlSXRlbXM7XHJcbiAgfVxyXG5cclxuICBnZXRYbWxDb21wbGV0aW9uUHJvdmlkZXIobW9uYWNvKSB7XHJcbiAgICBsZXQgY3VyID0gdGhpcztcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRyaWdnZXJDaGFyYWN0ZXJzOiBbJzwnXSxcclxuICAgICAgcHJvdmlkZUNvbXBsZXRpb25JdGVtczogZnVuY3Rpb24obW9kZWwsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgLy8gZ2V0IGVkaXRvciBjb250ZW50IGJlZm9yZSB0aGUgcG9pbnRlclxyXG4gICAgICAgIHZhciB0ZXh0VW50aWxQb3NpdGlvbiA9IG1vZGVsLmdldFZhbHVlSW5SYW5nZSh7XHJcbiAgICAgICAgICBzdGFydExpbmVOdW1iZXI6IDEsXHJcbiAgICAgICAgICBzdGFydENvbHVtbjogMSxcclxuICAgICAgICAgIGVuZExpbmVOdW1iZXI6IHBvc2l0aW9uLmxpbmVOdW1iZXIsXHJcbiAgICAgICAgICBlbmRDb2x1bW46IHBvc2l0aW9uLmNvbHVtblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGdldCBjb250ZW50IGluZm8gLSBhcmUgd2UgaW5zaWRlIG9mIHRoZSBhcmVhIHdoZXJlIHdlIGRvbid0IHdhbnQgc3VnZ2VzdGlvbnMsIHdoYXQgaXMgdGhlIGNvbnRlbnQgd2l0aG91dCB0aG9zZSBhcmVhc1xyXG4gICAgICAgIHZhciBhcmVhVW50aWxQb3NpdGlvbkluZm8gPSBjdXIuZ2V0QXJlYUluZm8odGV4dFVudGlsUG9zaXRpb24pOyAvLyBpc0NvbXBsZXRpb25BdmFpbGFibGUsIGNsZWFyZWRUZXh0XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJwb3NpdGlvbjogXCIsIGFyZWFVbnRpbFBvc2l0aW9uSW5mbyk7XHJcbiAgICAgICAgLy8gaWYgd2UgZG9uJ3Qgd2FudCBhbnkgc3VnZ2VzdGlvbnMsIHJldHVybiBlbXB0eSBhcnJheVxyXG4gICAgICAgIGlmICghYXJlYVVudGlsUG9zaXRpb25JbmZvLmlzQ29tcGxldGlvbkF2YWlsYWJsZSkge1xyXG4gICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB3ZSB3YW50IHN1Z2dlc3Rpb25zLCBpbnNpZGUgb2Ygd2hpY2ggdGFnIGFyZSB3ZT9cclxuICAgICAgICB2YXIgbGFzdE9wZW5lZFRhZyA9IGN1ci5nZXRMYXN0T3BlbmVkVGFnKGFyZWFVbnRpbFBvc2l0aW9uSW5mby5jbGVhcmVkVGV4dCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJsYXN0IG9wZW5lZCB0YWc6IFwiLCBsYXN0T3BlbmVkVGFnKTtcclxuICAgICAgICAvLyBnZXQgb3BlbmVkIHRhZ3MgdG8gc2VlIHdoYXQgdGFnIHdlIHNob3VsZCBsb29rIGZvciBpbiB0aGUgWFNEIHNjaGVtYVxyXG4gICAgICAgIHZhciBvcGVuZWRUYWdzID0gW107XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBlbGVtZW50cy9hdHRyaWJ1dGVzIHRoYXQgYXJlIGFscmVhZHkgbWVudGlvbmVkIGluIHRoZSBlbGVtZW50IHdlJ3JlIGluXHJcbiAgICAgICAgdmFyIHVzZWRJdGVtcyA9IFtdO1xyXG4gICAgICAgIHZhciBpc0F0dHJpYnV0ZVNlYXJjaCA9IGxhc3RPcGVuZWRUYWcgJiYgbGFzdE9wZW5lZFRhZy5pc0F0dHJpYnV0ZVNlYXJjaDtcclxuICAgICAgICAvLyBubyBuZWVkIHRvIGNhbGN1bGF0ZSB0aGUgcG9zaXRpb24gaW4gdGhlIFhTRCBzY2hlbWEgaWYgd2UgYXJlIGluIHRoZSByb290IGVsZW1lbnRcclxuICAgICAgICBpZiAobGFzdE9wZW5lZFRhZykge1xyXG4gICAgICAgICAgLy8gcGFyc2UgdGhlIGNvbnRlbnQgKG5vdCBjbGVhcmVkIHRleHQpIGludG8gYW4geG1sIGRvY3VtZW50XHJcbiAgICAgICAgICB2YXIgeG1sRG9jID0gY3VyLnN0cmluZ1RvWG1sKG1vZGVsLmdldFZhbHVlKCkpO1xyXG4gICAgICAgICAgdmFyIGxhc3RDaGlsZCA9IHhtbERvYy5sYXN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coeG1sRG9jKTtcclxuICAgICAgICAgIHdoaWxlIChsYXN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgb3BlbmVkVGFncy5wdXNoKGxhc3RDaGlsZC50YWdOYW1lKTtcclxuICAgICAgICAgICAgLy8gaWYgd2UgZm91bmQgb3VyIGxhc3Qgb3BlbmVkIHRhZ1xyXG4gICAgICAgICAgICBpZiAobGFzdENoaWxkLnRhZ05hbWUgPT09IGxhc3RPcGVuZWRUYWcudGFnTmFtZSkge1xyXG4gICAgICAgICAgICAgIC8vIGlmIHdlIGFyZSBsb29raW5nIGZvciBhdHRyaWJ1dGVzLCB0aGVuIHVzZWQgaXRlbXMgc2hvdWxkXHJcbiAgICAgICAgICAgICAgLy8gYmUgdGhlIGF0dHJpYnV0ZXMgd2UgYWxyZWFkeSB1c2VkXHJcbiAgICAgICAgICAgICAgaWYgKGxhc3RPcGVuZWRUYWcuaXNBdHRyaWJ1dGVTZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhdHRycyA9IGxhc3RDaGlsZC5hdHRyaWJ1dGVzO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICB1c2VkSXRlbXMucHVzaChhdHRyc1tpXS5ub2RlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGFyZSBsb29raW5nIGZvciBjaGlsZCBlbGVtZW50cywgdGhlbiB1c2VkIGl0ZW1zXHJcbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgYmUgdGhlIGVsZW1lbnRzIHRoYXQgd2VyZSBhbHJlYWR5IHVzZWRcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGxhc3RDaGlsZC5jaGlsZHJlbjtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgdXNlZEl0ZW1zLnB1c2goY2hpbGRyZW5baV0udGFnTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHdlIGhhdmVuJ3QgZm91bmQgdGhlIGxhc3Qgb3BlbmVkIHRhZyB5ZXQsIHNvIHdlIG1vdmUgdG9cclxuICAgICAgICAgICAgLy8gdGhlIG5leHQgZWxlbWVudFxyXG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSBsYXN0Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZmluZCB0aGUgbGFzdCBvcGVuZWQgdGFnIGluIHRoZSBzY2hlbWEgdG8gc2VlIHdoYXQgZWxlbWVudHMvYXR0cmlidXRlcyBpdCBjYW4gaGF2ZVxyXG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRoaXMuc2NoZW1hTm9kZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wZW5lZFRhZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbSA9IGN1ci5maW5kRWxlbWVudHMoY3VycmVudEl0ZW0uY2hpbGRyZW4sIG9wZW5lZFRhZ3NbaV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmV0dXJuIGF2YWlsYWJsZSBlbGVtZW50cy9hdHRyaWJ1dGVzIGlmIHRoZSB0YWcgZXhpc3RzIGluIHRoZSBzY2hlbWEsIG9yIGFuIGVtcHR5XHJcbiAgICAgICAgLy8gYXJyYXkgaWYgaXQgZG9lc24ndFxyXG4gICAgICAgIGlmIChpc0F0dHJpYnV0ZVNlYXJjaCkge1xyXG4gICAgICAgICAgLy8gZ2V0IGF0dHJpYnV0ZXMgY29tcGxldGlvbnNcclxuICAgICAgICAgIHJldHVybiBjdXJyZW50SXRlbSA/IGN1ci5nZXRBdmFpbGFibGVBdHRyaWJ1dGUobW9uYWNvLCBjdXJyZW50SXRlbS5jaGlsZHJlbiwgdXNlZEl0ZW1zKSA6IFtdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBnZXQgZWxlbWVudHMgY29tcGxldGlvbnNcclxuICAgICAgICAgIHJldHVybiBjdXJyZW50SXRlbSA/IGN1ci5nZXRBdmFpbGFibGVFbGVtZW50cyhtb25hY28sIGN1cnJlbnRJdGVtLmNoaWxkcmVuLCB1c2VkSXRlbXMpIDogW107XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBWYWxpZGF0ZUNvbmZpZ3VyYXRpb25WaWV3IGZyb20gJy4vVmFsaWRhdGVDb25maWd1cmF0aW9uVmlldy5qcyc7XHJcbmltcG9ydCBDb2RlQ29tcGxldGlvblZpZXcgZnJvbSAnLi9Db2RlQ29tcGxldGlvblZpZXcuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29kZVZpZXcge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLmliaXNkb2NKc29uID0gbnVsbDtcclxuICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBudWxsO1xyXG4gICAgdGhpcy5kZWNvcmF0aW9ucyA9IG51bGw7XHJcbiAgICB0aGlzLnZhbGlkYXRlQ29uZmlndXJhdGlvblZpZXc7XHJcbiAgICB0aGlzLkNvZGVDb21wbGV0aW9uVmlldyA9IG5ldyBDb2RlQ29tcGxldGlvblZpZXcodGhpcyk7XHJcbiAgfVxyXG5cclxuICBhZGRMaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgfVxyXG5cclxuICBub3RpZnlMaXN0ZW5lcnMoZGF0YSkge1xyXG4gICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsID0+IGwubm90aWZ5KGRhdGEpKTtcclxuICB9XHJcblxyXG4gIC8vbWFrZSB0aGUgZWRpdG9yLlxyXG4gIG1ha2VFZGl0b3IoYWRhcHRlcikge1xyXG4gICAgdGhpcy5lZGl0b3IgPSBtb25hY28uZWRpdG9yLmNyZWF0ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9uYWNvQ29udGFpbmVyJyksIHtcclxuICAgICAgdmFsdWU6IGFkYXB0ZXIsXHJcbiAgICAgIGxhbmd1YWdlOiAneG1sJyxcclxuICAgICAgdGhlbWU6IFwidnMtZGFya1wiLFxyXG4gICAgICBnbHlwaE1hcmdpbjogdHJ1ZSxcclxuICAgICAgYXV0b21hdGljTGF5b3V0OiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2VsZWN0UGlwZShcIlN3aXRjaElucHV0XCIpO1xyXG4gICAgdGhpcy52YWxpZGF0ZUNvbmZpZ3VyYXRpb25WaWV3ID0gbmV3IFZhbGlkYXRlQ29uZmlndXJhdGlvblZpZXcodGhpcy5lZGl0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy9mdW5jdGlvbiB0byBlZGl0IHRoZSBjb2RlIGluIHRoZSBlZGl0b3IuXHJcbiAgZWRpdChyYW5nZSwgbmFtZSkge1xyXG4gICAgdGhpcy5lZGl0b3IuZXhlY3V0ZUVkaXRzKFwibW9uYWNvQ29udGFpbmVyXCIsIFt7XHJcbiAgICAgIHJhbmdlOiByYW5nZSxcclxuICAgICAgdGV4dDogbmFtZVxyXG4gICAgfV0pO1xyXG4gIH1cclxuXHJcbiAgLy9hZGQgb3B0aW9ucyB0byB0aGUgZHJvcGRvd24uXHJcbiAgYWRkT3B0aW9ucyhhZGFwdGVycykge1xyXG4gICAgbGV0IHNlbGVjdCA9ICQoJyNhZGFwdGVyU2VsZWN0JyksXHJcbiAgICAgIG9wdGlvbixcclxuICAgICAgbmFtZTtcclxuICAgIGFkYXB0ZXJzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgbmFtZSA9IGl0ZW0ubWF0Y2goLzxDb25maWd1cmF0aW9uW15dKj9uYW1lPVwiLio/XCIvZyk7XHJcbiAgICAgIGlmIChuYW1lICE9IG51bGwpIHtcclxuICAgICAgICBuYW1lID0gbmFtZVswXS5tYXRjaCgvXCIuKj9cIi9nKVswXS5yZXBsYWNlKC9cIi9nLCAnJyk7XHJcbiAgICAgICAgb3B0aW9uID0gJCgnPG9wdGlvbj48L29wdGlvbj4nKS5hdHRyKCd2YWx1ZScsIGluZGV4KS50ZXh0KG5hbWUpO1xyXG4gICAgICAgICQoc2VsZWN0KS5hcHBlbmQob3B0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmVkaXRvci5zZXRWYWx1ZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIjBcIikpO1xyXG4gIH1cclxuXHJcbiAgLy9zZWxlY3QgYSBwaXBlLlxyXG4gIHNlbGVjdFBpcGUobmFtZSkge1xyXG4gICAgbGV0IGN1ciA9IHRoaXMsXHJcbiAgICAgIGF0dHJpYnV0ZU9iamVjdFJlZ2V4ID0gJzxbXFxcXFNdKj9bXlwiL11bcFBdaXBlW1xcXFxzXFxcXHRcXFxcbl1bXl0qPz5bXl0qPzxbL11bXFxcXFNdKj9bXlwiL11QaXBlPicsXHJcbiAgICAgIHNlbGVjdFBpcGUgPSBudWxsLFxyXG4gICAgICBtYXRjaGVzID0gdGhpcy5lZGl0b3IuZ2V0TW9kZWwoKS5maW5kTWF0Y2hlcyhhdHRyaWJ1dGVPYmplY3RSZWdleCwgZmFsc2UsIHRydWUsIGZhbHNlLCBmYWxzZSk7XHJcblxyXG4gICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgIGxldCBwaXBlID0gY3VyLmVkaXRvci5nZXRNb2RlbCgpLmdldFZhbHVlSW5SYW5nZShpdGVtLnJhbmdlKTtcclxuICAgICAgaWYgKHBpcGUubWF0Y2goJ25hbWU9XCInICsgbmFtZSArICdcIicsICdnJykgIT09IG51bGwpIHtcclxuICAgICAgICBzZWxlY3RQaXBlID0gaXRlbS5yYW5nZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoc2VsZWN0UGlwZSA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBzZWxlY3RQaXBlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZWRpdG9yLmRlbHRhRGVjb3JhdGlvbnMoW10sIFt7XHJcbiAgICAgIHJhbmdlOiBzZWxlY3RQaXBlLFxyXG4gICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgaW5saW5lQ2xhc3NOYW1lOiAnbXlDb250ZW50Q2xhc3MnXHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuICB9XHJcblxyXG4gIC8vY2hhbmdlIHRoZSBuYW1lLlxyXG4gIGNoYW5nZU5hbWUob2xkV29yZCwgbmV3V29yZCkge1xyXG4gICAgbGV0IGNoYW5nZWQgPSB0aGlzLmNoYW5nZU5hbWVDb2RlKCc8W1xcXFxTXSo/W15cIi9dW3BQXWlwZShcXFxcblxcXFx0Kik/XFxcXHM/bmFtZT1cIlxcXFx3KlwiJywgb2xkV29yZCwgbmV3V29yZCk7XHJcbiAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICB0aGlzLmNoYW5nZU5hbWVDb2RlKCc8Zm9yd2FyZChcXFxcblxcXFx0Kik/KFxcXFxzXFxcXHcqPVwiKFxcXFxzP1xcXFxTKSpcIihcXFxcblxcXFx0Kik/KSpcXFxcLz4nLCBvbGRXb3JkLCBuZXdXb3JkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vY2hhbmdlIHBvc3NpdGlvbiBmb3IgcGlwZXNcclxuICBjaGFuZ2VQb3NzaXRpb24obmFtZSwgbmV3WCwgbmV3WSkge1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcbiAgICBsZXQgYXR0cmlidXRlT2JqZWN0UmVnZXggPSAnPFtcXFxcU10qP1teXCIvXVtwUF1pcGVbXFxcXHNcXFxcdFxcXFxuXVteXSo/Pic7XHJcbiAgICBsZXQgbWF0Y2hlcyA9IHRoaXMuZWRpdG9yLmdldE1vZGVsKCkuZmluZE1hdGNoZXMoYXR0cmlidXRlT2JqZWN0UmVnZXgsIGZhbHNlLCB0cnVlLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgIGxldCBwaXBlID0gY3VyLmVkaXRvci5nZXRNb2RlbCgpLmdldFZhbHVlSW5SYW5nZShpdGVtLnJhbmdlKTtcclxuICAgICAgaWYgKHBpcGUuc3BsaXQoJ1wiJykuZmluZCh3b3JkID0+IHdvcmQgPT09IG5hbWUpKSB7XHJcbiAgICAgICAgbGV0IG5ld1BpcGUgPSBcIlwiO1xyXG4gICAgICAgIGlmIChwaXBlLnNwbGl0KC9bXFxzPV0vKS5maW5kKHdvcmQgPT4gd29yZCA9PSAneCcpKSB7XHJcbiAgICAgICAgICBwaXBlID0gcGlwZS5yZXBsYWNlKG5ldyBSZWdFeHAoJ3g9XCJbMC05XSpcIicsICdnJyksICd4PVwiJyArIG5ld1ggKyAnXCInKTtcclxuICAgICAgICAgIHBpcGUgPSBwaXBlLnJlcGxhY2UobmV3IFJlZ0V4cCgneT1cIlswLTldKlwiJywgJ2cnKSwgJ3k9XCInICsgbmV3WSArICdcIicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsZXQgc3RyID0gJyB4PVwiJyArIG5ld1ggKyAnXCIgeT1cIicgKyBuZXdZICsgJ1wiJztcclxuICAgICAgICAgIGlmIChwaXBlLmluZGV4T2YoJy8+JykgIT0gLTEpIHtcclxuICAgICAgICAgICAgcGlwZSA9IHBpcGUuc2xpY2UoMCwgcGlwZS5pbmRleE9mKCcvJykpICsgc3RyICsgcGlwZS5zbGljZShwaXBlLmluZGV4T2YoJy8nKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwaXBlID0gcGlwZS5zbGljZSgwLCBwaXBlLmluZGV4T2YoJz4nKSkgKyBzdHIgKyBwaXBlLnNsaWNlKHBpcGUuaW5kZXhPZignPicpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY3VyLmVkaXQoaXRlbS5yYW5nZSwgcGlwZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy9jaGFuZ2UgdGhlIHBvc3NpdGlvbnMgZm9yIHRoZSBleGl0c1xyXG4gIGNoYW5nZUV4aXRQb3NzaXRpb24obmFtZSwgbmV3WCwgbmV3WSkge1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcbiAgICBsZXQgYWRhcHRlck5hbWUgPSAkKCcjY2FudmFzJykudGV4dCgpLm1hdGNoKC9BZGFwdGVyOlxccy4qP1xccy9nKVswXS5yZXBsYWNlKC9BZGFwdGVyOlxccy9nLCAnJykucmVwbGFjZSgnICcsICcnKTtcclxuICAgIGxldCBhdHRyaWJ1dGVPYmplY3RSZWdleCA9ICc8QWRhcHRlciBuYW1lPVwiJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudEFkYXB0ZXJcIikgKyAnXCJbXFxcXHNcXFxcU1xcXFxuXSo/PEV4aXQgW15dKj9cXFxcLz4nO1xyXG4gICAgbGV0IG1hdGNoZXMgPSB0aGlzLmVkaXRvci5nZXRNb2RlbCgpLmZpbmRNYXRjaGVzKGF0dHJpYnV0ZU9iamVjdFJlZ2V4LCBmYWxzZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlKTtcclxuXHJcbiAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgbGV0IGV4aXQgPSBjdXIuZWRpdG9yLmdldE1vZGVsKCkuZ2V0VmFsdWVJblJhbmdlKGl0ZW0ucmFuZ2UpO1xyXG4gICAgICBleGl0ID0gZXhpdC5tYXRjaCgnPEV4aXQgW15dKj9cXFxcLz4nKVswXTtcclxuICAgICAgaWYgKGV4aXQuaW5kZXhPZigncGF0aD1cIicgKyBuYW1lICsgJ1wiJykgIT0gLTEpIHtcclxuICAgICAgICBpZiAoZXhpdC5pbmRleE9mKCd4PVwiJykgIT0gLTEpIHtcclxuICAgICAgICAgIGV4aXQgPSAnXFx0XFx0JyArIGV4aXQucmVwbGFjZSgveD1cIlswLTldKj9cIi9nLCAneD1cIicgKyBuZXdYICsgJ1wiJylcclxuICAgICAgICAgICAgLnJlcGxhY2UoL3k9XCJbMC05XSo/XCIvZywgJ3k9XCInICsgbmV3WSArICdcIicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsZXQgc3RyID0gJyB4PVwiJyArIG5ld1ggKyAnXCIgeT1cIicgKyBuZXdZICsgJ1wiJ1xyXG4gICAgICAgICAgZXhpdCA9ICdcXHRcXHQnICsgZXhpdC5zbGljZSgwLCBleGl0LmluZGV4T2YoJy8nKSkgKyBzdHIgKyBleGl0LnNsaWNlKGV4aXQuaW5kZXhPZignLycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaXRlbS5yYW5nZS5zdGFydExpbmVOdW1iZXIgPSBpdGVtLnJhbmdlLmVuZExpbmVOdW1iZXI7XHJcbiAgICAgICAgY3VyLmVkaXQoaXRlbS5yYW5nZSwgZXhpdCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy9jaGFuZ2UgdGhlIG5hbWUgb2YgYW4gcGlwZVxyXG4gIGNoYW5nZU5hbWVDb2RlKHJlZywgb2xkV29yZCwgbmV3V29yZCkge1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcbiAgICBsZXQgZWRpdG9yID0gdGhpcy5lZGl0b3I7XHJcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgbGV0IGF0dHJpYnV0ZU9iamVjdFJlZ2V4ID0gcmVnO1xyXG4gICAgbGV0IG1hdGNoZXMgPSBlZGl0b3IuZ2V0TW9kZWwoKS5maW5kTWF0Y2hlcyhhdHRyaWJ1dGVPYmplY3RSZWdleCwgZmFsc2UsIHRydWUsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgbGV0IHBpcGUgPSBlZGl0b3IuZ2V0TW9kZWwoKS5nZXRWYWx1ZUluUmFuZ2UoaXRlbS5yYW5nZSk7XHJcbiAgICAgIGlmIChwaXBlLnNwbGl0KCdcIicpLmZpbmQod29yZCA9PiB3b3JkID09PSBvbGRXb3JkKSkge1xyXG4gICAgICAgIGxldCBuZXdQaXBlID0gcGlwZS5yZXBsYWNlKG5ldyBSZWdFeHAob2xkV29yZCwgJ2cnKSwgbmV3V29yZCk7XHJcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgY3VyLmVkaXQoaXRlbS5yYW5nZSwgbmV3UGlwZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNoYW5nZWQ7XHJcbiAgfVxyXG5cclxuICAvL2FkZCBhIGZvcndhcmRcclxuICBjaGFuZ2VBZGRGb3J3YXJkKG5hbWUsIHBhdGgpIHtcclxuICAgIGxldCBjdXIgPSB0aGlzO1xyXG4gICAgbGV0IGF0dHJpYnV0ZU9iamVjdFJlZ2V4ID0gJzxbXFxcXFNdKj9bXlwiL11bcFBdaXBlW1xcXFxzXFxcXHRcXFxcbl1bXl0qPz5bXl0qPzxbL11bXFxcXFNdKj9bXlwiL11QaXBlPic7XHJcbiAgICBsZXQgbWF0Y2hlcyA9IHRoaXMuZWRpdG9yLmdldE1vZGVsKCkuZmluZE1hdGNoZXMoYXR0cmlidXRlT2JqZWN0UmVnZXgsIGZhbHNlLCB0cnVlLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgIGxldCBwaXBlID0gY3VyLmVkaXRvci5nZXRNb2RlbCgpLmdldFZhbHVlSW5SYW5nZShpdGVtLnJhbmdlKTtcclxuICAgICAgaWYgKHBpcGUuc3BsaXQoL1tcXHM+XS8pLmZpbmQod29yZCA9PiB3b3JkID09PSAnbmFtZT1cIicgKyBuYW1lICsgJ1wiJykpIHtcclxuICAgICAgICBwaXBlID0gcGlwZS5zbGljZSgwLCBwaXBlLnNlYXJjaCgvPFsvXVtcXFNdKj9bXlwiL11QaXBlLykpICsgJ1xcdDxGb3J3YXJkIG5hbWU9XCJzdWNjZXNzXCIgcGF0aD1cIicgKyBwYXRoICsgJ1wiLz4nO1xyXG4gICAgICAgIGxldCBuZXdMaW5lUmFuZ2UgPSB7XHJcbiAgICAgICAgICBlbmRDb2x1bW46IDEsXHJcbiAgICAgICAgICBlbmRMaW5lTnVtYmVyOiBpdGVtLnJhbmdlLmVuZExpbmVOdW1iZXIsXHJcbiAgICAgICAgICBzdGFydENvbHVtbjogMSxcclxuICAgICAgICAgIHN0YXJ0TGluZU51bWJlcjogaXRlbS5yYW5nZS5lbmRMaW5lTnVtYmVyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1ci5lZGl0KG5ld0xpbmVSYW5nZSwgJ1xcbicpO1xyXG4gICAgICAgIGN1ci5lZGl0KGl0ZW0ucmFuZ2UsIHBpcGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vZGVsZXRlIGEgZm9yd2FyZCB0byBhbiBwaXBlLlxyXG4gIGRlbGV0ZUZvcndhcmQobmFtZSwgcGF0aCkge1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcbiAgICBsZXQgYXR0cmlidXRlT2JqZWN0UmVnZXggPSAnPFtcXFxcU10qP1teXCIvXVtwUF1pcGVbXFxcXHNcXFxcdFxcXFxuXVteXSo/PlteXSo/PFsvXVtcXFxcU10qP1teXCIvXVBpcGU+JztcclxuICAgIGxldCBtYXRjaGVzID0gdGhpcy5lZGl0b3IuZ2V0TW9kZWwoKS5maW5kTWF0Y2hlcyhhdHRyaWJ1dGVPYmplY3RSZWdleCwgZmFsc2UsIHRydWUsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgbGV0IHBpcGUgPSBjdXIuZWRpdG9yLmdldE1vZGVsKCkuZ2V0VmFsdWVJblJhbmdlKGl0ZW0ucmFuZ2UpO1xyXG4gICAgICBpZiAocGlwZS5zcGxpdCgvW1xccz5dLykuZmluZCh3b3JkID0+IHdvcmQgPT09ICduYW1lPVwiJyArIG5hbWUgKyAnXCInKSkge1xyXG4gICAgICAgIHBhdGgudG9Mb3dlckNhc2UoKSA9PSBcImV4aXRcIiA/IHBhdGggPSBcIkV4aXRcIiA6IHBhdGggPSBwYXRoO1xyXG4gICAgICAgIGxldCBuZXdQaXBlID0gcGlwZS5yZXBsYWNlKG5ldyBSZWdFeHAoJzxGb3J3YXJkW14vXSo/cGF0aD1cIicgKyBwYXRoICsgJ1wiW15dKj8vPicsICdnaScpLCBcIlwiKTtcclxuICAgICAgICBjdXIuZWRpdChpdGVtLnJhbmdlLCBuZXdQaXBlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBhIG1ldGhvZCB0byBhZGQgYSBwaXBlIGJ5IGhhbmQuXHJcbiAgY2hhbmdlQWRkUGlwZShuYW1lLCBwb3NzaXRpb25zLCBjbGFzc05hbWUgPSBcImN1c3RvbVBpcGVcIikge1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcbiAgICBsZXQgYWRhcHRlck5hbWUgPSAkKCcjY2FudmFzJykudGV4dCgpLm1hdGNoKC9BZGFwdGVyOlxccy4qP1xccy9nKVswXS5yZXBsYWNlKC9BZGFwdGVyOlxccy9nLCAnJykucmVwbGFjZSgnICcsICcnKTtcclxuICAgIGxldCBhdHRyaWJ1dGVPYmplY3RSZWdleCA9ICc8QWRhcHRlciBuYW1lPVwiJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudEFkYXB0ZXJcIikgKyAnXCJbXFxcXHNcXFxcU1xcXFxuXSo/PEV4aXQnO1xyXG4gICAgbGV0IG1hdGNoU3RyaW5nID0gdGhpcy5lZGl0b3IuZ2V0TW9kZWwoKS5nZXRWYWx1ZSgpLm1hdGNoKGF0dHJpYnV0ZU9iamVjdFJlZ2V4KTtcclxuXHJcbiAgICAvLyc8RXhpdCc7XHJcbiAgICBsZXQgbWF0Y2hlcyA9IHRoaXMuZWRpdG9yLmdldE1vZGVsKCkuZmluZE1hdGNoZXMoYXR0cmlidXRlT2JqZWN0UmVnZXgsIGZhbHNlLCB0cnVlLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgbWF0Y2hlcy5zb21lKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgIGxldCByYW5nZSA9IGl0ZW0ucmFuZ2U7XHJcbiAgICAgIHJhbmdlLnN0YXJ0Q29sdW1uID0gMTtcclxuICAgICAgcmFuZ2UuZW5kQ29sdW1uID0gMTtcclxuICAgICAgcmFuZ2Uuc3RhcnRMaW5lTnVtYmVyID0gcmFuZ2UuZW5kTGluZU51bWJlclxyXG4gICAgICBjdXIuZWRpdChyYW5nZSwgJ1xcbicpO1xyXG5cclxuICAgICAgbGV0IG5ld1BpcGUgPSAnXFx0XFx0XFx0PCcgKyBjbGFzc05hbWUgKyAnIG5hbWU9XCInICsgbmFtZSArICdcIiB4PVwiJyArIHBvc3NpdGlvbnMueCArICdcIiB5PVwiJyArIHBvc3NpdGlvbnMueSArICdcIj5cXG5cXG5cXHRcXHRcXHQ8LycgKyBjbGFzc05hbWUgKyAnPlxcbic7XHJcbiAgICAgIGN1ci5lZGl0KHJhbmdlLCBuZXdQaXBlKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vZ2l2ZXMgYmFjayB0aGUgdHlwZXMgb2YgcGlwZXMgd2l0aCB0aGUgbmFtZSBvZiB0aGUgcGlwZS5cclxuICBnZXRUeXBlcygpIHtcclxuICAgIGxldCB0eXBlcyA9IHt9O1xyXG4gICAgbGV0IHZhbHVlID0gdGhpcy5lZGl0b3IuZ2V0VmFsdWUoKTtcclxuICAgIGxldCBvY2N1cmVuY2VzID0gdmFsdWUuc3BsaXQoL1s8Pl0vKTtcclxuICAgIGxldCBuYW1lLCB0eXBlID0gbnVsbDtcclxuICAgIGxldCByZWNlaXZlciA9IHZhbHVlLm1hdGNoKC88UmVjZWl2ZXJbXl0qP25hbWU9XCIuKj9cIlteXSo/Pi9nKTtcclxuICAgIGlmIChyZWNlaXZlciAhPSBudWxsKSB7XHJcbiAgICAgIHJlY2VpdmVyID0gcmVjZWl2ZXJbMF0ubWF0Y2goL1wiLio/XCIvZylbMF0ucmVwbGFjZSgvXCIvZywgJycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVjZWl2ZXIgPSAnTk9fUkVDRUlWRVJfRk9VTkQnXHJcbiAgICB9XHJcbiAgICB0eXBlc1snXCJyZWNlaXZlclwiICcgKyByZWNlaXZlcl0gPSBcIlJlY2VpdmVyXCJcclxuICAgIG9jY3VyZW5jZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgICBpZiAoaXRlbS5zZWFyY2goL1teL11bXFxTXSo/W15cIi9dUGlwZVteXSo/bmFtZT1cIi4qP1wiLykgPiAtMSkge1xyXG4gICAgICAgIGlmIChpdGVtLmNoYXJBdCgwKSAhPSAnLycpIHtcclxuICAgICAgICAgIGxldCB0YWcgPSBpdGVtLnNsaWNlKGl0ZW0uc2VhcmNoKC9bXi9dW1xcU10qP1teXCIvXVBpcGVbXl0qP25hbWU9XCIuKj9cIi8pKTtcclxuICAgICAgICAgIGlmICh0YWcubWF0Y2goL25hbWU9XCIuKj9cIi8pICE9IG51bGwpIHtcclxuICAgICAgICAgICAgbmFtZSA9IHRhZy5tYXRjaCgvbmFtZT1cIi4qP1wiLylbMF0ubWF0Y2goL1wiLio/XCIvKVswXS5yZXBsYWNlKC9cIi9nLCAnJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodGFnLm1hdGNoKC9bXl0qP1BpcGUvKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0YWcubWF0Y2goL1teXSo/UGlwZS8pWzBdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHR5cGUgIT09IG51bGwgJiYgbmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0eXBlc1tuYW1lXSA9IHR5cGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHR5cGVzO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUb0JlYXV0aWZ1bFN5bnRheCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gIH1cclxuXHJcbiAgLy9jb252ZXJ0IHVnbHkgaWJpcyBjb2RlIHRvIGJlYXV0aWZ1bCBzeW50YXguXHJcbiAgdG9CZWF1dGlmdWxTeW50YXgoeG1sKSB7XHJcbiAgICBsZXQgbWF0Y2hlcyA9IHhtbC5tYXRjaCgvPHBpcGUoXFxuXFx0Kik/KFxcc1xcdyo9XCIoXFxzP1xcUykqXCIoXFxuXFx0Kik/KSo+W15dKj88XFwvcGlwZT4vZyksXHJcbiAgICAgIGRvYyA9IHhtbCxcclxuICAgICAgZXhpdHM7XHJcbiAgICBpZiAobWF0Y2hlcyA9PSBudWxsKSByZXR1cm47XHJcbiAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgbGV0IG9sZFBpcGUgPSBpdGVtLFxyXG4gICAgICAgIG5ld1BpcGUgPSBcIlwiO1xyXG4gICAgICBsZXQgY2xhc3NOYW1lID0gb2xkUGlwZS5tYXRjaCgvY2xhc3NOYW1lPVwiLio/XCIvKVswXS5tYXRjaCgvXFwuW14uXSo/XCIvKVswXS5yZXBsYWNlKC9bXCIuXS9nLCAnJyk7XHJcbiAgICAgIGlmIChjbGFzc05hbWUubWF0Y2goLy4qP1BpcGUvKSA9PSBudWxsKSB7XHJcbiAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lICsgJ1BpcGUnO1xyXG4gICAgICB9XHJcbiAgICAgIG5ld1BpcGUgPSBvbGRQaXBlLnJlcGxhY2UoL2NsYXNzTmFtZT1cIi4qP1wiL2csICcnKTtcclxuICAgICAgbmV3UGlwZSA9IG5ld1BpcGUucmVwbGFjZSgvPHBpcGUvZywgJzwnICsgY2xhc3NOYW1lKVxyXG4gICAgICAgIC5yZXBsYWNlKC88XFwvcGlwZT4vLCAnPC8nICsgY2xhc3NOYW1lICsgJz4nKVxyXG4gICAgICBkb2MgPSBkb2MucmVwbGFjZShvbGRQaXBlLCBuZXdQaXBlKTtcclxuICAgIH0pO1xyXG4gICAgZG9jID0gZG9jLnJlcGxhY2UoLzxsaXN0ZW5lclteXSo/Y2xhc3NOYW1lPVwiLio/XCJbXl0qP1xcLz4vZywgZnVuY3Rpb24odHh0KSB7XHJcbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9IHR4dC5tYXRjaCgvY2xhc3NOYW1lPVwiLio/XCIvKVswXS5tYXRjaCgvXFwuW14uXSo/XCIvKVswXS5yZXBsYWNlKC9bXCIuXS9nLCAnJyk7XHJcbiAgICAgICAgdHh0ID0gdHh0LnJlcGxhY2UoL2NsYXNzTmFtZT1cIi4qP1wiL2csICcnKTtcclxuICAgICAgICB0eHQgPSAnPCcgKyB0eHQucmVwbGFjZSgvPC4qPyAvZywgY2xhc3NOYW1lICsgXCIgXCIpO1xyXG4gICAgICAgIHJldHVybiB0eHQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5yZXBsYWNlKC88W1xcL10/W2EtekEtWl0vZywgZnVuY3Rpb24odHh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHR4dC50b1VwcGVyQ2FzZSgpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGV4aXRzID0gZG9jLm1hdGNoKC88RXhpdHM+W15dKj88XFwvRXhpdHM+LylbMF0ucmVwbGFjZSgvPFxcLz9FeGl0cz4vZywgJycpLnJlcGxhY2UoL1xcdC8sICcnKTtcclxuICAgIGRvYyA9IGRvYy5yZXBsYWNlKC88RXhpdHM+W15dKj88XFwvRXhpdHM+L2csICcnKVxyXG4gICAgICAucmVwbGFjZSgvPFxcL1BpcGVsaW5lPi9nLCBleGl0cyArICdcXG4gXFx0XFx0PC9QaXBlbGluZT4nKVxyXG4gICAgICAucmVwbGFjZSgvY2xhc3NOYW1lPVwiLio/XCIvZywgXCJcIik7XHJcbiAgICByZXR1cm4gZG9jO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ29kZU1vZGVsIGZyb20gJy4uL01vZGVsL0NvZGVNb2RlbC5qcyc7XHJcbmltcG9ydCBDb2RlVmlldyBmcm9tICcuLi9WaWV3L2NvZGVWaWV3L0NvZGVWaWV3LmpzJztcclxuaW1wb3J0IFRvQmVhdXRpZnVsU3ludGF4IGZyb20gJy4uL1ZpZXcvY29kZVZpZXcvVG9CZWF1dGlmdWxTeW50YXguanMnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2RlQ29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG1haW5Db250cm9sbGVyKSB7XHJcbiAgICB0aGlzLm1haW5Db250cm9sbGVyID0gbWFpbkNvbnRyb2xsZXI7XHJcbiAgICB0aGlzLmNvZGVNb2RlbCA9IG5ldyBDb2RlTW9kZWwoKTtcclxuICAgIHRoaXMuY29kZVZpZXcgPSBuZXcgQ29kZVZpZXcoKTtcclxuICAgIHRoaXMuY29kZVZpZXcuYWRkTGlzdGVuZXIodGhpcyk7XHJcbiAgICB0aGlzLnRvQmVhdXRpZnVsID0gbmV3IFRvQmVhdXRpZnVsU3ludGF4KCk7XHJcbiAgICB0aGlzLm5vdGlmeSh7XHJcbiAgICAgIHR5cGU6IFwiZ2V0RGF0YVwiXHJcbiAgICB9KTtcclxuICAgIHRoaXMubm90aWZ5KHtcclxuICAgICAgdHlwZTogXCJzZXRFZGl0b3JcIlxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmVkaXRvciA9IHRoaXMuY29kZVZpZXcuZWRpdG9yO1xyXG4gICAgdGhpcy5pbml0TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBub3RpZnkoZGF0YSkge1xyXG4gICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcclxuICAgICAgY2FzZSBcImdldERhdGFcIjpcclxuICAgICAgICB0aGlzLmdldFhzZCgpO1xyXG4gICAgICAgIHRoaXMuZ2V0Q29kZSgpO1xyXG4gICAgICAgIHRoaXMuZ2V0Q29uZmlndXJhdGlvbnMoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInNldEVkaXRvclwiOlxyXG4gICAgICAgIHRoaXMuY29kZVZpZXcubWFrZUVkaXRvcigpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIGluaXRMaXN0ZW5lcnMoKSB7XHJcbiAgICBsZXQgY3VyID0gdGhpcztcclxuICAgICQoJyNhZGFwdGVyU2VsZWN0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgbGV0IGFkYXB0ZXIgPSAkKCcjYWRhcHRlclNlbGVjdCcpLnZhbCgpO1xyXG4gICAgICBjdXIuZWRpdG9yLmdldE1vZGVsKCkuc2V0VmFsdWUobG9jYWxTdG9yYWdlLmdldEl0ZW0oYWRhcHRlcikpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI2FkYXB0ZXJTZWxlY3QnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGxldCBhZGFwdGVyID0gJCgnI2FkYXB0ZXJTZWxlY3QnKS52YWwoKTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYWRhcHRlciwgY3VyLmVkaXRvci5nZXRNb2RlbCgpLmdldFZhbHVlKCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI2JlYXV0aWZ5JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBwcmV0dHlYTUwgPSBiZWF1dGlmeS54bWwoY3VyLmVkaXRvci5nZXRWYWx1ZSgpLCA0KTtcclxuICAgICAgY3VyLmVkaXRvci5nZXRNb2RlbCgpLnNldFZhbHVlKHByZXR0eVhNTCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjdXIuZWRpdG9yLm9uTW91c2VEb3duKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZS50YXJnZXQucmFuZ2Uuc3RhcnRMaW5lTnVtYmVyID0gMTtcclxuICAgICAgZS50YXJnZXQucmFuZ2Uuc3RhcnRDb2x1bW4gPSAxO1xyXG4gICAgICBsZXQgdGV4dFBvc3NpdGlvbiA9IGN1ci5lZGl0b3IuZ2V0TW9kZWwoKS5nZXRWYWx1ZUluUmFuZ2UoZS50YXJnZXQucmFuZ2UpO1xyXG4gICAgICBsZXQgYWRhcHRlcnMgPSB0ZXh0UG9zc2l0aW9uLm1hdGNoKC88QWRhcHRlclteXSo/bmFtZT1cIi4qP1wiPi9nKTtcclxuICAgICAgaWYoYWRhcHRlcnMgIT0gbnVsbCkge1xyXG4gICAgICAgIGxldCBhZGFwdGVyTmFtZSA9IGFkYXB0ZXJzW2FkYXB0ZXJzLmxlbmd0aCAtIDFdLm1hdGNoKC9uYW1lPVwiW15dKj9cIi9nKVswXS5tYXRjaCgvXCJbXl0qP1wiL2cpWzBdLnJlcGxhY2UoL1wiL2csICcnKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRBZGFwdGVyXCIsIGFkYXB0ZXJOYW1lKTtcclxuICAgICAgICBjdXIubWFpbkNvbnRyb2xsZXIuZ2VuZXJhdGVGbG93KCk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5lZGl0b3IuZ2V0TW9kZWwoKS5vbkRpZENoYW5nZUNvbnRlbnQoZnVuY3Rpb24oZSkge1xyXG4gICAgICBpZiAoIWN1ci5tYWluQ29udHJvbGxlci5mbG93Q29udHJvbGxlci5mbG93Vmlldy5tb3ZpbmcgJiYgIWN1ci5tYWluQ29udHJvbGxlci5mbG93Q29udHJvbGxlci5mbG93Vmlldy5hZGRpbmcpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgJCgnI2NhbnZhcycpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgICAgICAgJCgnLmN1c3RvbUVycm9yTWVzc2FnZScpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgY3VyLm1haW5Db250cm9sbGVyLmdlbmVyYXRlRmxvdygpO1xyXG4gICAgICAgICAgLy8gaWYoZWRpdG9yLmdldE1vZGVsKCkuZ2V0VmFsdWUoKSA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAvLyAgIHVuZG9EZWNvcmF0aW9ucygpO1xyXG4gICAgICAgICAgLy8gfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycm9yKTtcclxuICAgICAgICAgIGN1ci5tYWluQ29udHJvbGxlci5mbG93Q29udHJvbGxlci5mbG93Vmlldy5tb2RpZnlGbG93KFwiZXJyb3JcIiwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvL3J1biB0aGUgeHNkIHRvIHRoZSB4bWwgdGhhdCBpcyBjdXJyZW50bHkgaW4gdGhlIGVkaXRvclxyXG4gICAgJCgnI3J1blhzZCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgdmFsaWRhdGUgPSBjdXIudmFsaWRhdGVDb25maWd1cmF0aW9uKCksXHJcbiAgICAgICAgbGluZU51bWJlciA9IDA7XHJcbiAgICAgIGN1ci51bmRvRGVjb3JhdGlvbnMoKTtcclxuICAgICAgaWYgKHZhbGlkYXRlLmVycm9ycyAhPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZhbGlkYXRlLmVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRhdGUuZXJyb3JzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAgIGxpbmVOdW1iZXIgPSBpdGVtLm1hdGNoKC86Lio/Oi8pWzBdLnJlcGxhY2UoLzovZywgJycpO1xyXG4gICAgICAgICAgY3VyLmRlY29yYXRlTGluZShsaW5lTnVtYmVyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHNlbGVjdFBpcGUobmFtZSkge1xyXG4gICAgdGhpcy5jb2RlVmlldy5zZWxlY3RQaXBlKG5hbWUpO1xyXG4gIH1cclxuICBnZXRUeXBlcygpIHtcclxuICAgIHJldHVybiB0aGlzLmNvZGVWaWV3LmdldFR5cGVzKCk7XHJcbiAgfVxyXG4gIHZhbGlkYXRlQ29uZmlndXJhdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmNvZGVWaWV3LnZhbGlkYXRlQ29uZmlndXJhdGlvblZpZXcudmFsaWRhdGVDb25maWd1cmF0aW9uKCk7XHJcbiAgfVxyXG4gIGRlY29yYXRlTGluZShsaW5lTnVtYmVyKSB7XHJcbiAgICB0aGlzLmNvZGVWaWV3LnZhbGlkYXRlQ29uZmlndXJhdGlvblZpZXcuZGVjb3JhdGVMaW5lKGxpbmVOdW1iZXIpO1xyXG4gIH1cclxuICB1bmRvRGVjb3JhdGlvbnMoKSB7XHJcbiAgICB0aGlzLmNvZGVWaWV3LnZhbGlkYXRlQ29uZmlndXJhdGlvblZpZXcudW5kb0RlY29yYXRpb25zKCk7XHJcbiAgfVxyXG4gIGNoYW5nZU5hbWUob2xkV29yZCwgbmV3V29yZCkge1xyXG4gICAgdGhpcy5jb2RlVmlldy5jaGFuZ2VOYW1lKG9sZFdvcmQsIG5ld1dvcmQpO1xyXG4gIH1cclxuICBjaGFuZ2VQb3NzaXRpb24obmFtZSwgbmV3WCwgbmV3WSkge1xyXG4gICAgdGhpcy5jb2RlVmlldy5jaGFuZ2VQb3NzaXRpb24obmFtZSwgbmV3WCwgbmV3WSk7XHJcbiAgfVxyXG4gIGNoYW5nZUV4aXRQb3NzaXRpb24obmFtZSwgbmV3WCwgbmV3WSkge1xyXG4gICAgdGhpcy5jb2RlVmlldy5jaGFuZ2VFeGl0UG9zc2l0aW9uKG5hbWUsIG5ld1gsIG5ld1kpO1xyXG4gIH1cclxuICBjaGFuZ2VBZGRGb3J3YXJkKG5hbWUsIHBhdGgpIHtcclxuICAgIHRoaXMuY29kZVZpZXcuY2hhbmdlQWRkRm9yd2FyZChuYW1lLCBwYXRoKTtcclxuICB9XHJcbiAgZGVsZXRlRm9yd2FyZChuYW1lLCBwYXRoKSB7XHJcbiAgICB0aGlzLmNvZGVWaWV3LmRlbGV0ZUZvcndhcmQobmFtZSwgcGF0aCk7XHJcbiAgfVxyXG4gIGNoYW5nZUFkZFBpcGUobmFtZSwgcG9zc2l0aW9ucywgY2xhc3NOYW1lKSB7XHJcbiAgICB0aGlzLmNvZGVWaWV3LmNoYW5nZUFkZFBpcGUobmFtZSwgcG9zc2l0aW9ucywgY2xhc3NOYW1lKTtcclxuICB9XHJcbiAgZ2V0UGlwZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb2RlVmlldy5pYmlzZG9jSnNvbjtcclxuICB9XHJcblxyXG5cclxuICBnZXRDb2RlKCkge1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcbiAgICBmZXRjaCgnLi4vcmVzdC9pYmlzZG9jL2liaXNkb2MuanNvbicsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIC8vIFdvcmsgd2l0aCBKU09OIGRhdGEgaGVyZVxyXG4gICAgICAgIGN1ci5jb2RlVmlldy5pYmlzZG9jSnNvbiA9IGRhdGE7XHJcbiAgICAgICAgY3VyLm1haW5Db250cm9sbGVyLnNldFBpcGVzKGRhdGEpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAvLyBEbyBzb21ldGhpbmcgZm9yIGFuIGVycm9yIGhlcmVcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0WHNkKCkge1xyXG4gICAgZmV0Y2goJy4uL3Jlc3QvaWJpc2RvYy9pYmlzZG9jLnhzZCcsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIC8vIFdvcmsgd2l0aCBKU09OIGRhdGEgaGVyZVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiaWJpc2RvY1hzZFwiLCBkYXRhKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInhzZCBpcyBsb2FkZWQhLCBoZXJlXCIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIm5vdCBsb2FkZWQgeHNkXCIsIGVycik7XHJcbiAgICAgICAgLy8gRG8gc29tZXRoaW5nIGZvciBhbiBlcnJvciBoZXJlXHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXRDb25maWd1cmF0aW9ucygpIHtcclxuICAgIGxldCBjdXIgPSB0aGlzO1xyXG4gICAgZmV0Y2goJy4uL2lhZi9hcGkvY29uZmlndXJhdGlvbnMnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJ1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIGxldCBjb25maWd1cmF0aW9ucyA9IFtdLFxyXG4gICAgICAgICAgZG9tLCBvYmo7XHJcbiAgICAgICAgcmVzcG9uc2UubWF0Y2goLzxbY0Ndb25maWd1cmF0aW9uW15dKj8+W15dKj88XFwvW2NDXW9uZmlndXJhdGlvbj4vZykuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgICAgICAgY29uZmlndXJhdGlvbnMucHVzaChpdGVtKTtcclxuICAgICAgICAgIC8vIGl0ZW0ubWF0Y2goLzxbYUFdZGFwdGVyW15dKj8+W15dKj88XFwvW2FBXWRhcHRlcj4vZykuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gY29uZmlndXJhdGlvbnM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICByZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAoaXRlbS5tYXRjaCgvPENvbmZpZ3VyYXRpb24vZykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXNwb25zZVtpbmRleF0gPSBjdXIudG9CZWF1dGlmdWwudG9CZWF1dGlmdWxTeW50YXgoaXRlbSk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGluZGV4LCBjdXIudG9CZWF1dGlmdWwudG9CZWF1dGlmdWxTeW50YXgoaXRlbSkpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaW5kZXgsIGl0ZW0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIC8vIFdvcmsgd2l0aCBKU09OIGRhdGEgaGVyZVxyXG4gICAgICAgIGN1ci5jb2RlVmlldy5hZGRPcHRpb25zKGRhdGEpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnY291bGRudCBsb2FkIGNvbmZpZ3VyYXRpb25zJywgZXJyKVxyXG4gICAgICB9KVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEZXNjcmlwdGlvblZpZXcge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgfVxyXG5cclxuICBhZGREZXNjcmlwdGlvbih0ZXh0LCBwb3NzaXRpb25zLCBpZCkge1xyXG4gICAgbGV0IGNhbnZhcyA9ICQoJyNjYW52YXMnKTtcclxuICAgIGxldCBlbCA9ICQoXCI8ZGl2PjwvZGl2PlwiKS5hZGRDbGFzcyhcImRlc2NyaXB0aW9uXCIpLmF0dHIoJ2lkJywgJ2Rlc2NyaXB0aW9uJyArIGlkKTtcclxuICAgIGxldCBkZXNjcmlwdGlvblRleHQgPSAkKCc8cD48L3A+JykudGV4dCh0ZXh0KTtcclxuICAgIGVsLmFwcGVuZChkZXNjcmlwdGlvblRleHQpO1xyXG4gICAgY29uc29sZS5sb2coXCJkZXNjIFRleHQ6XCIgKyB0ZXh0LCBwb3NzaXRpb25zKTtcclxuICAgIHBvc3NpdGlvbnMueCA9IHBhcnNlSW50KHBvc3NpdGlvbnMueCkgKyAzMDA7XHJcbiAgICAkKGVsKS5jc3MoJ2xlZnQnLCBwb3NzaXRpb25zLnggKyAncHgnKTtcclxuICAgICQoZWwpLmNzcygndG9wJywgcG9zc2l0aW9ucy55ICsgJ3B4Jyk7XHJcbiAgICBjYW52YXMuYXBwZW5kKGVsKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IERlc2NyaXB0aW9uVmlldyBmcm9tICcuL0Rlc2NyaXB0aW9uVmlldy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQaXBlVmlldyB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGZsb3dWaWV3KSB7XHJcbiAgICB0aGlzLmZsb3dWaWV3ID0gZmxvd1ZpZXc7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uVmlldyA9IG5ldyBEZXNjcmlwdGlvblZpZXcoKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgIyBmdW5jdGlvbiB0byBtYW51YWxseSBhZGQgYSBQaXBlXHJcbiAgIyBpbmNyZW1lbnQgd2luZG93cyBhbmQgY3JlYXRlIGRpdlxyXG4gICMgbWFrZSBlbGVtZW50IGEgc291cmNlIGFuZCBhIHRhcmdldFxyXG4gICMgYmluZCB0byBjb25uZWN0aW9uXHJcbiAgKi9cclxuXHJcbiAgYWRkUGlwZShuYW1lLCBwb3NzaXRpb25zLCBleHRyYSwgaXNFeGl0LCBkZXNjVGV4dCkge1xyXG4gICAgbGV0IGZsb3dWaWV3ID0gdGhpcy5mbG93VmlldztcclxuICAgIGxldCBpZCA9IGZsb3dWaWV3LndpbmRvd3MgKz0gMTtcclxuICAgIGxldCBjYW52YXMgPSAkKCcjY2FudmFzJyk7XHJcbiAgICBsZXQgZWwgPSAkKFwiPGRpdj48L2Rpdj5cIikuYWRkQ2xhc3MoXCJ3aW5kb3cgc291cmNlV2luZG93XCIpLmF0dHIoXCJpZFwiLCBcInNvdXJjZVdpbmRvd1wiICsgaWQpO1xyXG4gICAgbGV0IHR5cGVUZXh0ID0gJChcIjxzdHJvbmc+PC9zdHJvbmc+XCIpLmF0dHIoXCJpZFwiLCBcInN0cm9uZ1wiKS50ZXh0KGZsb3dWaWV3LmdldFR5cGVzKClbbmFtZV0pO1xyXG4gICAgbGV0IHR5cGVXaW5kb3cgPSAkKCc8ZGl2PjwvZGl2PicpLmFkZENsYXNzKFwidHlwZVdpbmRvd1wiKS5hcHBlbmQodGhpcy5nZXRUeXBlSW1hZ2UobmFtZSksIHR5cGVUZXh0KTtcclxuICAgIGxldCBib3R0b21Db250YWluZXIgPSAkKCc8ZGl2PjwvZGl2PicpLmFkZENsYXNzKFwiYm90dG9tQ29udGFpbmVyXCIpO1xyXG4gICAgbGV0IG5hbWVUZXh0ID0gJChcIjxzdHJvbmc+PC9zdHJvbmc+XCIpLmF0dHIoXCJpZFwiLCBcInN0cm9uZ1wiKS50ZXh0KG5hbWUpO1xyXG4gICAgbGV0IGhyID0gJCgnPGhyPicpO1xyXG4gICAgbGV0IGV4dHJhVGV4dCA9ICQoXCI8c3Ryb25nPjwvc3Ryb25nPlwiKS5hdHRyKFwiaWRcIiwgXCJzdHJvbmdcIikudGV4dChleHRyYSk7XHJcbiAgICBpc0V4aXQgPyBib3R0b21Db250YWluZXIuYXBwZW5kKG5hbWVUZXh0LCBleHRyYVRleHQpIDogYm90dG9tQ29udGFpbmVyLmFwcGVuZChuYW1lVGV4dCwgaHIsIGV4dHJhVGV4dCk7XHJcbiAgICBlbC5hcHBlbmQodHlwZVdpbmRvdywgYm90dG9tQ29udGFpbmVyKTtcclxuICAgIGlmIChwb3NzaXRpb25zICE9IG51bGwpIHtcclxuICAgICAgJChlbCkuY3NzKCdsZWZ0JywgcG9zc2l0aW9ucy54ICsgJ3B4Jyk7XHJcbiAgICAgICQoZWwpLmNzcygndG9wJywgcG9zc2l0aW9ucy55ICsgJ3B4Jyk7XHJcbiAgICAgIGlmKGRlc2NUZXh0KSB7XHJcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvblZpZXcuYWRkRGVzY3JpcHRpb24oZGVzY1RleHQsIHBvc3NpdGlvbnMsIGlkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlzRXhpdCkge1xyXG4gICAgICAkKGVsKS5hZGRDbGFzcygnZXhpdCcpO1xyXG4gICAgfVxyXG4gICAgaW5zdGFuY2UubWFrZVNvdXJjZShlbCwge1xyXG4gICAgICBmaWx0ZXI6IFwiLmVuYWJsZURpc2FibGVTb3VyY2VcIixcclxuICAgICAgZmlsdGVyRXhjbHVkZTogdHJ1ZSxcclxuICAgICAgbWF4Q29ubmVjdGlvbnM6IC0xLFxyXG4gICAgICBlbmRwb2ludDogW1wiRG90XCIsIHtcclxuICAgICAgICByYWRpdXM6IDcsXHJcbiAgICAgICAgY3NzQ2xhc3M6IFwic21hbGwtYmx1ZVwiXHJcbiAgICAgIH1dLFxyXG4gICAgICBhbmNob3I6IGZsb3dWaWV3LnNvdXJjZUFuY2hvcnMsXHJcbiAgICAgIGNvbm5lY3RvcjogW2Zsb3dWaWV3LmNvbm5lY3RvclR5cGUsIHtcclxuICAgICAgICBzdHViOiBbNDAsIDYwXSxcclxuICAgICAgICBnYXA6IDEwLFxyXG4gICAgICAgIGNvcm5lclJhZGl1czogNSxcclxuICAgICAgICBhbHdheXNSZXNwZWN0U3R1YnM6IHRydWUsXHJcbiAgICAgICAgbWlkcG9pbnQ6IDAuMDAwMVxyXG4gICAgICB9XVxyXG4gICAgfSk7XHJcblxyXG4gICAgaW5zdGFuY2UubWFrZVRhcmdldChlbCwge1xyXG4gICAgICBkcm9wT3B0aW9uczoge1xyXG4gICAgICAgIGhvdmVyQ2xhc3M6IFwiaG92ZXJcIlxyXG4gICAgICB9LFxyXG4gICAgICBhbmNob3I6IFtcIkxlZnRcIiwgXCJUb3BcIiwgXCJSaWdodFwiXSxcclxuICAgICAgZW5kcG9pbnQ6IFtcIkRvdFwiLCB7XHJcbiAgICAgICAgcmFkaXVzOiAxMSxcclxuICAgICAgICBjc3NDbGFzczogXCJsYXJnZS1ncmVlblwiXHJcbiAgICAgIH1dXHJcbiAgICB9KTtcclxuICAgIGNhbnZhcy5hcHBlbmQoZWwpO1xyXG4gICAgaWYoZGVzY1RleHQpIHtcclxuICAgIGluc3RhbmNlLmNvbm5lY3Qoe3NvdXJjZTogXCJzb3VyY2VXaW5kb3dcIiArIGlkLCB0YXJnZXQ6IFwiZGVzY3JpcHRpb25cIiArIGlkfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmFtZTtcclxuICB9XHJcblxyXG4gIGdldFR5cGVJbWFnZShuYW1lLCBwYWxldHRlSW1nKSB7XHJcbiAgICBsZXQgdHlwZXMgPSB0aGlzLmZsb3dWaWV3LmdldFR5cGVzKCksXHJcbiAgICAgIGltZyxcclxuICAgICAgdGVzdEltYWdlID0gbmV3IEltYWdlKCksXHJcbiAgICAgIHVybDtcclxuICAgICAgaWYocGFsZXR0ZUltZykge1xyXG4gICAgICAgIHVybCA9ICdtZWRpYS8nICsgbmFtZSArICcucG5nJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgdXJsID0gJ21lZGlhLycgKyB0eXBlc1tuYW1lXSArICcucG5nJztcclxuICAgICAgfVxyXG4gICAgaWYgKHVybCAhPSBudWxsKSB7XHJcbiAgICAgIGltZyA9ICQoJzxpbWc+PC9pbWc+JykuYXR0cih7XHJcbiAgICAgICAgc3JjOiB1cmwsXHJcbiAgICAgICAgYWx0OiB0eXBlc1tuYW1lXSxcclxuICAgICAgICB0aXRsZTogdHlwZXNbbmFtZV1cclxuICAgICAgfSkuYWRkQ2xhc3MoXCJ0eXBlSW1nXCIpO1xyXG4gICAgICB0ZXN0SW1hZ2Uuc3JjID0gdXJsO1xyXG4gICAgICB0ZXN0SW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGltZy5hdHRyKCdzcmMnLCAnbWVkaWEvYmFzaWNQaXBlLnBuZycpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBpbWc7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQaXBlVmlldyBmcm9tICcuL1BpcGVWaWV3LmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsb3dHZW5lcmF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZsb3dWaWV3KSB7XHJcbiAgICB0aGlzLmZsb3dWaWV3ID0gZmxvd1ZpZXc7XHJcbiAgICB0aGlzLnBpcGVWaWV3ID0gbmV3IFBpcGVWaWV3KGZsb3dWaWV3KTtcclxuICB9XHJcblxyXG4gIGFkZFBpcGUobmFtZSA9IFwicGlwZVwiICsgKHRoaXMuZmxvd1ZpZXcud2luZG93cyksIHBvc3NpdGlvbnMsIGV4dHJhID0gXCJcIiwgaXNFeGl0LCBkZXNjVGV4dCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGlwZVZpZXcuYWRkUGlwZShuYW1lLCBwb3NzaXRpb25zLCBleHRyYSwgaXNFeGl0LCBkZXNjVGV4dCk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICMgaWYgdGhlIHBpcGVsaW5lIGlzIG5vdCBudWxsIGVtcHR5IHRoZSBjYW52YXNcclxuICAjIGZvciBwaXBlIGlzIG5vdCBudWxsIGdlbmVyYXRlIGVhY2ggcGlwZVxyXG4gICMgaWYgdGhlcmUgaXMgb25seSBvbmUgcGlwZSBvbmx5IGdlbmVyYXRlIHRoYXQgb25lXHJcbiAgIyBwdXNoIGFsbCBmb3J3YXJkcyB0byB0aGUgZm9yd2FyZHMgYXJyYXkgYW5kIGdlbmVyYXRlIHRoZSBmb3J3YXJkc1xyXG4gICovXHJcbiAgZ2VuZXJhdGVGbG93KHhtbCwgd2luZG93cykge1xyXG4gICAgdGhpcy5mbG93Vmlldy5yZXNldFdpbmRvd3MoKTtcclxuICAgIGxldCBwb3NzaXRpb25zID0gbnVsbDtcclxuICAgIGxldCB0cmFuc2Zvcm1lZFhtbCA9IHhtbDtcclxuICAgIGlmICh0cmFuc2Zvcm1lZFhtbCAhPSBudWxsICYmIHRyYW5zZm9ybWVkWG1sLkFkYXB0ZXIgIT0gbnVsbCAmJlxyXG4gICAgICB0cmFuc2Zvcm1lZFhtbC5BZGFwdGVyLlBpcGVsaW5lICE9IG51bGwpIHtcclxuICAgICAgaW5zdGFuY2UucmVzZXQoKTtcclxuICAgICAgJCgnI2NhbnZhcycpLmVtcHR5KCk7XHJcbiAgICAgIGlmICh0cmFuc2Zvcm1lZFhtbC5BZGFwdGVyLlBpcGVsaW5lLnBpcGUgIT0gbnVsbCkge1xyXG4gICAgICAgICQoJyNjYW52YXMnKS50ZXh0KFwiQWRhcHRlcjogXCIgKyB0cmFuc2Zvcm1lZFhtbC5BZGFwdGVyWydAbmFtZSddICsgJyAnKTtcclxuICAgICAgICBsZXQgcGlwZSA9IHRyYW5zZm9ybWVkWG1sLkFkYXB0ZXIuUGlwZWxpbmUucGlwZTtcclxuICAgICAgICBsZXQgZm9yd2FyZHMgPSBbXTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwaXBlKSkge1xyXG4gICAgICAgICAgZm9yIChsZXQgcCBpbiBwaXBlKSB7XHJcbiAgICAgICAgICAgIGxldCBuYW1lID0gcGlwZVtwXVsnQG5hbWUnXSxcclxuICAgICAgICAgICAgICB4cG9zID0gcGlwZVtwXVsnQHgnXSxcclxuICAgICAgICAgICAgICB5cG9zID0gcGlwZVtwXVsnQHknXSxcclxuICAgICAgICAgICAgICBleHRyYVRleHQgPSBcIlwiLFxyXG4gICAgICAgICAgICAgIGRlc2NUZXh0ID0gbnVsbDtcclxuICAgICAgICAgICAgcG9zc2l0aW9ucyA9IHRoaXMuY2hlY2tQb3NzaXRpb25zKHhwb3MsIHlwb3MpO1xyXG4gICAgICAgICAgICBpZiAocGlwZVtwXVsnQHhwYXRoRXhwcmVzc2lvbiddICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICBleHRyYVRleHQgPSBwaXBlW3BdWydAeHBhdGhFeHByZXNzaW9uJ10uc2xpY2UoMCwgMTUpICsgJy4uLic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGlwZVtwXS5GaXhlZFF1ZXJ5U2VuZGVyICE9IG51bGwgJiYgcGlwZVtwXS5GaXhlZFF1ZXJ5U2VuZGVyWydAcXVlcnknXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgZXh0cmFUZXh0ID0gcGlwZVtwXS5GaXhlZFF1ZXJ5U2VuZGVyWydAcXVlcnknXS5zbGljZSgwLCAxNSkgKyAnLi4uJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihwaXBlW3BdLmRlc2NyaXB0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwaXBlW3BdLmRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICBkZXNjVGV4dCA9IHBpcGVbcF0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkUGlwZShuYW1lLCBwb3NzaXRpb25zLCBleHRyYVRleHQsIG51bGwsIGRlc2NUZXh0KTtcclxuICAgICAgICAgICAgaWYgKHBpcGVbcF0uRm9yd2FyZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgbGV0IGZvcndhcmREYXRhID0gbnVsbDtcclxuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwaXBlW3BdLkZvcndhcmQpKSB7XHJcbiAgICAgICAgICAgICAgICBwaXBlW3BdLkZvcndhcmQuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICBmb3J3YXJkRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VQaXBlOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFBpcGU6IGl0ZW1bJ0BwYXRoJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbVsnQG5hbWUnXVxyXG4gICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICBmb3J3YXJkcy5wdXNoKGZvcndhcmREYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3J3YXJkRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgc291cmNlUGlwZTogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgdGFyZ2V0UGlwZTogcGlwZVtwXS5Gb3J3YXJkWydAcGF0aCddLFxyXG4gICAgICAgICAgICAgICAgICBuYW1lOiBwaXBlW3BdLkZvcndhcmRbJ0BuYW1lJ11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBmb3J3YXJkcy5wdXNoKGZvcndhcmREYXRhKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGV0IG5leHRQaXBlID0gcGFyc2VJbnQocCkgKyAxO1xyXG4gICAgICAgICAgICAgIGlmIChwaXBlW25leHRQaXBlXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZm9yd2FyZERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgIHNvdXJjZVBpcGU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldFBpcGU6IHBpcGVbbmV4dFBpcGVdWydAbmFtZSddLFxyXG4gICAgICAgICAgICAgICAgICBuYW1lOiBcInN1Y2Nlc3NcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yd2FyZHMucHVzaChmb3J3YXJkRGF0YSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxldCBuYW1lID0gcGlwZVsnQG5hbWUnXTtcclxuICAgICAgICAgIHRoaXMuYWRkUGlwZShuYW1lKTtcclxuICAgICAgICAgIGlmIChwaXBlLkZvcndhcmQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgZm9yd2FyZERhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwaXBlLkZvcndhcmQpKSB7XHJcbiAgICAgICAgICAgICAgcGlwZS5Gb3J3YXJkLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGZvcndhcmREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICBzb3VyY2VQaXBlOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICB0YXJnZXRQaXBlOiBpdGVtWydAcGF0aCddLFxyXG4gICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtWydAbmFtZSddXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZm9yd2FyZHMucHVzaChmb3J3YXJkRGF0YSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZm9yd2FyZERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2VQaXBlOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0UGlwZTogcGlwZS5Gb3J3YXJkWydAcGF0aCddLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogcGlwZS5Gb3J3YXJkWydAbmFtZSddXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBmb3J3YXJkcy5wdXNoKGZvcndhcmREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZEV4aXRzKHRyYW5zZm9ybWVkWG1sLkFkYXB0ZXIuUGlwZWxpbmUuRXhpdCk7XHJcbiAgICAgICAgaWYgKHBvc3NpdGlvbnMgPT09IG51bGwpIHtcclxuICAgICAgICAgIHRoaXMuZmxvd1ZpZXcuc2V0T2Zmc2V0cyhmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZmxvd1ZpZXcuc2V0T2Zmc2V0cyh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRyYW5zZm9ybWVkWG1sLkFkYXB0ZXIuUmVjZWl2ZXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgbGV0IGZvcndhcmREYXRhID0gdGhpcy5hZGRSZWNlaXZlcih0cmFuc2Zvcm1lZFhtbCwgZm9yd2FyZHNbMF0uc291cmNlUGlwZSk7XHJcbiAgICAgICAgICBmb3J3YXJkcy5wdXNoKGZvcndhcmREYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUZvcndhcmRzKGZvcndhcmRzKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5mbG93Vmlldy5kaXNwbGF5RXJyb3IodHJhbnNmb3JtZWRYbWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hlY2tQb3NzaXRpb25zKHhwb3MsIHlwb3MpIHtcclxuICAgIGlmICh4cG9zID09IG51bGwgJiYgeXBvcyAhPSBudWxsKSB7XHJcbiAgICAgIHhwb3MgPSB5cG9zO1xyXG4gICAgfSBlbHNlIGlmICh5cG9zID09IG51bGwgJiYgeHBvcyAhPSBudWxsKSB7XHJcbiAgICAgIHlwb3MgPSB4cG9zO1xyXG4gICAgfVxyXG4gICAgaWYgKHhwb3MgIT0gbnVsbCAmJiB5cG9zICE9IG51bGwpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB4OiB4cG9zLFxyXG4gICAgICAgIHk6IHlwb3NcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRSZWNlaXZlcih0cmFuc2Zvcm1lZFhtbCwgdGFyZ2V0KSB7XHJcbiAgICB0aGlzLmFkZFBpcGUoJyhyZWNlaXZlcik6ICcgKyB0cmFuc2Zvcm1lZFhtbC5BZGFwdGVyLlJlY2VpdmVyWydAbmFtZSddLCB7XHJcbiAgICAgIHg6IFwiNjAwXCIsXHJcbiAgICAgIHk6IFwiNDAwXCJcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc291cmNlUGlwZTogJyhyZWNlaXZlcik6ICcgKyB0cmFuc2Zvcm1lZFhtbC5BZGFwdGVyLlJlY2VpdmVyWydAbmFtZSddLFxyXG4gICAgICB0YXJnZXRQaXBlOiB0YXJnZXQsXHJcbiAgICAgIG5hbWU6ICdyZXF1ZXN0J1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGFkZEV4aXRzKGV4aXRzKSB7XHJcbiAgICBsZXQgZXhpdCA9IGV4aXRzLFxyXG4gICAgICBwb3NzaXRpb25zLFxyXG4gICAgICBuYW1lLFxyXG4gICAgICB5cG9zLFxyXG4gICAgICB4cG9zO1xyXG4gICAgaWYgKGV4aXQgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShleGl0KSkge1xyXG4gICAgICBsZXQgY3VyID0gdGhpcztcclxuICAgICAgZXhpdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgbmFtZSA9IGV4aXRbaW5kZXhdWydAcGF0aCddLFxyXG4gICAgICAgICAgeHBvcyA9IGV4aXRbaW5kZXhdWydAeCddLFxyXG4gICAgICAgICAgeXBvcyA9IGV4aXRbaW5kZXhdWydAeSddO1xyXG4gICAgICAgIGlmICh4cG9zICE9IG51bGwgJiYgeXBvcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICBwb3NzaXRpb25zID0ge1xyXG4gICAgICAgICAgICB4OiB4cG9zLFxyXG4gICAgICAgICAgICB5OiB5cG9zXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1ci5hZGRQaXBlKG5hbWUsIHBvc3NpdGlvbnMsIFwiXCIsIHRydWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5hbWUgPSBleGl0WydAcGF0aCddLFxyXG4gICAgICAgIHhwb3MgPSBleGl0WydAeCddLFxyXG4gICAgICAgIHlwb3MgPSBleGl0WydAeSddO1xyXG4gICAgICBpZiAoeHBvcyAhPSBudWxsICYmIHlwb3MgIT0gbnVsbCkge1xyXG4gICAgICAgIHBvc3NpdGlvbnMgPSB7XHJcbiAgICAgICAgICB4OiB4cG9zLFxyXG4gICAgICAgICAgeTogeXBvc1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmFkZFBpcGUobmFtZSwgcG9zc2l0aW9ucywgXCJcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICMgYSBmdW5jdGlvbiB0byBzZWFyY2ggYWxsIG9mIHRoZSBmb3J3YXJkcyBpbiB0aGUgdHJhbnNmb3JtZWQganNvbi5cclxuICAjIGJpbmQgdG8gZWFjaCBjb25uZWN0aW9uIGFuZCB1cGRhdGUgY29kZSBlZGl0b3IuXHJcbiAgIyBjb25uZWN0IGFsbCBvZiB0aGUgcGlwZXMgYWNjb3JkaW5nIHRvIHRoZSBmb3J3YXJkcyBnaXZlbiBpbiB0aGlzIG1ldGhvZC5cclxuICAjIEBwYXJhbSBmb3J3YXJkczogYSBqc29uIG9iamVjdCB3aXRoIGFsbCBvZiB0aGUgZm9yd2FyZHMuXHJcbiAgKi9cclxuICBnZW5lcmF0ZUZvcndhcmRzKGZvcndhcmRzKSB7XHJcbiAgICAvL3doZW4gZ2VuZXJhdGluZyBzZXQgdG8gdHJ1ZSBhbmQgYWZ0ZXIgZ2VuZXJhdGluZyB0byBmYWxzZS5cclxuICAgIGxldCBnZW5lcmF0ZWQgPSB0cnVlO1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcblxyXG4gICAgaW5zdGFuY2UuYmluZChcImNvbm5lY3Rpb25cIiwgZnVuY3Rpb24oaSwgYykge1xyXG4gICAgICBsZXQgY291bnRlciA9IDA7XHJcbiAgICAgIGluc3RhbmNlLmdldEFsbENvbm5lY3Rpb25zKCkuZm9yRWFjaChmdW5jdGlvbihjb25uKSB7XHJcbiAgICAgICAgaWYgKGNvbm4uc291cmNlSWQgPT0gaS5jb25uZWN0aW9uLnNvdXJjZUlkICYmIGNvbm4udGFyZ2V0SWQgPT0gaS5jb25uZWN0aW9uLnRhcmdldElkKSB7XHJcbiAgICAgICAgICBpZiAoY291bnRlciA8IDIpIHtcclxuICAgICAgICAgICAgY291bnRlcisrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsZXQgc291cmNlID0gaS5zb3VyY2VFbmRwb2ludC5lbGVtZW50Lmxhc3RDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudDtcclxuICAgICAgbGV0IHRhcmdldCA9IGkudGFyZ2V0RW5kcG9pbnQuZWxlbWVudC5sYXN0Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XHJcbiAgICAgIGkuY29ubmVjdGlvbi5iaW5kKFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24oY29ubikge1xyXG4gICAgICAgIGluc3RhbmNlLmRlbGV0ZUNvbm5lY3Rpb24oY29ubik7XHJcbiAgICAgICAgY3VyLmZsb3dWaWV3Lm1vZGlmeUZsb3coJ2RlbGV0ZScsIHtcclxuICAgICAgICAgIG5hbWU6IHNvdXJjZSxcclxuICAgICAgICAgIHRhcmdldDogdGFyZ2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vY29ubmVjdGlvbiBhbHJlYWR5IGV4aXN0cyBzbyBkZWxldGUgdGhlIGZpcnN0IGNvbm5lY3Rpb24uXHJcbiAgICAgIGlmIChjb3VudGVyID4gMSkge1xyXG4gICAgICAgIGluc3RhbmNlLmdldEFsbENvbm5lY3Rpb25zKCkuc29tZShmdW5jdGlvbihjb25uKSB7XHJcbiAgICAgICAgICBpZiAoY29ubi5zb3VyY2VJZCA9PSBpLmNvbm5lY3Rpb24uc291cmNlSWQgJiYgY29ubi50YXJnZXRJZCA9PSBpLmNvbm5lY3Rpb24udGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZGVsZXRlQ29ubmVjdGlvbihjb25uKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWdlbmVyYXRlZCkge1xyXG4gICAgICAgIGN1ci5mbG93Vmlldy5tb2RpZnlGbG93KCdjb25uZWN0aW9uJywge1xyXG4gICAgICAgICAgc291cmNlOiBzb3VyY2UsXHJcbiAgICAgICAgICB0YXJnZXQ6IHRhcmdldFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL2xvb3Agb3ZlciBhbmQgY29ubmVjdCB0aGUgZm9yd2FyZHMuXHJcbiAgICBsZXQgc291cmNlUGlwZSA9IFwiXCI7XHJcbiAgICBsZXQgdGFyZ2V0UGlwZSA9IFwiXCI7XHJcbiAgICBnZW5lcmF0ZWQgPSB0cnVlO1xyXG4gICAgJChmb3J3YXJkcykuZWFjaChmdW5jdGlvbihpbmRleCwgZikge1xyXG4gICAgICBzb3VyY2VQaXBlID0gXCJcIjtcclxuICAgICAgdGFyZ2V0UGlwZSA9IFwiXCI7XHJcbiAgICAgIGlmIChmLnRhcmdldFBpcGUgPT0gbnVsbCkge1xyXG4gICAgICAgIGYudGFyZ2V0UGlwZSA9IGYubmFtZTtcclxuICAgICAgfVxyXG4gICAgICAkKFwiLnNvdXJjZVdpbmRvd1wiKS5lYWNoKGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpWzBdO1xyXG4gICAgICAgIGxldCByZWZhY3RvcmVkVGV4dCA9ICRlbGVtZW50Lmxhc3RDaGlsZC5maXJzdENoaWxkLmlubmVySFRNTDtcclxuICAgICAgICBpZiAocmVmYWN0b3JlZFRleHQgPT0gZi5zb3VyY2VQaXBlKSB7XHJcbiAgICAgICAgICBzb3VyY2VQaXBlID0gJCgkZWxlbWVudCkuYXR0cignaWQnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlZmFjdG9yZWRUZXh0ID09IGYudGFyZ2V0UGlwZSkge1xyXG4gICAgICAgICAgdGFyZ2V0UGlwZSA9ICQoJGVsZW1lbnQpLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgbGV0IHBhaW50U3R5bGUgPSB7XHJcbiAgICAgICAgc3Ryb2tlOiBcIiMwMDAwMDBcIixcclxuICAgICAgICBzdHJva2VXaWR0aDogM1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmLm5hbWUgPT0gJ2ZhaWx1cmUnIHx8IGYubmFtZSA9PSAnZXhjZXB0aW9uJykge1xyXG4gICAgICAgIHBhaW50U3R5bGUuc3Ryb2tlID0gXCIjRkYwMDAwXCI7XHJcbiAgICAgIH0gZWxzZSBpZiAoZi5uYW1lID09ICdzdWNjZXNzJykge1xyXG4gICAgICAgIHBhaW50U3R5bGUuc3Ryb2tlID0gXCIjMjJiYjMzXCJcclxuICAgICAgfSBlbHNlIGlmIChmLm5hbWUgPT0gXCJyZXF1ZXN0XCIgfHwgZi5uYW1lID09ICdyZXNwb25zZScpIHtcclxuICAgICAgICBwYWludFN0eWxlLmRhc2hzdHlsZSA9IFwiMiA0XCI7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNvdXJjZVBpcGUgIT0gXCJcIiAmJiB0YXJnZXRQaXBlICE9IFwiXCIpIHtcclxuICAgICAgICBpbnN0YW5jZS5jb25uZWN0KHtcclxuICAgICAgICAgIHNvdXJjZTogc291cmNlUGlwZSxcclxuICAgICAgICAgIHRhcmdldDogdGFyZ2V0UGlwZSxcclxuICAgICAgICAgIHBhaW50U3R5bGU6IHBhaW50U3R5bGUsXHJcbiAgICAgICAgICBvdmVybGF5czogW1xyXG4gICAgICAgICAgICBbXCJMYWJlbFwiLCB7XHJcbiAgICAgICAgICAgICAgbGFiZWw6IGYubmFtZSxcclxuICAgICAgICAgICAgICBpZDogXCJsYWJlbFwiLFxyXG4gICAgICAgICAgICAgIGxvY2F0aW9uOiAwLjEsXHJcbiAgICAgICAgICAgICAgcGFkZGluZzogMTAwXHJcbiAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgY29ubmVjdG9yOiBbdGhpcy5jb25uZWN0b3JUeXBlLCB7XHJcbiAgICAgICAgICAgIHN0dWI6IFs0MCwgNjBdLFxyXG4gICAgICAgICAgICBnYXA6IDEwLFxyXG4gICAgICAgICAgICBjb3JuZXJSYWRpdXM6IDUsXHJcbiAgICAgICAgICAgIGFsd2F5c1Jlc3BlY3RTdHViczogdHJ1ZSxcclxuICAgICAgICAgICAgbWlkcG9pbnQ6IDAuMDAwMVxyXG4gICAgICAgICAgfV1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBnZW5lcmF0ZWQgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEZsb3dHZW5lcmF0b3IgZnJvbSAnLi9GbG93R2VuZXJhdG9yLmpzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxvd1ZpZXcge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMudHJhbnNmb3JtZWRYbWwgPSBudWxsO1xyXG4gICAgdGhpcy50eXBlcyA9IFtdO1xyXG4gICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMud2luZG93cyA9IDA7XHJcbiAgICB0aGlzLm1vdmluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5hZGRpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuY29ubmVjdG9yVHlwZSA9IFwiRmxvd2NoYXJ0XCI7XHJcbiAgICB0aGlzLmhvcml6b250YWxCdWlsZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5mbG93R2VuZXJhdG9yID0gbmV3IEZsb3dHZW5lcmF0b3IodGhpcyk7XHJcbiAgICB0aGlzLmdldEluc3RhbmNlKCk7XHJcbiAgfVxyXG4gIGFkZExpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICB9XHJcblxyXG4gIG5vdGlmeUxpc3RlbmVycyhkYXRhKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGwgPT4gbC5ub3RpZnkoZGF0YSkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW1hZ2UoKSB7XHJcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuXHJcbiAgICBkb210b2ltYWdlLnRvU3ZnKG5vZGUpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGFVcmwpIHtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTs7XHJcbiAgICAgICAgbGluay5kb3dubG9hZCA9ICdsb2wuc3ZnJztcclxuICAgICAgICBsaW5rLmhyZWYgPSBkYXRhVXJsO1xyXG4gICAgICAgIGxpbmsuY2xpY2soKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignb29wcywgc29tZXRoaW5nIHdlbnQgd3JvbmchJywgZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0V2luZG93cygpIHtcclxuICAgIHRoaXMud2luZG93cyA9IDA7XHJcbiAgfVxyXG5cclxuICBnZXRJbnN0YW5jZSgpIHtcclxuICAgIHRoaXMuc291cmNlQW5jaG9ycyA9IFtcclxuICAgICAgICBcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiTGVmdFwiLFxyXG4gICAgICAgIFswLjI1LCAxLCAwLCAxXSxcclxuICAgICAgICBbMC41LCAxLCAwLCAxXSxcclxuICAgICAgICBbMC43NSwgMSwgMCwgMV0sXHJcbiAgICAgICAgWzEsIDEsIDAsIDFdXHJcbiAgICAgIF0sXHJcbiAgICAgIHRoaXMuaW5zdGFuY2UgPSB3aW5kb3cuaW5zdGFuY2UgPSBqc1BsdW1iLmdldEluc3RhbmNlKHtcclxuICAgICAgICAvLyBkcmFnIG9wdGlvbnNcclxuICAgICAgICBEcmFnT3B0aW9uczoge1xyXG4gICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgIHpJbmRleDogMjAwMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gZGVmYXVsdCB0byBhIGdyYWRpZW50IHN0cm9rZSBmcm9tIGJsdWUgdG8gZ3JlZW4uXHJcbiAgICAgICAgUGFpbnRTdHlsZToge1xyXG4gICAgICAgICAgc3Ryb2tlOiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgIHN0cm9rZVdpZHRoOiAzXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvL3RoZSBhcnJvdyBvdmVybGF5IGZvciB0aGUgY29ubmVjdGlvblxyXG4gICAgICAgIENvbm5lY3Rpb25PdmVybGF5czogW1xyXG4gICAgICAgICAgW1wiQXJyb3dcIiwge1xyXG4gICAgICAgICAgICBsb2NhdGlvbjogMSxcclxuICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgaWQ6IFwiQVJST1dcIixcclxuICAgICAgICAgICAgekluZGV4OiAxMDAwXHJcbiAgICAgICAgICB9XVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgQ29udGFpbmVyOiBcImNhbnZhc1wiXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGxldCBiYXNpY1R5cGUgPSB7XHJcbiAgICAgIGNvbm5lY3RvcjogW1wiU3RhdGVNYWNoaW5lXCIsIHtcclxuICAgICAgICBzdHViOiBbNDAsIDYwXSxcclxuICAgICAgICBnYXA6IDEwLFxyXG4gICAgICAgIGNvcm5lclJhZGl1czogNSxcclxuICAgICAgICBhbHdheXNSZXNwZWN0U3R1YnM6IHRydWVcclxuICAgICAgfV1cclxuICAgIH1cclxuICAgIHRoaXMuaW5zdGFuY2UucmVnaXN0ZXJDb25uZWN0aW9uVHlwZShcImJhc2ljXCIsIGJhc2ljVHlwZSk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIG9uZSBmdW5jdGlvbiB0byBtb2RpZnkgdGhlIGZsb3cgYW5kIGNvZGUgYXQgdGhlIHNhbWUgdGltZS5cclxuICAgKiBAcGFyYW0gY2hhbmdlOiBpbnNlcnQgaGVyZSB0aGUgYWN0aW9uIHlvdSB3YW50IHRvIGRvLlxyXG4gICAqIEBwYXJhbSBjYWxsYmFjazogaW5zZXJ0IGFuIG9iamVjdCB3aXRoIG5lY2Vzc2FyeSBpbmZvcm1hdGlvbi5cclxuICAgKi9cclxuICBtb2RpZnlGbG93KGNoYW5nZSwgb2JqKSB7XHJcbiAgICBzd2l0Y2ggKGNoYW5nZSkge1xyXG4gICAgICBjYXNlIFwiZ2VuZXJhdGVcIjpcclxuICAgICAgICB0aGlzLmdlbmVyYXRlRmxvdygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdhZGQnOlxyXG4gICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKHRoaXMuYWRkQ3VzdG9tUGlwZShvYmoubmFtZSwgb2JqLmNsYXNzTmFtZSkpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdlZGl0JzpcclxuICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyh0aGlzLmVkaXRUaXRsZShvYmopKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnY29ubmVjdGlvbic6XHJcbiAgICAgICAgdGhpcy5hZGRpbmcgPSB0cnVlO1xyXG4gICAgICAgIG9iai50eXBlID0gXCJjaGFuZ2VBZGRGb3J3YXJkXCI7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMob2JqKTtcclxuICAgICAgICB0aGlzLmFkZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkcmFnJzpcclxuICAgICAgICBvYmogPSB0aGlzLmNsZWFuUG9zc2l0aW9ucyhvYmopO1xyXG4gICAgICAgIG9iai50eXBlID0gXCJkcmFnXCI7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMob2JqKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZHJhZ0V4aXQnOlxyXG4gICAgICAgIG9iaiA9IHRoaXMuY2xlYW5Qb3NzaXRpb25zKG9iaik7XHJcbiAgICAgICAgb2JqLnR5cGUgPSBcImRyYWdFeGl0XCI7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMob2JqKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICBvYmoudHlwZSA9IFwiZGVsZXRlXCI7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMob2JqKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImVycm9yXCI6XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3Iob2JqKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFuUG9zc2l0aW9ucyhvYmopIHtcclxuICAgIG9iai54ID0gb2JqLngucmVwbGFjZSgvcHgvLCAnJyk7XHJcbiAgICBvYmoueSA9IG9iai55LnJlcGxhY2UoL3B4LywgJycpO1xyXG4gICAgcmV0dXJuIG9iajtcclxuICB9XHJcblxyXG4gIGVkaXRUaXRsZShwaXBlKSB7XHJcbiAgICBsZXQgb2xkVGl0bGUgPSBwaXBlLmlubmVySFRNTDtcclxuICAgIGxldCBuZXdUaXRsZSA9IHByb21wdChcIldoYXQgaXMgdGhlIG5ldyBUaXRsZT9cIiwgb2xkVGl0bGUpO1xyXG4gICAgaWYgKG5ld1RpdGxlICE9IG51bGwpIHtcclxuICAgICAgcGlwZS5pbm5lckhUTUwgPSBuZXdUaXRsZTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBvbGRUaXRsZTogb2xkVGl0bGUsXHJcbiAgICAgICAgbmV3VGl0bGU6IG5ld1RpdGxlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgYWRkQ3VzdG9tUGlwZShuYW1lLCBjbGFzc05hbWUpIHtcclxuICAgIGxldCBuZXdQaXBlID0gdGhpcy5hZGRQaXBlKG5hbWUsIHtcclxuICAgICAgeDogMTAwLFxyXG4gICAgICB5OiAxMDBcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IFwiY2hhbmdlQWRkUGlwZVwiLFxyXG4gICAgICBuYW1lOiBuZXdQaXBlLFxyXG4gICAgICBwb3NzaXRpb25zOiB7XHJcbiAgICAgICAgeDogMTAwLFxyXG4gICAgICAgIHk6IDEwMFxyXG4gICAgICB9LFxyXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQ29ubmVjdG9yVHlwZShjdXIpIHtcclxuICAgIGlmIChjdXIuY29ubmVjdG9yVHlwZSA9PT0gXCJGbG93Y2hhcnRcIikge1xyXG4gICAgICBjdXIuY29ubmVjdG9yVHlwZSA9IFwiU3RhdGVNYWNoaW5lXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjdXIuY29ubmVjdG9yVHlwZSA9IFwiRmxvd2NoYXJ0XCI7XHJcbiAgICB9XHJcbiAgICBjdXIuZ2VuZXJhdGVGbG93KCk7XHJcbiAgfVxyXG5cclxuICBhZGRQaXBlKG5hbWUsIHBvc3NpdGlvbnMsIGV4dHJhLCBpc0V4aXQpIHtcclxuICAgIHJldHVybiB0aGlzLmZsb3dHZW5lcmF0b3IuYWRkUGlwZShuYW1lLCBwb3NzaXRpb25zLCBleHRyYSwgaXNFeGl0KTtcclxuICB9XHJcblxyXG4gIGdldFR5cGVzKCkge1xyXG4gICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoe1xyXG4gICAgICB0eXBlOiBcImdldFR5cGVzXCJcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMudHlwZXM7XHJcbiAgfVxyXG5cclxuICAvLyBhIGZ1bmN0aW9uIHRvIHB1dCBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwaXBlc1xyXG4gIHNldE9mZnNldHMocG9zc2l0aW9ucykge1xyXG4gICAgbGV0IGJveE9mZnNldCA9IDA7XHJcbiAgICBsZXQgY29udGFpbmVyID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLm1vdmluZyA9IHRydWU7XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLndpbmRvd3M7IGkrKykge1xyXG4gICAgICBib3hPZmZzZXQgKz0gMjUwO1xyXG4gICAgICBpZiAoIXBvc3NpdGlvbnMpIHtcclxuICAgICAgICBsZXQgYm94ID0gJCgnI3NvdXJjZVdpbmRvdycgKyBpKTtcclxuICAgICAgICBpZiAoIXRoaXMuaG9yaXpvbnRhbEJ1aWxkKSB7XHJcbiAgICAgICAgICBib3guY3NzKFwidG9wXCIsIGJveE9mZnNldCArIFwicHhcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJveC5jc3MoXCJ0b3BcIiwgXCIxMDBweFwiKTtcclxuICAgICAgICAgIGJveC5jc3MoXCJsZWZ0XCIsIGJveE9mZnNldCArIFwicHhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW9kaWZ5RmxvdygnZHJhZycsIHtcclxuICAgICAgICAgIG5hbWU6IGJveFswXS5sYXN0Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICB4OiBib3guY3NzKFwibGVmdFwiKSxcclxuICAgICAgICAgIHk6IGJveC5jc3MoXCJ0b3BcIilcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGxldCB0b3RhbExlbmd0aCwgd2luZG93TGVuZ3RoO1xyXG4gICAgICBpZiAoIXRoaXMuaG9yaXpvbnRhbEJ1aWxkKSB7XHJcbiAgICAgICAgdG90YWxMZW5ndGggPSBib3hPZmZzZXQgKyAoKDY0ICogaSkgLSAxNDUwKTtcclxuICAgICAgICB3aW5kb3dMZW5ndGggPSBwYXJzZUludCgkKCcjY2FudmFzJykuY3NzKCdoZWlnaHQnKS5yZXBsYWNlKCdweCcsICcnKSk7XHJcbiAgICAgICAgaWYgKHRvdGFsTGVuZ3RoID4gd2luZG93TGVuZ3RoKSB7XHJcbiAgICAgICAgICAkKCcjY2FudmFzJykuY3NzKCdoZWlnaHQnLCB0b3RhbExlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRvdGFsTGVuZ3RoID0gYm94T2Zmc2V0ICsgKCg2NCAqIGkpIC0gMTAwMCk7XHJcbiAgICAgICAgd2luZG93TGVuZ3RoID0gcGFyc2VJbnQoJCgnI2NhbnZhcycpLmNzcygnd2lkdGgnKS5yZXBsYWNlKCdweCcsICcnKSk7XHJcbiAgICAgICAgaWYgKHRvdGFsTGVuZ3RoID4gd2luZG93TGVuZ3RoKSB7XHJcbiAgICAgICAgICAkKCcjY2FudmFzJykuY3NzKCd3aWR0aCcsIHRvdGFsTGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMubW92aW5nID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUZsb3coKSB7XHJcbiAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyh7XHJcbiAgICAgIHR5cGU6IFwiY29udmVydENvbmZpZ3VyYXRpb25cIlxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZsb3dHZW5lcmF0b3IuZ2VuZXJhdGVGbG93KHRoaXMudHJhbnNmb3JtZWRYbWwsIHRoaXMud2luZG93cyk7XHJcbiAgfVxyXG5cclxuICBkaXNwbGF5RXJyb3IoZSkge1xyXG4gICAgaW5zdGFuY2UucmVzZXQoKTtcclxuICAgICQoJyNjYW52YXMnKS5lbXB0eSgpO1xyXG4gICAgJCgnI2NhbnZhcycpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAkKCcuY3VzdG9tRXJyb3JNZXNzYWdlJykucmVtb3ZlKCk7XHJcbiAgICAkKCcjZmxvd0NvbnRhaW5lcicpLmFwcGVuZCgkKFwiPGgxPjwvaDE+XCIpLnRleHQoJ0Vycm9yJyArIGUpLmFkZENsYXNzKCdjdXN0b21FcnJvck1lc3NhZ2UnKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQaXBlVmlldyBmcm9tICcuL1BpcGVWaWV3LmpzJztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWxldHRlVmlldyB7XHJcbiAgY29uc3RydWN0b3IoZmxvd0NvbnRyb2xsZXIpIHtcclxuICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLnBpcGVzID0gbnVsbDtcclxuICAgIHRoaXMuZmxvd1ZpZXcgPSBmbG93Q29udHJvbGxlci5mbG93VmlldztcclxuICB9XHJcblxyXG4gIGFkZExpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICB9XHJcblxyXG4gIG5vdGlmeUxpc3RlbmVycyhkYXRhKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGwgPT4gbC5ub3RpZnkoZGF0YSkpO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVQYWxldHRlUGlwZXMocGlwZXMpIHtcclxuICAgIGxldCBwaXBlVmlldyA9IG5ldyBQaXBlVmlldyh0aGlzLmZsb3dWaWV3KSxcclxuICAgIC8vIHhtbEJ1dHRvbiA9ICQoJzxidXR0b24+PC9idXR0b24+JykuYXR0cigndHlwZScsICdidXR0b24nKS5hZGRDbGFzcygnY29sbGFwc2libGUgbGlzdEl0ZW0nKS50ZXh0KFwieG1sIHBpcGVzXCIpLFxyXG4gICAgLy8geG1sQ29sbGFwcyA9ICQoJzxkaXY+PC9kaXY+JykuYWRkQ2xhc3MoJ2NvbnRlbnQnKSxcclxuICAgIHBhbGV0dGUgPSAkKCcjcGFsZXR0ZScpO1xyXG4gICAgLy8gcGFsZXR0ZS5hcHBlbmQoeG1sQnV0dG9uLCB4bWxDb2xsYXBzKTtcclxuICAgIHBpcGVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgbGV0IGltZyxcclxuICAgICAgc3Ryb25nID0gJCgnPHN0cm9uZz48L3N0cm9uZz4nKS50ZXh0KGl0ZW0ubmFtZSksXHJcbiAgICAgIGJ1dHRvbiA9ICQoJzxidXR0b24+PC9idXR0b24+JykuYXR0cigndHlwZScsICdidXR0b24nKS5hZGRDbGFzcygnY29sbGFwc2libGUgbGlzdEl0ZW0nKSxcclxuICAgICAgY29sbGFwc0JveCA9ICQoJzxkaXY+PC9kaXY+JykuYWRkQ2xhc3MoJ2NvbnRlbnQnKSxcclxuICAgICAgYnV0dG9uVGV4dCA9ICQoJzxzcGFuPjwvc3Bhbj4nKS5hZGRDbGFzcygnYnV0dG9uVGV4dCcpLnRleHQoaXRlbS5uYW1lKTtcclxuICAgICAgaW1nID0gcGlwZVZpZXcuZ2V0VHlwZUltYWdlKGl0ZW0ubmFtZSwgdHJ1ZSkuYXR0cignaWQnLCBpdGVtLm5hbWUgKTtcclxuICAgICAgYnV0dG9uLmFwcGVuZChidXR0b25UZXh0KTtcclxuICAgICAgY29sbGFwc0JveC5hcHBlbmQoaW1nKTtcclxuICAgICAgLy8gaWYoaXRlbS5uYW1lLm1hdGNoKC9YbWwvZykgIT0gbnVsbCkge1xyXG4gICAgICAvLyAgIHhtbENvbGxhcHMuYXBwZW5kKGJ1dHRvbiwgY29sbGFwc0JveCk7XHJcbiAgICAgIC8vICAgcmV0dXJuO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIHBhbGV0dGUuYXBwZW5kKGJ1dHRvbiwgY29sbGFwc0JveCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2V0SGFuZGxlcnMoKTtcclxuICB9XHJcblxyXG4gIHNldEhhbmRsZXJzKCkge1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcbiAgICB2YXIgY29sbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb2xsYXBzaWJsZVwiKTtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBjb2xsLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbGxbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgICAgICB2YXIgY29udGVudCA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgIGlmIChjb250ZW50LnN0eWxlLmRpc3BsYXkgPT09IFwiYmxvY2tcIikge1xyXG4gICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICQoJyNjYW52YXMnKS5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldikge1xyXG4gICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjY2FudmFzJykub24oJ2Ryb3AnLCBmdW5jdGlvbihldikge1xyXG4gICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgbGV0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZHJvcFBpcGUnKTtcclxuICAgICAgY3VyLmZsb3dWaWV3Lm1vZGlmeUZsb3coXCJhZGRcIiwge1xyXG4gICAgICAgIG5hbWU6IFwibmV3XCIgKyBkYXRhLFxyXG4gICAgICAgIGNsYXNzTmFtZTogZGF0YVxyXG4gICAgICB9KTtcclxuICAgICAgLy9pbnNlcnQgcGlwZSBpbiBlZGl0b3JcclxuICAgIH0pXHJcbiAgICAkKCcudHlwZUltZycpLm9uKCdkcmFnc3RhcnQnLCBmdW5jdGlvbihldikge1xyXG4gICAgICBjb25zb2xlLmxvZygnZHJhZycpO1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImRyb3BQaXBlXCIsIGV2LnRhcmdldC5pZCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEZsb3dWaWV3IGZyb20gJy4uL1ZpZXcvZmxvd1ZpZXcvRmxvd1ZpZXcuanMnO1xyXG5pbXBvcnQgUGFsZXR0ZVZpZXcgZnJvbSAnLi4vVmlldy9mbG93Vmlldy9QYWxldHRlVmlldy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG93Q29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG1haW5Db250cm9sbGVyKSB7XHJcbiAgICB0aGlzLm1haW5Db250cm9sbGVyID0gbWFpbkNvbnRyb2xsZXI7XHJcbiAgICB0aGlzLmZsb3dWaWV3ID0gbmV3IEZsb3dWaWV3KCk7XHJcbiAgICB0aGlzLmZsb3dWaWV3LmFkZExpc3RlbmVyKHRoaXMpO1xyXG4gICAgdGhpcy5wYWxldHRlVmlldyA9IG5ldyBQYWxldHRlVmlldyh0aGlzKTtcclxuICAgIHRoaXMucGFsZXR0ZVZpZXcuYWRkTGlzdGVuZXIodGhpcyk7XHJcbiAgICB0aGlzLm5vdGlmeSh7dHlwZTogXCJnZXRQaXBlc1wifSk7XHJcbiAgICB0aGlzLmhvdmVyU291cmNlV2luZG93ID0gZmFsc2U7XHJcbiAgICB0aGlzLmluaXRIYW5kbGVycygpO1xyXG4gIH1cclxuXHJcbiAgbm90aWZ5KGRhdGEpIHtcclxuICAgIGlmIChkYXRhID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfTtcclxuICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XHJcbiAgICAgIGNhc2UgXCJjb252ZXJ0Q29uZmlndXJhdGlvblwiOlxyXG4gICAgICAgIHRoaXMuZmxvd1ZpZXcudHJhbnNmb3JtZWRYbWwgPSB0aGlzLm1haW5Db250cm9sbGVyLmNvbnZlcnRDb25maWd1cmF0aW9uKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJnZXRUeXBlc1wiOlxyXG4gICAgICAgIHRoaXMuZmxvd1ZpZXcudHlwZXMgPSB0aGlzLm1haW5Db250cm9sbGVyLm1vZGlmeUNvZGUoXCJnZXRUeXBlc1wiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImNoYW5nZU5hbWVcIjpcclxuICAgICAgICB0aGlzLm1haW5Db250cm9sbGVyLm1vZGlmeUNvZGUoXCJjaGFuZ2VOYW1lXCIsIGRhdGEpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiY2hhbmdlQWRkUGlwZVwiOlxyXG4gICAgICAgIHRoaXMubWFpbkNvbnRyb2xsZXIubW9kaWZ5Q29kZShcImNoYW5nZUFkZFBpcGVcIiwgZGF0YSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJjaGFuZ2VBZGRGb3J3YXJkXCI6XHJcbiAgICAgICAgdGhpcy5tYWluQ29udHJvbGxlci5tb2RpZnlDb2RlKFwiY2hhbmdlQWRkRm9yd2FyZFwiLCBkYXRhKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImRyYWdcIjpcclxuICAgICAgICB0aGlzLm1haW5Db250cm9sbGVyLm1vZGlmeUNvZGUoXCJjaGFuZ2VQb3NzaXRpb25cIiwgZGF0YSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJkcmFnRXhpdFwiOlxyXG4gICAgICAgIHRoaXMubWFpbkNvbnRyb2xsZXIubW9kaWZ5Q29kZShcImNoYW5nZUV4aXRQb3NzaXRpb25cIiwgZGF0YSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJkZWxldGVcIjpcclxuICAgICAgICB0aGlzLm1haW5Db250cm9sbGVyLm1vZGlmeUNvZGUoXCJkZWxldGVGb3J3YXJkXCIsIGRhdGEpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdEhhbmRsZXJzKCkge1xyXG4gICAgbGV0IGN1ciA9IHRoaXM7XHJcbiAgICAkKCcjYWRkUGlwZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICBjdXIuZmxvd1ZpZXcubW9kaWZ5RmxvdygnYWRkJywge25hbWU6IFwibmV3UGlwZVwiLCBjbGFzc05hbWU6IFwiY3VzdG9tUGlwZVwifSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjZG93bmxvYWRMaW5rJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgIGN1ci5mbG93Vmlldy5nZXRJbWFnZSgpO1xyXG4gICAgfSlcclxuXHJcbiAgICAkKCcjc2V0RGF0YScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICBjdXIuZmxvd1ZpZXcuZ2VuZXJhdGVGbG93KGN1ci5mbG93Vmlldyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjbGluZUNoYW5nZXMnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgY3VyLmZsb3dWaWV3LnRvZ2dsZUNvbm5lY3RvclR5cGUoY3VyLmZsb3dWaWV3KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vdG9nZ2xlIGJ1aWxkaW5nIHRoZSBmbG93IGluIGhvcml6b250YWwgbW9kZS5cclxuICAgICQoJyN0b2dnbGVIJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBob3Jpem9udGFsQnVpbGQgPSBjdXIuZmxvd1ZpZXcuaG9yaXpvbnRhbEJ1aWxkO1xyXG4gICAgICBpZiAoIWhvcml6b250YWxCdWlsZCkge1xyXG4gICAgICAgIGN1ci5mbG93Vmlldy5ob3Jpem9udGFsQnVpbGQgPSB0cnVlO1xyXG4gICAgICAgICQoJyN0b2dnbGVIJykuYWRkQ2xhc3MoJ3NlbGVjdGVkSXRlbScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN1ci5mbG93Vmlldy5ob3Jpem9udGFsQnVpbGQgPSBmYWxzZTtcclxuICAgICAgICAkKCcjdG9nZ2xlSCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZEl0ZW0nKTtcclxuICAgICAgfVxyXG4gICAgICBjdXIuZmxvd1ZpZXcuZ2VuZXJhdGVGbG93KGN1ci5mbG93Vmlldyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL3JlbmFtZSBhIHBpcGVcclxuICAgICQoXCIjY2FudmFzXCIpLm9uKCdkYmxjbGljaycsICcjc3Ryb25nJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImRibGNsaWNrIVwiKTtcclxuICAgICAgaWYgKHRoaXMuaW5uZXJIVE1MICE9PSBcIkVYSVRcIikge1xyXG4gICAgICAgIGN1ci5mbG93Vmlldy5tb2RpZnlGbG93KCdlZGl0JywgdGhpcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGpzUGx1bWIub24oJCgnI2NhbnZhcycpLCBcIm1vdXNlb3ZlclwiLCBcIi5zb3VyY2VXaW5kb3dcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICRwYW56b29tLnBhbnpvb20oXCJkaXNhYmxlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAganNQbHVtYi5vbigkKCcjY2FudmFzJyksIFwibW91c2VvdXRcIiwgXCIuc291cmNlV2luZG93XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAkcGFuem9vbS5wYW56b29tKFwiZW5hYmxlXCIpO1xyXG4gICAgICAkKCcjZmxvd0NvbnRhaW5lcicpLmF0dHIoJ3N0eWxlJywgJycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI2NhbnZhcycpLm9uKFwiY2xpY2tcIiwgXCIuc291cmNlV2luZG93XCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjdXIubWFpbkNvbnRyb2xsZXIubW9kaWZ5Q29kZShcInVuZG9EZWNvcmF0aW9uc1wiKTtcclxuICAgICAgY3VyLm1haW5Db250cm9sbGVyLm1vZGlmeUNvZGUoXCJzZWxlY3RQaXBlXCIsIHtcclxuICAgICAgICBuYW1lOiB0aGlzLmxhc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuXHJcbiAgICAvL21ha2UgdGhlIGJvdHRvbSBjb250YWluZXIgZHJhZ2dhYmxlIHdpdGggbW91c2VvdmVyXHJcbiAgICBqc1BsdW1iLm9uKCQoJyNjYW52YXMnKSwgXCJtb3VzZW92ZXJcIiwgXCIuYm90dG9tQ29udGFpbmVyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgc291cmNlRGl2ID0gdGhpcy5wYXJlbnRFbGVtZW50O1xyXG4gICAgICBsZXQgZHJhZ0RhdGEgPSB7XHJcbiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgIGNvbnRhaW5tZW50OiAnI2NhbnZhcycsXHJcbiAgICAgICAgZHJhZzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGN1ci5mbG93Vmlldy5tb2RpZnlGbG93KTtcclxuICAgICAgICAgIGN1ci5mbG93Vmlldy5tb3ZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgbGV0IGRyYWdPYmogPSB7XHJcbiAgICAgICAgICAgIHg6ICQoc291cmNlRGl2KS5jc3MoJ2xlZnQnKSxcclxuICAgICAgICAgICAgeTogJChzb3VyY2VEaXYpLmNzcygndG9wJyksXHJcbiAgICAgICAgICAgIG5hbWU6IHNvdXJjZURpdi5sYXN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCQoc291cmNlRGl2KS5oYXNDbGFzcygnZXhpdCcpKSB7XHJcbiAgICAgICAgICAgIGN1ci5mbG93Vmlldy5tb2RpZnlGbG93KCdkcmFnRXhpdCcsIGRyYWdPYmopO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VyLmZsb3dWaWV3Lm1vZGlmeUZsb3coJ2RyYWcnLCBkcmFnT2JqKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgY3VyLmZsb3dWaWV3Lm1vdmluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpbnN0YW5jZS5kcmFnZ2FibGUoc291cmNlRGl2LCBkcmFnRGF0YSk7XHJcbiAgICAgIGlmIChpbnN0YW5jZS5pc1NvdXJjZUVuYWJsZWQoc291cmNlRGl2KSkge1xyXG4gICAgICAgIGluc3RhbmNlLnRvZ2dsZVNvdXJjZUVuYWJsZWQoc291cmNlRGl2KTtcclxuICAgICAgfVxyXG4gICAgICAkKHRoaXMpLmFkZENsYXNzKFwiZWxlbWVudC1kaXNhYmxlZFwiKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL3doZW4gbGVhdmluZyBjb250YWluZXIgbm90IGRyYWdnYWJsZVxyXG4gICAganNQbHVtYi5vbigkKCcjY2FudmFzJyksIFwibW91c2VvdXRcIiwgXCIuYm90dG9tQ29udGFpbmVyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgc291cmNlRGl2ID0gdGhpcy5wYXJlbnRFbGVtZW50O1xyXG4gICAgICBpbnN0YW5jZS5kcmFnZ2FibGUoc291cmNlRGl2LCB7XHJcbiAgICAgICAgZGlzYWJsZWQ6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghaW5zdGFuY2UuaXNTb3VyY2VFbmFibGVkKHNvdXJjZURpdikpIHtcclxuICAgICAgICBpbnN0YW5jZS50b2dnbGVTb3VyY2VFbmFibGVkKHNvdXJjZURpdik7XHJcbiAgICAgIH1cclxuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImVsZW1lbnQtZGlzYWJsZWRcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL2NvbnRhaW4gY2FudmFzIHRvIGNvbnRhaW5lci5cclxuICAgIHZhciBtaW5TY2FsZVggPSAkKCcjZmxvd0NvbnRhaW5lcicpLmlubmVyV2lkdGgoKTtcclxuICAgIHZhciBtaW5TY2FsZVkgPSAkKCcjZmxvd0NvbnRhaW5lcicpLmlubmVySGVpZ2h0KCk7XHJcbiAgICBsZXQgJHBhbnpvb20gPSAkKCcjY2FudmFzJykucGFuem9vbSh7XHJcbiAgICAgIG1pblNjYWxlOiAwLjUsXHJcbiAgICAgIGluY3JlbWVudDogMC4yXHJcbiAgICB9KTtcclxuXHJcbiAgICAvL21ha2Ugc3VyZSBwYW56b29tIGRvZXNuJ3QgbGVhdmUgdGhlIGNvbnRhaW5lci5cclxuICAgICRwYW56b29tLm9uKCdwYW56b29tZW5kJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgY3VycmVudF9wdWxsWSA9IHBhcnNlSW50KCQoJyNjYW52YXMnKS5jc3MoJ3RyYW5zZm9ybScpLnNwbGl0KCcsJylbNV0pO1xyXG4gICAgICB2YXIgY3VycmVudF9wdWxsWCA9IHBhcnNlSW50KCQoJyNjYW52YXMnKS5jc3MoJ3RyYW5zZm9ybScpLnNwbGl0KCcsJylbNF0pO1xyXG4gICAgICBpZiAoY3VycmVudF9wdWxsWCA+PSAwKSB7XHJcbiAgICAgICAgJHBhbnpvb20ucGFuem9vbSgncGFuJywgMCwgY3VycmVudF9wdWxsWSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGN1cnJlbnRfcHVsbFkgPD0gLU1hdGguYWJzKCQoJyNjYW52YXMnKS5jc3MoJ2hlaWdodCcpLnJlcGxhY2UoJ3B4JywgJycpKSArIDEwMDApIHtcclxuICAgICAgICAkcGFuem9vbS5wYW56b29tKCdwYW4nLCBjdXJyZW50X3B1bGxYLCAtTWF0aC5hYnMoJCgnI2NhbnZhcycpLmNzcygnaGVpZ2h0JykucmVwbGFjZSgncHgnLCAnJykpICsgMTAwMCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGN1cnJlbnRfcHVsbFggPD0gLTE1NDApIHtcclxuICAgICAgICAkcGFuem9vbS5wYW56b29tKCdwYW4nLCAtMTU0MCwgY3VycmVudF9wdWxsWSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGN1cnJlbnRfcHVsbFkgPj0gMCkge1xyXG4gICAgICAgICRwYW56b29tLnBhbnpvb20oJ3BhbicsIGN1cnJlbnRfcHVsbFgsIDApO1xyXG4gICAgICB9XHJcbiAgICAgICQoJyNmbG93Q29udGFpbmVyJykuYXR0cignc3R5bGUnLCAnJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL21ha2Ugem9vbSBwb3NzaWJsZVxyXG4gICAgJHBhbnpvb20ucGFyZW50KCkub24oJ21vdXNld2hlZWwuZm9jYWwnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGlmICghZS5zaGlmdEtleSkgcmV0dXJuO1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBkZWx0YSA9IGUuZGVsdGEgfHwgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGE7XHJcbiAgICAgIHZhciB6b29tT3V0ID0gZGVsdGEgPyBkZWx0YSA8IDAgOiBlLm9yaWdpbmFsRXZlbnQuZGVsdGFZID4gMDtcclxuICAgICAgJHBhbnpvb20ucGFuem9vbSgnem9vbScsIHpvb21PdXQsIHtcclxuICAgICAgICBpbmNyZW1lbnQ6IDAuMSxcclxuICAgICAgICBmb2NhbDogZVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ29uZmlndXJhdGlvbkNvbnZlcnRlciBmcm9tICcuLi9Nb2RlbC9Db25maWd1cmF0aW9uQ29udmVydGVyLmpzJztcclxuaW1wb3J0IENvZGVDb250cm9sbGVyIGZyb20gJy4vQ29kZUNvbnRyb2xsZXIuanMnO1xyXG5pbXBvcnQgRmxvd0NvbnRyb2xsZXIgZnJvbSAnLi9GbG93Q29udHJvbGxlci5qcyc7XHJcblxyXG5cclxuY2xhc3MgTWFpbkNvbnRyb2xsZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuY29uZmlndXJhdGlvbkNvbnZlcnRlciA9IG5ldyBDb25maWd1cmF0aW9uQ29udmVydGVyKCk7XHJcbiAgICB0aGlzLmNvZGVDb250cm9sbGVyID0gbmV3IENvZGVDb250cm9sbGVyKHRoaXMpO1xyXG4gICAgdGhpcy5mbG93Q29udHJvbGxlciA9IG5ldyBGbG93Q29udHJvbGxlcih0aGlzKTtcclxuICB9XHJcblxyXG4gIGNvbnZlcnRDb25maWd1cmF0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbkNvbnZlcnRlci5jb252ZXJ0Q29uZmlndXJhdGlvbih0aGlzLmNvZGVDb250cm9sbGVyLmNvZGVWaWV3LmVkaXRvcik7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUZsb3coKSB7XHJcbiAgICB0aGlzLmZsb3dDb250cm9sbGVyLmZsb3dWaWV3Lm1vZGlmeUZsb3coXCJnZW5lcmF0ZVwiKTtcclxuICB9XHJcbiAgc2V0UGlwZXMoZGF0YSkge1xyXG4gICAgdGhpcy5mbG93Q29udHJvbGxlci5wYWxldHRlVmlldy5nZW5lcmF0ZVBhbGV0dGVQaXBlcyhkYXRhWzJdLmNsYXNzZXMpO1xyXG4gIH1cclxuXHJcbiAgbW9kaWZ5Q29kZSh0eXBlLCBvYmopIHtcclxuICAgIGxldCBjb2RlQ29udHJvbGxlciA9IHRoaXMuY29kZUNvbnRyb2xsZXI7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcImdldFR5cGVzXCI6XHJcbiAgICAgICAgcmV0dXJuIGNvZGVDb250cm9sbGVyLmdldFR5cGVzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJ2YWxpZGF0ZUNvbmZpZ3VyYXRpb25cIjpcclxuICAgICAgICByZXR1cm4gY29kZUNvbnRyb2xsZXIudmFsaWRhdGVDb25maWd1cmF0aW9uKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJkZWNvcmF0ZUxpbmVcIjpcclxuICAgICAgICBjb2RlQ29udHJvbGxlci5kZWNvcmF0ZUxpbmUob2JqLmxpbmUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwidW5kb0RlY29yYXRpb25zXCI6XHJcbiAgICAgICAgY29kZUNvbnRyb2xsZXIudW5kb0RlY29yYXRpb25zKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJjaGFuZ2VOYW1lXCI6XHJcbiAgICAgICAgY29kZUNvbnRyb2xsZXIuY2hhbmdlTmFtZShvYmoub2xkVGl0bGUsIG9iai5uZXdUaXRsZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJjaGFuZ2VQb3NzaXRpb25cIjpcclxuICAgICAgICBjb2RlQ29udHJvbGxlci5jaGFuZ2VQb3NzaXRpb24ob2JqLm5hbWUsIG9iai54LCBvYmoueSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJjaGFuZ2VFeGl0UG9zc2l0aW9uXCI6XHJcbiAgICAgICAgY29kZUNvbnRyb2xsZXIuY2hhbmdlRXhpdFBvc3NpdGlvbihvYmoubmFtZSwgb2JqLngsIG9iai55KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImNoYW5nZUFkZEZvcndhcmRcIjpcclxuICAgICAgICBjb2RlQ29udHJvbGxlci5jaGFuZ2VBZGRGb3J3YXJkKG9iai5zb3VyY2UsIG9iai50YXJnZXQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiZGVsZXRlRm9yd2FyZFwiOlxyXG4gICAgICAgIGNvZGVDb250cm9sbGVyLmRlbGV0ZUZvcndhcmQob2JqLm5hbWUsIG9iai50YXJnZXQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiY2hhbmdlQWRkUGlwZVwiOlxyXG4gICAgICAgIGNvZGVDb250cm9sbGVyLmNoYW5nZUFkZFBpcGUob2JqLm5hbWUsIG9iai5wb3NzaXRpb25zLCBvYmouY2xhc3NOYW1lKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInNlbGVjdFBpcGVcIjpcclxuICAgICAgICBjb2RlQ29udHJvbGxlci5zZWxlY3RQaXBlKG9iai5uYW1lKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmxldCBtYWluQ29udHJvbGxlciA9IG5ldyBNYWluQ29udHJvbGxlcigpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9